"use strict";(self.webpackChunkmyems=self.webpackChunkmyems||[]).push([[77],{59176:(e,t,a)=>{a.d(t,{A:()=>s});const s=e=>({__html:e})},34530:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ia});var s=a(65043),r=a(91688),o=a(23967),n=a(87076),i=a(75304),l=a(44864),d=a(94576),c=a(25852),u=a(13718),m=a(45413),p=a(8586),h=a(64412),g=a(95186),x=a(64387),f=a(87382),_=a(52669),b=a(15751),y=a(86178),j=a.n(y),A=a(64126),v=a(77409),T=a(30967),S=a(98595),U=a(79976),E=a(39281),D=a(40411),C=a(95179),k=a(59042),M=(a(31856),a(70579));U.t1.register(U.PP,U.kc,U.FN,U.E8,U.m_,U.s$);const N=(0,E.C)()((e=>{let{reportingTitle:t,baseTitle:a,reportingTooltipTitle:r,baseTooltipTitle:o,reportingLabels:n,baseLabels:d,reportingData:m,baseData:p,rates:h,options:x,t:f}=e;const[_,b]=(0,s.useState)("a0"),{isDark:y}=(0,s.useContext)(C.Ay),j=(0,s.useRef)(null),[A,v]=(0,s.useState)({datasets:[]});(0,s.useEffect)((()=>{const e=j.current;if(e){const t=e.ctx,a=y?t.createLinearGradient(0,0,0,t.canvas.height):t.createLinearGradient(0,0,0,250);a.addColorStop(0,y?"rgba(44,123,229, 0.5)":"rgba(255, 255, 255, 0.3)"),a.addColorStop(1,y?"transparent":"rgba(255, 255, 255, 0)");const s={datasets:[{data:U(h[_]),borderColor:(0,S.IO)(y?S.kY.primary:"#000",.8),backgroundColor:a,type:"line",yAxisID:"y1",tooltip:{callbacks:{label:function(e){return e.raw+"%"}}},datalabels:{formatter:function(e,t){return e+"%"},color:y?S.kY.light:S.kY.dark,align:"end",anchor:"end",display:function(e){return e.dataset.data.length<=20}}},{data:U(p[_]),backgroundColor:"#1a3a64",stack:"base",tension:.4,datalabels:{display:function(e){return!1}},borderWidth:.1,borderRadius:4},{data:U(m[_]),backgroundColor:"#2c7be5",stack:"reporting",tension:.4,datalabels:{display:function(e){return!1}},borderWidth:.1,borderRadius:4}],labels:U(n[_])};v(s)}}),[p,m,_,d,n,h]);const T={plugins:[k.A],options:{plugins:{legend:{display:!1},tooltip:{xPadding:20,yPadding:10,displayColors:!1,callbacks:{title:function(e){return e[0].datasetIndex-1?"".concat(n[_][e[0].dataIndex]):"".concat(d[_][e[0].dataIndex])},label:function(e){let t=Number(e.raw);return t=null==e.raw||isNaN(t)?null:t.toFixed(3),e.datasetIndex-1?"".concat(E(r,_)," - ").concat(t):"".concat(E(o,_)," - ").concat(t)}}}},interaction:{intersect:!1,mode:"x"},scales:{x:{display:!0,ticks:{fontColor:(0,S.IO)("#fff",.8),fontStyle:600,color:y?S.kY.light:S.kY.dark},stacked:!0},y:{display:!0,gridLines:{color:(0,S.IO)("#000",.1)},ticks:{color:y?S.kY.light:S.kY.dark},stack:!0},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},suggestedMax:100,ticks:{callback:function(e,t,a){return e+"%"},color:y?S.kY.light:S.kY.dark}}},hover:{mode:"label"}}},U=e=>void 0===e?[]:e,E=(e,t)=>{const a=e.name,s=e.substitute;let r={};return s.forEach((a=>{r[a]=e[a]?e[a][t]:null})),f(a,r)};return(0,M.jsx)(i.A,{className:"mb-3",children:(0,M.jsxs)(l.A,{className:"rounded-soft",children:[(0,M.jsxs)(c.A,{className:"text-white align-items-center no-gutters",children:[(0,M.jsxs)(u.A,{children:[(0,M.jsx)("h5",{className:"text-lightSlateGray mb-0",children:E(t,_)}),(0,M.jsx)("p",{className:"fs--1 font-weight-semi-bold",children:E(a,_)})]}),(0,S.i)(x)&&(0,M.jsx)(u.A,{xs:"auto",className:"d-none d-sm-block",children:(0,M.jsx)(g.A,{id:"ddd",type:"select",bsSize:"sm",className:"mb-3 shadow",value:_,onChange:e=>{let{target:t}=e;b(t.value),j.current.update()},children:x.map((e=>{let{value:t,label:a}=e;return(0,M.jsx)("option",{value:t,children:a},t)}))})})]}),(0,M.jsx)(D.t1,{ref:j,type:"bar",data:A,options:T.options,plugins:T.plugins,width:1618,height:218})]})})}));var Y=a(13106),P=a(5673),R=a(12216),H=a(4638),w=a(93488),I=a(92073);const F=[{value:"yearly",label:"Yearly"},{value:"monthly",label:"Monthly"},{value:"weekly",label:"Weekly"},{value:"daily",label:"Daily"},{value:"hourly",label:"Hourly"}],O=[{value:"year-over-year",label:"Year-Over-Year"},{value:"month-on-month",label:"Month-On-Month"},{value:"free-comparison",label:"Free Comparison"},{value:"none-comparison",label:"None Comparison"}];var L=a(75166);const G=e=>{let{id:t,disabled:a,format:r,value:o,onChange:n,size:i,style:l,onClean:d,locale:c,placeholder:u}=e,m=!0;const p=s.useRef();return(0,M.jsx)(L.A,{id:t,disabled:a,format:r,value:o,onChange:n,size:i,style:l,onClean:d,cleanable:!1,locale:c,placeholder:u,onSelect:e=>{let t=j()(e).format("YYYY-MM-DD"),a=p.current.overlay.children[0].children[0].children[0].children[0].children[1],s=p.current.overlay.children[0].children[0].children[0].children[0].children[0];m&&setTimeout((()=>{s.childNodes[0].nodeValue=t+" "+a.children[0].children[0].children[1].innerText}),0),m=!m},ref:p,preventOverflow:!0})};var V=a(46087),W=a(62582);const z=(0,A.Ay)((()=>a.e(930).then(a.bind(a,80930)))),B=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),J=(0,A.Ay)((()=>a.e(168).then(a.bind(a,46168)))),K=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:y}=e,A=j()();const U=(0,r.zy)().search.split("=")[1];(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[E,D]=(0,s.useState)(void 0),[k,P]=(0,s.useState)(void 0),[L,K]=(0,s.useState)("month-on-month"),[q,Z]=(0,s.useState)("daily"),[X,Q]=(0,s.useState)(void 0),[$,ee]=(0,s.useState)([]),[te,ae]=(0,s.useState)([A.clone().subtract(1,"months").startOf("month").toDate(),A.clone().subtract(1,"months").toDate()]),[se,re]=(0,s.useState)(!0),[oe,ne]=(0,s.useState)([A.clone().startOf("month").toDate(),A.toDate()]),ie={sunday:y("sunday"),monday:y("monday"),tuesday:y("tuesday"),wednesday:y("wednesday"),thursday:y("thursday"),friday:y("friday"),saturday:y("saturday"),ok:y("ok"),today:y("today"),yesterday:y("yesterday"),hours:y("hours"),minutes:y("minutes"),seconds:y("seconds"),last7Days:y("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},le={display:"block",zIndex:10},{language:de}=(0,s.useContext)(C.Ay),[ce,ue]=(0,s.useState)(!0),[me,pe]=(0,s.useState)(!0),[he,ge]=(0,s.useState)(!0),[xe,fe]=(0,s.useState)([]),[_e,be]=(0,s.useState)([]),[ye,je]=(0,s.useState)([]),[Ae,ve]=(0,s.useState)([]),[Te,Se]=(0,s.useState)({}),[Ue,Ee]=(0,s.useState)({}),[De,Ce]=(0,s.useState)([]),[ke,Me]=(0,s.useState)({a0:""}),[Ne,Ye]=(0,s.useState)({a0:"()"}),[Pe,Re]=(0,s.useState)({a0:[]}),[He,we]=(0,s.useState)({a0:[]}),[Ie,Fe]=(0,s.useState)({a0:(0).toFixed(2)}),[Oe,Le]=(0,s.useState)({a0:[]}),[Ge,Ve]=(0,s.useState)({a0:[]}),[We,ze]=(0,s.useState)({a0:(0).toFixed(2)}),[Be,Je]=(0,s.useState)({a0:[]}),[Ke,qe]=(0,s.useState)([]),[Ze,Xe]=(0,s.useState)([]),[Qe,$e]=(0,s.useState)({}),[et,tt]=(0,s.useState)([]),[at,st]=(0,s.useState)([]),[rt,ot]=(0,s.useState)([{dataField:"startdatetime",text:y("Datetime"),sort:!0}]),[nt,it]=(0,s.useState)([]),[lt,dt]=(0,s.useState)([{dataField:"name",text:y("Child Spaces"),sort:!0}]),[ct,ut]=(0,s.useState)(void 0),[mt,pt]=(0,s.useState)([]),[ht,gt]=(0,s.useState)([{dataField:"name",text:y("Energy Category"),sort:!0}]);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,ue(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Q(t),D([t[0]].map((e=>e.label))),P([t[0]].map((e=>e.value))),ft(t)):R.oR.error(y(t.description))})).catch((e=>{console.log(e)}))}),[y]);const xt=(e,t,a,s)=>{let r=a,o=s+"";for(let n of e){if(n.value==t){D(0==r.length?n.label:r+"/"+n.label);let e=[];return o.split("-").forEach((t=>e.push(+t))),e.push(n.value),ee(e),!0}let e=!1;if(n.children&&n.children.length>0&&(e=xt(n.children,t,0==r.length?n.label:r+"/"+n.label,0==o.length?n.value:o+"-"+n.value),e))return!0}return!1},ft=e=>{if(null!==U&&U){let t=w.hR+"/reports/spaceenergycategory?spaceuuid="+U+"&periodtype="+q+"&baseperiodstartdatetime="+(null!=te[0]?j()(te[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=te[1]?j()(te[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(oe[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(oe[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+de;_t(t,e)}},_t=(e,t)=>{ue(!0),pe(!1),ge(!0),st([]),it([]);let a=!1;fetch(e,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(a=!0),e.json()))).then((e=>{if(a){if(console.log(e),t&&t.length>0){let a=e.space.id;xt(t,a,"",""),P(a)}let a=[];e.reporting_period.names.forEach(((t,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.subtotal=e.reporting_period.subtotals[s],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[s]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[s],a.push(r)})),ve(a);let s=[];e.reporting_period.energy_category_ids.forEach(((t,a)=>{if(1===t){let t={id:1};t.name=y("Top-Peak"),t.value=e.reporting_period.toppeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=2,t.name=y("On-Peak"),t.value=e.reporting_period.onpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=3,t.name=y("Mid-Peak"),t.value=e.reporting_period.midpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=4,t.name=y("Off-Peak"),t.value=e.reporting_period.offpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t)}})),fe(s);let r={};r.value=e.reporting_period.total_in_kgce/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area/1e3,Se(r);let o={};o.value=e.reporting_period.total_in_kgco2e/1e3,o.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e).toFixed(2)+"%",o.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area/1e3,Ee(o);let n=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.id=a,s.name=t,s.value=e.reporting_period.subtotals_in_kgce[a]/1e3,s.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(s)})),be(n);let i=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.id=a,s.name=t,s.value=e.reporting_period.subtotals_in_kgco2e[a]/1e3,s.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(s)})),je(i);let l=[];e.child_space.energy_category_names.forEach(((t,a)=>{if(e.child_space.child_space_names_array[a].length>0){let t={data:[]};e.child_space.child_space_names_array[a].forEach(((s,r)=>{let o={};o.id=r,o.name=s,o.value=e.child_space.subtotals_array[a][r],o.color="#"+((1<<24)*Math.random()|0).toString(16),t.data.push(o)})),t.name=e.child_space.energy_category_names[a],t.unit=e.child_space.units[a],l.push(t)}})),Ce(l);let d={};e.base_period.timestamps.forEach(((e,t)=>{d["a"+t]=e})),Re(d);let c={};e.base_period.values.forEach(((e,t)=>{c["a"+t]=e})),we(c);let u={};e.reporting_period.names.forEach(((e,t)=>{u["a"+t]=e})),Me(u);let m={};e.reporting_period.units.forEach(((e,t)=>{m["a"+t]="("+e+")"})),Ye(m);let p={};e.base_period.subtotals.forEach(((e,t)=>{p["a"+t]=e.toFixed(2)})),Fe(p);let h={};e.reporting_period.timestamps.forEach(((e,t)=>{h["a"+t]=e})),Le(h);let g={};e.reporting_period.values.forEach(((e,t)=>{g["a"+t]=e})),Ve(g);let x={};e.reporting_period.subtotals.forEach(((e,t)=>{x["a"+t]=e.toFixed(2)})),ze(x);let f={};e.reporting_period.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),f["a"+t]=a})),Je(f);let _=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];_.push({value:"a"+a,label:t+" ("+s+")"})})),qe(_);let b={};e.parameters.timestamps.forEach(((e,t)=>{b["a"+t]=e})),Xe(b);let j={};e.parameters.values.forEach(((e,t)=>{j["a"+t]=e})),$e(j);let A=Array();if(e.parameters.names.forEach(((e,t)=>{A.push({value:"a"+t,label:e})})),tt(A),yt(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:y("Base Period")+" - "+y("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let r=e.base_period.units[s];t.push({dataField:"a"+s,text:y("Base Period")+" - "+a+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodDatetime",text:y("Reporting Period")+" - "+y("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let r=e.reporting_period.units[s];t.push({dataField:"b"+s,text:y("Reporting Period")+" - "+a+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),ot(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,e.base_period.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values[s].length?e.base_period.values[s][r]:null})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,e.reporting_period.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values[s].length?e.reporting_period.values[s][r]:null})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=y("Subtotal"),e.base_period.subtotals.forEach(((e,t)=>{s["a"+t]=e})),s.reportingPeriodDatetime=y("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{s["b"+t]=e})),a.push(s),setTimeout((()=>{st(a)}),0)}let s=[];s.push({dataField:"name",text:y("Energy Category"),sort:!0}),s.push({dataField:"a0",text:y("Base Period")+" - "+y("Working Days"),sort:!1,formatter:function(e){return"number"===typeof e?0===e?"-":e.toFixed(2):e}}),s.push({dataField:"a1",text:y("Base Period")+" - "+y("Non Working Days"),sort:!1,formatter:function(e){return"number"===typeof e?0===e?"-":e.toFixed(2):e}}),s.push({dataField:"b0",text:y("Reporting Period")+" - "+y("Working Days"),sort:!1,formatter:function(e){return"number"===typeof e?0===e?"-":e.toFixed(2):e}}),s.push({dataField:"b1",text:y("Reporting Period")+" - "+y("Non Working Days"),sort:!1,formatter:function(e){return"number"===typeof e?0===e?"-":e.toFixed(2):e}}),gt(s);let r=[];e.base_period.names.forEach(((t,a)=>{let s={},o=e.base_period.units[a];s.name=t+" ("+o+")",s.a0=e.space.working_calendars.length>0?e.base_period.working_days_subtotals[a]:"-",s.a1=e.space.working_calendars.length>0?e.base_period.non_working_days_subtotals[a]:"-",s.b0=e.space.working_calendars.length>0?e.reporting_period.working_days_subtotals[a]:"-",s.b1=e.space.working_calendars.length>0?e.reporting_period.non_working_days_subtotals[a]:"-",r.push(s)})),pt(r)}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a,e.reporting_period.values.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values[a][s]})),t.push(r)}));let a={};a.id=t.length,a.startdatetime=y("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{a["a"+t]=e})),t.push(a),setTimeout((()=>{st(t)}),0);let s=[];s.push({dataField:"startdatetime",text:y("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let r=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),ot(s);let r=[];r.push({dataField:"name",text:y("Energy Category"),sort:!0}),r.push({dataField:"b0",text:y("Reporting Period")+" - "+y("Working Days"),sort:!1,formatter:function(e){return"number"===typeof e?0===e?"-":e.toFixed(2):e}}),r.push({dataField:"b1",text:y("Reporting Period")+" - "+y("Non Working Days"),sort:!1,formatter:function(e){return"number"===typeof e?0===e?"-":e.toFixed(2):e}}),gt(r);let o=[];e.reporting_period.names.forEach(((t,a)=>{let s={},r=e.reporting_period.units[a];s.name=t+" ("+r+")",s.b0=e.space.working_calendars.length>0?e.reporting_period.working_days_subtotals[a]:"-",s.b1=e.space.working_calendars.length>0?e.reporting_period.non_working_days_subtotals[a]:"-",o.push(s)})),pt(o)}let v=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s={};s.id=a,s.name=t,e.child_space.energy_category_names.forEach(((t,r)=>{s["a"+2*r]=e.child_space.subtotals_array[r][a];let o=e.child_space.subtotals_array[r].reduce(((e,t)=>e+t));s["a"+(2*r+1)]=o>0?e.child_space.subtotals_array[r][a]/o*100:0})),console.log(s),v.push(s)})),it(v);let T=[];T.push({dataField:"name",text:y("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach(((t,a)=>{let s=e.child_space.units[a];T.push({dataField:"a"+2*a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),T.push({dataField:"a"+(2*a+1),text:y("Percentage"),sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2)+"%":null}})})),dt(T),ut(e.excel_bytes_base64),ue(!1),pe(!0),ge(!1)}else R.oR.error(y(e.description))})).catch((e=>{console.log(e)}))},bt="ls text-uppercase text-600 font-weight-semi-bold mb-0";const yt=e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1};return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:y("Space Data")}),(0,M.jsx)(n.A,{active:!0,onClick:()=>window.location.reload(),children:(0,M.jsx)(W.N_,{to:"/space/energycategory",children:y("Energy Category Data")})})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(k),console.log(L),console.log(q),console.log(null!=te[0]?j()(te[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=te[1]?j()(te[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(oe[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(oe[1]).format("YYYY-MM-DDTHH:mm:ss"));let t=w.hR+"/reports/spaceenergycategory?spaceid="+k+"&periodtype="+q+"&baseperiodstartdatetime="+(null!=te[0]?j()(te[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=te[1]?j()(te[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(oe[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(oe[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+de;_t(t)},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:bt,for:"space",children:y("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:X,value:$,onChange:(e,t)=>{console.log(e,t),D(t.map((e=>e.label)).join("/")),P(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:E||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:bt,for:"comparisonType",children:y("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),K(t.value),"year-over-year"===t.value?(re(!0),ae([j()(oe[0]).subtract(1,"years").toDate(),j()(oe[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(re(!0),ae([j()(oe[0]).subtract(1,"months").toDate(),j()(oe[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(re(!1),ae([j()(oe[0]).subtract(1,"days").toDate(),j()(oe[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(ae([null,null]),re(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:y(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:bt,for:"periodType",children:y("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return Z(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:y(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:bt,for:"basePeriodDateRangePicker",children:[y("Base Period"),y("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:se,format:"yyyy-MM-dd HH:mm:ss",value:te,onChange:e=>{null==e?ae([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),ae([e[0],e[1]]))},size:"md",style:le,onClean:e=>{ae([null,null])},locale:ie,placeholder:y("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:bt,for:"reportingPeriodDateRangePicker",children:y("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:oe,onChange:e=>{null==e?ne([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),ne([e[0],e[1]]),"year-over-year"===L?ae([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===L&&ae([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:le,onClean:e=>{ne([null,null])},locale:ie,placeholder:y("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ce,children:y("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:me})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:he,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ct).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceenergycategory.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:y("Export")})]})]})})})}),(0,M.jsxs)("div",{className:"card-deck",children:[Ae.map((e=>(0,M.jsx)(T.A,{rate:e.increment_rate,title:y("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:y("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name))),(0,M.jsx)(T.A,{rate:Te.increment_rate||"",title:y("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:y("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:y("Per Unit Area"),footvalue:Te.value_per_unit_area,footunit:"(TCE/M\xb2)",children:Te.value&&(0,M.jsx)(b.Ay,{end:Te.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})}),(0,M.jsx)(T.A,{rate:Ue.increment_rate||"",title:y("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:y("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:y("Per Unit Area"),footvalue:Ue.value_per_unit_area,footunit:"(TCO2E/M\xb2)",children:Ue.value&&(0,M.jsx)(b.Ay,{end:Ue.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})})]}),(0,M.jsxs)(c.A,{noGutters:!0,children:[(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:xe,title:y("Electricity Consumption by Time-Of-Use")})}),(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:_e,title:y("Ton of Standard Coal by Energy Category")})}),(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:ye,title:y("Ton of Carbon Dioxide Emissions by Energy Category")})}),De.map((e=>(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:e.data,title:y("Child Space Proportion CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"})})},(0,I.A)())))]}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:ke,VALUE:We,UNIT:Ne},baseTitle:{name:"Base Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:ke,VALUE:Ie,UNIT:Ne},reportingTooltipTitle:{name:"Reporting Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:ke,VALUE:null,UNIT:Ne},baseTooltipTitle:{name:"Base Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:ke,VALUE:null,UNIT:Ne},reportingLabels:Oe,reportingData:Ge,baseLabels:Pe,baseData:He,rates:Be,options:Ke}),(0,M.jsx)(J,{data:mt,columns:ht}),(0,M.jsx)("br",{}),(0,M.jsx)(B,{data:at,title:y("Detailed Data"),columns:rt,pagesize:50}),(0,M.jsx)("br",{}),(0,M.jsx)(z,{data:nt,title:y("Child Spaces Data"),columns:lt})]})})));var q=a(19786),Z=a(95323),X=a(68384),Q=a(7770),$=a(12436),ee=a(54136),te=a(45231),ae=a(85556),se=a(37394);X.use([Q.a,$.a,ee.a,te.a,ae.a,se.a]);const re=e=>{let{reportingTitle:t,baseTitle:a,labels:r,data:o,options:n}=e;const d=["#2c7be5","#00d27a","#27bcfd","#f5803e","#e63757"],[m,p]=(0,s.useState)(["a0"]),[h,g]=(0,s.useState)(["a0"]),{isDark:x}=(0,s.useContext)(C.Ay),[f,_]=(0,s.useState)([{name:n.label,borderWidth:2,data:o.a0,type:"line",markPoint:{label:{color:(0,S.IO)(x?"#fff":"#000",.8)},itemStyle:{color:d[0]},data:[{type:"max",name:"Max Value"},{type:"min",name:"Min Value"}]},markLine:{lineStyle:{color:d[0]},data:[{type:"average",name:"Average Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)}}}]),[b,y]=(0,s.useState)(j()()),[A,v]=(0,s.useState)([]);(0,s.useEffect)((()=>{let e=[...f],t=m[0];n[t.slice(1)]&&o[t]&&e.length>0&&void 0===e[0].label&&(e=[],e[0]={data:o[t],type:"line",smooth:!0,name:n[t.slice(1)]?n[t.slice(1)].label:"",lineStyle:{color:d[0]},itemStyle:{color:d[0]},markPoint:{data:[{type:"max",name:"Max Value"},{type:"min",name:"Min Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)},itemStyle:{color:d[0]}},markLine:{lineStyle:{color:d[0]},data:[{type:"average",name:"Average Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)}}}),_(e),v(r[m[0]]),p(["a0"]),g(["a0"])}),[o,r,n]),(0,s.useEffect)((()=>{let e=[...f];if(h.length<m.length){let t=m[m.length-1];e.push({data:o[t],type:"line",smooth:!0,name:n[t.slice(1)].label,itemStyle:{color:d[t.slice(1)%5]},lineStyle:{color:d[t.slice(1)%5]},markPoint:{data:[{type:"max",name:"Max Value"},{type:"min",name:"Min Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)},itemStyle:{color:d[t.slice(1)%5]}},markLine:{lineStyle:{color:d[t.slice(1)%5]},label:{color:(0,S.IO)(x?"#fff":"#000",.8)},data:[{type:"average",name:"Average Value"}]}})}else{let t=0;for(;t<=h.length&&(t!==m.length&&h[t]===m[t]);t++);e.splice(t,1)}_(e),v(r[m[0]])}),[b]);return(0,M.jsx)(i.A,{className:"mb-3",children:(0,M.jsxs)(l.A,{className:"rounded-soft",children:[(0,M.jsxs)(c.A,{className:"text-white align-items-center no-gutters",children:[(0,M.jsxs)(u.A,{children:[(0,M.jsx)("h5",{className:"text-lightSlateGray mb-0",children:t}),(0,M.jsx)("p",{className:"fs--1 font-weight-semi-bold",children:a})]}),n[0]&&(0,S.i)(n)&&(0,M.jsx)(u.A,{xs:"auto",className:"d-none d-sm-block",children:(0,M.jsx)(q.A,{data:n,value:m,appearance:"default",placeholder:"select",searchable:!1,countable:!1,onSelect:e=>{if(e.length<1)return;let t=j()();g(m),p(e),y(t)},style:{width:224,borderRadius:".25rem"}})})]}),(0,M.jsx)(Z.A,{echarts:X,notMerge:!0,option:{tooltip:{trigger:"axis",backgroundColor:(0,S.v3)(x)[100],borderColor:(0,S.v3)(x)[300],color:x?S.kY.light:S.kY.dark},grid:{left:"5%",right:"5%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:A||["0"],axisLabel:{interval:"auto",color:(0,S.IO)(x?"#fff":"#000",.8),rotate:30},axisLine:{lineStyle:{color:(0,S.IO)(x?"#fff":"#000",.8)}}},yAxis:{type:"value",splitLine:{show:!1},axisLabel:{color:(0,S.IO)(x?"#fff":"#000",.8)},axisLine:{lineStyle:{color:(0,S.IO)(x?"#fff":"#000",.8)}}},series:f,toolbox:{right:10,feature:{},show:!1},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0]},{type:"slider",show:!0,yAxisIndex:[0],left:"2%"},{type:"inside",xAxisIndex:[0]},{type:"inside",yAxisIndex:[0]}]},style:{width:"100%",height:318}})]})})};X.use([Q.a,$.a,ee.a,te.a,ae.a,se.a]);const oe=e=>{let{reportingTitle:t,baseTitle:a,labels:r,data:o,options:n}=e;const d=["#2c7be5","#00d27a","#27bcfd","#f5803e","#e63757"],[m,p]=(0,s.useState)(["a0"]),[h,g]=(0,s.useState)(["a0"]),{isDark:x}=(0,s.useContext)(C.Ay),[f,_]=(0,s.useState)([{name:n.label,borderWidth:2,data:o.a0,type:"line",markPoint:{label:{color:(0,S.IO)(x?"#fff":"#000",.8)},itemStyle:{color:d[0]},data:[{type:"max",name:"Max Value"},{type:"min",name:"Min Value"}]},markLine:{lineStyle:{color:d[0]},data:[{type:"average",name:"Average Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)}}}]),[b,y]=(0,s.useState)(j()()),[A,v]=(0,s.useState)([]);(0,s.useEffect)((()=>{let e=[...f],t=m[0];n[t.slice(1)]&&o[t]&&e.length>0&&void 0===e[0].label&&(e=[],e[0]={data:o[t],type:"line",smooth:!0,name:n[t.slice(1)]?n[t.slice(1)].label:"",lineStyle:{color:d[0]},itemStyle:{color:d[0]},markPoint:{data:[{type:"max",name:"Max Value"},{type:"min",name:"Min Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)},itemStyle:{color:d[0]}},markLine:{lineStyle:{color:d[0]},data:[{type:"average",name:"Average Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)}}}),_(e),v(r[m[0]]),p(["a0"]),g(["a0"])}),[o,r,n]),(0,s.useEffect)((()=>{let e=[...f];if(h.length<m.length){let t=m[m.length-1];e.push({data:o[t],type:"line",smooth:!0,name:n[t.slice(1)].label,itemStyle:{color:d[t.slice(1)%5]},lineStyle:{color:d[t.slice(1)%5]},markPoint:{data:[{type:"max",name:"Max Value"},{type:"min",name:"Min Value"}],label:{color:(0,S.IO)(x?"#fff":"#000",.8)},itemStyle:{color:d[t.slice(1)%5]}},markLine:{lineStyle:{color:d[t.slice(1)%5]},label:{color:(0,S.IO)(x?"#fff":"#000",.8)},data:[{type:"average",name:"Average Value"}]}})}else{let t=0;for(;t<=h.length&&(t!==m.length&&h[t]===m[t]);t++);e.splice(t,1)}_(e),v(r[m[0]])}),[b]);return(0,M.jsx)(i.A,{className:"mb-3",children:(0,M.jsxs)(l.A,{className:"rounded-soft",children:[(0,M.jsxs)(c.A,{className:"text-white align-items-center no-gutters",children:[(0,M.jsxs)(u.A,{children:[(0,M.jsx)("h5",{className:"text-lightSlateGray mb-0",children:t}),(0,M.jsx)("p",{className:"fs--1 font-weight-semi-bold",children:a})]}),n[0]&&(0,S.i)(n)&&(0,M.jsx)(u.A,{xs:"auto",className:"d-none d-sm-block",children:(0,M.jsx)(q.A,{data:n,value:m,appearance:"default",placeholder:"select",searchable:!1,countable:!1,onSelect:e=>{if(e.length<1)return;let t=j()();g(m),p(e),y(t)},style:{width:224,borderRadius:".25rem"}})})]}),(0,M.jsx)(Z.A,{echarts:X,notMerge:!0,option:{tooltip:{trigger:"axis",backgroundColor:(0,S.v3)(x)[100],borderColor:(0,S.v3)(x)[300],color:x?S.kY.light:S.kY.dark},grid:{left:"5%",right:"5%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:["2024/03/11","2024/03/12","2024/03/13","2024/03/14","2024/03/15","2024/03/16","2024/03/17"],axisLabel:{interval:"auto",color:(0,S.IO)(x?"#fff":"#000",.8),rotate:30},axisLine:{lineStyle:{color:(0,S.IO)(x?"#fff":"#000",.8)}}},yAxis:{type:"value",splitLine:{show:!1},axisLabel:{color:(0,S.IO)(x?"#fff":"#000",.8)},axisLine:{lineStyle:{color:(0,S.IO)(x?"#fff":"#000",.8)}}},series:f,toolbox:{right:10,feature:{},show:!1},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0]},{type:"slider",show:!0,yAxisIndex:[0],left:"2%"},{type:"inside",xAxisIndex:[0]},{type:"inside",yAxisIndex:[0]}]},style:{width:"100%",height:318}})]})})};var ne=a(11085);const ie=(0,A.Ay)((()=>a.e(930).then(a.bind(a,80930)))),le=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),de=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,b=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[y,A]=(0,s.useState)(void 0),[T,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)("month-on-month"),[k,Y]=(0,s.useState)("daily"),[P,I]=(0,s.useState)(void 0),[L,W]=(0,s.useState)([b.clone().subtract(1,"months").startOf("month").toDate(),b.clone().subtract(1,"months").toDate()]),[z,B]=(0,s.useState)(!0),[J,K]=(0,s.useState)([b.clone().startOf("month").toDate(),b.toDate()]),q={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},Z={display:"block",zIndex:10},{language:X}=(0,s.useContext)(C.Ay),[Q,$]=(0,s.useState)(!0),[ee,te]=(0,s.useState)(!0),[ae,se]=(0,s.useState)(!0),[re,de]=(0,s.useState)([]),[ce,ue]=(0,s.useState)([]),[me,pe]=(0,s.useState)({a0:"",a1:"",a2:""}),[he,ge]=(0,s.useState)({a0:"()",a1:"()",a2:"()"}),[xe,fe]=(0,s.useState)({a0:[],a1:[],a2:[]}),[_e,be]=(0,s.useState)({a0:[],a1:[],a2:[]}),[ye,je]=(0,s.useState)({a0:(0).toFixed(2),a1:(0).toFixed(2),a2:(0).toFixed(2)}),[Ae,ve]=(0,s.useState)({a0:[],a1:[],a2:[]}),[Te,Se]=(0,s.useState)({a0:[],a1:[],a2:[]}),[Ue,Ee]=(0,s.useState)({a0:(0).toFixed(2),a0:1..toFixed(2),a0:2..toFixed(2)}),[De,Ce]=(0,s.useState)({a0:[],a1:[],a2:[]}),[ke,Me]=(0,s.useState)([]),[Ne,Ye]=(0,s.useState)([]),[Pe,Re]=(0,s.useState)({}),[He,we]=(0,s.useState)([]),[Ie,Fe]=(0,s.useState)([]),[Oe,Le]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[Ge,Ve]=(0,s.useState)([]),[We,ze]=(0,s.useState)([{dataField:"name",text:r("Child Spaces"),sort:!0}]),[Be,Je]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,$(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),I(t),A([t[0]].map((e=>e.label))),U([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const Ke="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Energy Item Data")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(T),console.log(E),console.log(k),console.log(null!=L[0]?j()(L[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=L[1]?j()(L[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(J[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(J[1]).format("YYYY-MM-DDTHH:mm:ss")),$(!0),te(!1),se(!0),Fe([]),Ve([]);let t=!1;fetch(w.hR+"/reports/spaceenergyitem?spaceid="+T+"&periodtype="+k+"&baseperiodstartdatetime="+(null!=L[0]?j()(L[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=L[1]?j()(L[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(J[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(J[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+X,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.energy_category_name=e.reporting_period.energy_category_names[s],r.unit=e.reporting_period.units[s],r.subtotal=e.reporting_period.subtotals[s],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[s]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[s],t.push(r)})),de(t);let a={},s={};e.reporting_period.names.forEach(((t,r)=>{let o={};o.id=r,o.name=e.reporting_period.names[r],o.value=e.reporting_period.subtotals[r],o.color="#"+((1<<24)*Math.random()|0).toString(16);let n=e.reporting_period.energy_category_ids[r];n in a||(a[n]=[]),a[n].push(o),n in s||(s[n]={name:e.reporting_period.energy_category_names[r],unit:e.reporting_period.units[r]})}));let o=[];for(let e in a){let t={};t.data=a[e],t.energy_category_name=s[e].name,t.unit=s[e].unit,o.push(t)}ue(o);let n={};e.base_period.timestamps.forEach(((e,t)=>{n["a"+t]=e})),fe(n);let i={};e.base_period.values.forEach(((e,t)=>{i["a"+t]=e})),be(i);let l={};e.reporting_period.names.forEach(((e,t)=>{l["a"+t]=e})),pe(l);let d={};e.reporting_period.units.forEach(((e,t)=>{d["a"+t]="("+e+")"})),ge(d);let c={};e.base_period.subtotals.forEach(((e,t)=>{c["a"+t]=e.toFixed(2)})),je(c);let u={};e.reporting_period.timestamps.forEach(((e,t)=>{u["a"+t]=e})),ve(u);let m={};e.reporting_period.values.forEach(((e,t)=>{m["a"+t]=e})),Se(m);let p={};e.reporting_period.subtotals.forEach(((e,t)=>{p["a"+t]=e.toFixed(2)})),Ee(p);let h={};e.reporting_period.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),h["a"+t]=a})),Ce(h);let g=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];g.push({value:"a"+a,label:t+" ("+s+")"})})),Me(g);let x={};e.parameters.timestamps.forEach(((e,t)=>{x["a"+t]=e})),Ye(x);let f={};e.parameters.values.forEach(((e,t)=>{f["a"+t]=e})),Re(f);let _=Array();if(e.parameters.names.forEach(((e,t)=>{_.push({value:"a"+t,label:e})})),we(_),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Le(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,e.base_period.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values[s].length?e.base_period.values[s][r]:null})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,e.reporting_period.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values[s].length?e.reporting_period.values[s][r]:null})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal"),e.base_period.subtotals.forEach(((e,t)=>{s["a"+t]=e})),s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{s["b"+t]=e})),a.push(s),setTimeout((()=>{Fe(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a,e.reporting_period.values.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values[a][s]})),t.push(r)}));let a={};a.id=t.length,a.startdatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{a["a"+t]=e})),t.push(a),setTimeout((()=>{Fe(t)}),0);let s=[];s.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let r=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Le(s)}let b=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s={};s.id=a,s.name=t,e.child_space.energy_item_names.forEach(((t,r)=>{s["a"+r]=e.child_space.subtotals_array[r][a]})),b.push(s)})),Ve(b);let y=[];y.push({dataField:"name",text:r("Child Spaces"),sort:!0}),e.child_space.energy_item_names.forEach(((t,a)=>{let s=e.child_space.units[a];y.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),ze(y),Je(e.excel_bytes_base64),$(!1),te(!0),se(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ke,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:P,onChange:(e,t)=>{console.log(e,t),A(t.map((e=>e.label)).join("/")),U(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:y||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ke,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),D(t.value),"year-over-year"===t.value?(B(!0),W([j()(J[0]).subtract(1,"years").toDate(),j()(J[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(B(!0),W([j()(J[0]).subtract(1,"months").toDate(),j()(J[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(B(!1),W([j()(J[0]).subtract(1,"days").toDate(),j()(J[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(W([null,null]),B(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ke,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return Y(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:Ke,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:z,format:"yyyy-MM-dd HH:mm:ss",value:L,onChange:e=>{null==e?W([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),W([e[0],e[1]]))},size:"md",style:Z,onClean:e=>{W([null,null])},locale:q,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ke,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:J,onChange:e=>{null==e?K([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),K([e[0],e[1]]),"year-over-year"===E?W([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===E&&W([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:Z,onClean:e=>{K([null,null])},locale:q,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:Q,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:ee})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ae,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Be).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceenergyitem.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsx)(oe,{reportingTitle:r("\u6e2c\u8a66\u6298\u7dda\u5716\u5427"),baseTitle:"",labels:[],data:{a0:[1,20,30],a1:[2,25,35],a2:[3,145,88,210,179]},options:[{value:"a0",label:"Label1"},{value:"a1",label:"Label2"},{value:"a2",label:"Label3"}]}),(0,M.jsx)(ne.A,{}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:Ue,UNIT:he},baseTitle:{name:"Base Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:ye,UNIT:he},reportingTooltipTitle:{name:"Reporting Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:null,UNIT:he},baseTooltipTitle:{name:"Base Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:null,UNIT:he},reportingLabels:Ae,reportingData:Te,baseLabels:xe,baseData:_e,rates:De,options:ke}),(0,M.jsx)(le,{data:Ie,title:r("Detailed Data"),columns:Oe,pagesize:50}),(0,M.jsx)("br",{}),(0,M.jsx)(ie,{data:Ge,title:r("Child Spaces Data"),columns:We})]})}))),ce=(0,A.Ay)((()=>a.e(930).then(a.bind(a,80930)))),ue=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),me=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,P]=(0,s.useState)("month-on-month"),[L,W]=(0,s.useState)("daily"),[z,B]=(0,s.useState)(void 0),[J,K]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[q,Z]=(0,s.useState)(!0),[X,Q]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),$={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},ee={display:"block",zIndex:10},{language:te}=(0,s.useContext)(C.Ay),[ae,se]=(0,s.useState)(!0),[oe,ne]=(0,s.useState)(!0),[ie,le]=(0,s.useState)(!0),[de,me]=(0,s.useState)([]),[pe,he]=(0,s.useState)([]),[ge,xe]=(0,s.useState)([]),[fe,_e]=(0,s.useState)({a0:""}),[be,ye]=(0,s.useState)({a0:"()"}),[je,Ae]=(0,s.useState)({a0:[]}),[ve,Te]=(0,s.useState)({a0:[]}),[Se,Ue]=(0,s.useState)({a0:(0).toFixed(2)}),[Ee,De]=(0,s.useState)({a0:[]}),[Ce,ke]=(0,s.useState)({a0:[]}),[Me,Ne]=(0,s.useState)({a0:(0).toFixed(2)}),[Ye,Pe]=(0,s.useState)({a0:[]}),[Re,He]=(0,s.useState)([]),[we,Ie]=(0,s.useState)([]),[Fe,Oe]=(0,s.useState)([]),[Le,Ge]=(0,s.useState)([]),[Ve,We]=(0,s.useState)({}),[ze,Be]=(0,s.useState)([]),[Je,Ke]=(0,s.useState)([]),[qe,Ze]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[Xe,Qe]=(0,s.useState)([]),[$e,et]=(0,s.useState)([{dataField:"name",text:r("Child Spaces"),sort:!0}]),[tt,at]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,se(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),B(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const st="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Carbon")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(L),console.log(null!=J[0]?j()(J[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=J[1]?j()(J[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(X[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(X[1]).format("YYYY-MM-DDTHH:mm:ss")),se(!0),ne(!1),le(!0),Ke([]),Qe([]);let t=!1;fetch(w.hR+"/reports/spacecarbon?spaceid="+E+"&periodtype="+L+"&baseperiodstartdatetime="+(null!=J[0]?j()(J[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=J[1]?j()(J[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(X[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(X[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+te,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.subtotal=e.reporting_period.subtotals[s],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[s]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[s],t.push(r)}));let a={};a.name=r("Total"),a.unit=e.reporting_period.total_unit,a.subtotal=e.reporting_period.total,a.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",a.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,t.push(a),xe(t);let s=[];e.reporting_period.energy_category_ids.forEach(((t,a)=>{if(1===t){let t={id:1};t.name=r("Top-Peak"),t.value=e.reporting_period.toppeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=2,t.name=r("On-Peak"),t.value=e.reporting_period.onpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=3,t.name=r("Mid-Peak"),t.value=e.reporting_period.midpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=4,t.name=r("Off-Peak"),t.value=e.reporting_period.offpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t)}})),me(s);let o=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.id=a,s.name=t,s.value=e.reporting_period.subtotals[a],s.color="#"+((1<<24)*Math.random()|0).toString(16),o.push(s)})),he(o);let n=[];e.child_space.energy_category_names.forEach(((t,a)=>{if(e.child_space.child_space_names_array[a].length>0){let t={data:[]};e.child_space.child_space_names_array[a].forEach(((s,r)=>{let o={};o.id=r,o.name=s,o.value=e.child_space.subtotals_array[a][r],o.color="#"+((1<<24)*Math.random()|0).toString(16),t.data.push(o)})),t.name=e.child_space.energy_category_names[a],t.unit=e.child_space.units[a],n.push(t)}})),Ie(n);let i=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s=0;e.child_space.energy_category_names.forEach(((t,r)=>{s+=e.child_space.subtotals_array[r][a]}));let r={};r.id=a,r.name=t,r.value=s,r.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(r)})),Oe(i);let l={};e.base_period.timestamps.forEach(((e,t)=>{l["a"+t]=e})),Ae(l);let d={};e.base_period.values.forEach(((e,t)=>{d["a"+t]=e})),Te(d);let c={};e.reporting_period.names.forEach(((e,t)=>{c["a"+t]=e})),_e(c);let u={};e.reporting_period.units.forEach(((e,t)=>{u["a"+t]="("+e+")"})),ye(u);let m={};e.base_period.subtotals.forEach(((e,t)=>{m["a"+t]=e.toFixed(2)})),Ue(m);let p={};e.reporting_period.timestamps.forEach(((e,t)=>{p["a"+t]=e})),De(p);let h={};e.reporting_period.values.forEach(((e,t)=>{h["a"+t]=e})),ke(h);let g={};e.reporting_period.subtotals.forEach(((e,t)=>{g["a"+t]=e.toFixed(2)})),Ne(g);let x={};e.reporting_period.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),x["a"+t]=a})),Pe(x);let f=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];f.push({value:"a"+a,label:t+" ("+s+")"})})),He(f);let _={};e.parameters.timestamps.forEach(((e,t)=>{_["a"+t]=e})),Ge(_);let b={};e.parameters.values.forEach(((e,t)=>{b["a"+t]=e})),We(b);let y=Array();if(e.parameters.names.forEach(((e,t)=>{y.push({value:"a"+t,label:e})})),Be(y),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"basePeriodTotal",text:r("Base Period")+" - "+r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodTotal",text:r("Reporting Period")+" - "+r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),Ze(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,t.basePeriodTotal=0,null==t.basePeriodDatetime&&(t.basePeriodTotal=null),e.base_period.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values[s].length?e.base_period.values[s][r]:null,null!=t["a"+s]&&(t.basePeriodTotal+=t["a"+s])})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,t.reportingPeriodTotal=0,null==t.reportingPeriodDatetime&&(t.reportingPeriodTotal=null),e.reporting_period.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values[s].length?e.reporting_period.values[s][r]:null,null!=t["b"+s]&&(t.reportingPeriodTotal+=t["b"+s])})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal");let o=0;e.base_period.subtotals.forEach(((e,t)=>{s["a"+t]=e,o+=s["a"+t]})),s.basePeriodTotal=o;let n=0;s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{s["b"+t]=e,n+=s["b"+t]})),s.reportingPeriodTotal=n,a.push(s),setTimeout((()=>{Ke(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a;let o=0;e.reporting_period.values.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values[a][s],o+=e.reporting_period.values[a][s]})),r.total=o,t.push(r)}));let a={};a.id=t.length,a.startdatetime=r("Subtotal");let s=0;e.reporting_period.subtotals.forEach(((e,t)=>{a["a"+t]=e,s+=e})),a.total=s,t.push(a),setTimeout((()=>{Ke(t)}),0);let o=[];o.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];o.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),o.push({dataField:"total",text:r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),Ze(o)}let j=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s={};s.id=a,s.name=t;let r=0;e.child_space.energy_category_names.forEach(((t,o)=>{s["a"+o]=e.child_space.subtotals_array[o][a],r+=e.child_space.subtotals_array[o][a]})),s.total=r,j.push(s)})),Qe(j);let A=[];A.push({dataField:"name",text:r("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach(((t,a)=>{let s=e.child_space.units[a];A.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),A.push({dataField:"total",text:r("Total")+" ("+e.child_space.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),et(A),at(e.excel_bytes_base64),se(!1),ne(!0),le(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:st,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:z,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:st,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),P(t.value),"year-over-year"===t.value?(Z(!0),K([j()(X[0]).subtract(1,"years").toDate(),j()(X[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(Z(!0),K([j()(X[0]).subtract(1,"months").toDate(),j()(X[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(Z(!1),K([j()(X[0]).subtract(1,"days").toDate(),j()(X[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(K([null,null]),Z(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:st,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return W(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:st,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:q,format:"yyyy-MM-dd HH:mm:ss",value:J,onChange:e=>{null==e?K([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),K([e[0],e[1]]))},size:"md",style:ee,onClean:e=>{K([null,null])},locale:$,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:st,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:X,onChange:e=>{null==e?Q([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Q([e[0],e[1]]),"year-over-year"===k?K([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&K([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:ee,onClean:e=>{Q([null,null])},locale:$,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ae,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:oe})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ie,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+tt).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacecarbon.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:ge.map((e=>(0,M.jsx)(T.A,{rate:e.increment_rate,title:r("Reporting Period Carbon Dioxide Emissions CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name)))}),(0,M.jsxs)(c.A,{noGutters:!0,children:[(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:de,title:r("Electricity Carbon Dioxide Emissions by Time-Of-Use")})}),(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:pe,title:r("Carbon Dioxide Emissions by Energy Category")})}),we.map((e=>(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:e.data,title:r("Child Space Proportion CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"})})},(0,I.A)()))),(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:Fe,title:r("Child Space Total Proportion")})})]}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Carbon Dioxide Emissions CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:Me,UNIT:be},baseTitle:{name:"Base Period Carbon Dioxide Emissions CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:Se,UNIT:be},reportingTooltipTitle:{name:"Reporting Period Carbon Dioxide Emissions CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:null,UNIT:be},baseTooltipTitle:{name:"Base Period Carbon Dioxide Emissions CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:null,UNIT:be},reportingLabels:Ee,reportingData:Ce,baseLabels:je,baseData:ve,rates:Ye,options:Re}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:Le,data:Ve,options:ze}),(0,M.jsx)(ue,{data:Je,title:r("Detailed Data"),columns:qe,pagesize:50}),(0,M.jsx)("br",{}),(0,M.jsx)(ce,{data:Xe,title:r("Child Spaces Data"),columns:$e})]})}))),pe=(0,A.Ay)((()=>a.e(930).then(a.bind(a,80930)))),he=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),ge=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,P]=(0,s.useState)("month-on-month"),[L,W]=(0,s.useState)("daily"),[z,B]=(0,s.useState)(void 0),[J,K]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[q,Z]=(0,s.useState)(!0),[X,Q]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),$={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},ee={display:"block",zIndex:10},{language:te}=(0,s.useContext)(C.Ay),[ae,se]=(0,s.useState)(!0),[oe,ne]=(0,s.useState)(!0),[ie,le]=(0,s.useState)(!0),[de,ce]=(0,s.useState)([]),[ue,me]=(0,s.useState)([]),[ge,xe]=(0,s.useState)([]),[fe,_e]=(0,s.useState)({a0:""}),[be,ye]=(0,s.useState)({a0:"()"}),[je,Ae]=(0,s.useState)({a0:[]}),[ve,Te]=(0,s.useState)({a0:[]}),[Se,Ue]=(0,s.useState)({a0:(0).toFixed(2)}),[Ee,De]=(0,s.useState)({a0:[]}),[Ce,ke]=(0,s.useState)({a0:[]}),[Me,Ne]=(0,s.useState)({a0:(0).toFixed(2)}),[Ye,Pe]=(0,s.useState)({a0:[]}),[Re,He]=(0,s.useState)([]),[we,Ie]=(0,s.useState)([]),[Fe,Oe]=(0,s.useState)([]),[Le,Ge]=(0,s.useState)([]),[Ve,We]=(0,s.useState)({}),[ze,Be]=(0,s.useState)([]),[Je,Ke]=(0,s.useState)([]),[qe,Ze]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[Xe,Qe]=(0,s.useState)([]),[$e,et]=(0,s.useState)([{dataField:"name",text:r("Child Spaces"),sort:!0}]),[tt,at]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,se(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),B(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const st="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Cost")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(L),console.log(null!=J[0]?j()(J[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=J[1]?j()(J[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(X[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(X[1]).format("YYYY-MM-DDTHH:mm:ss")),se(!0),ne(!1),le(!0),Ke([]),Qe([]);let t=!1;fetch(w.hR+"/reports/spacecost?spaceid="+E+"&periodtype="+L+"&baseperiodstartdatetime="+(null!=J[0]?j()(J[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=J[1]?j()(J[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(X[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(X[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+te,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.subtotal=e.reporting_period.subtotals[s],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[s]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[s],t.push(r)}));let a={};a.name=r("Total"),a.unit=e.reporting_period.total_unit,a.subtotal=e.reporting_period.total,a.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",a.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,t.push(a),xe(t);let s=[];e.reporting_period.energy_category_ids.forEach(((t,a)=>{if(1===t){let t={id:1};t.name=r("Top-Peak"),t.value=e.reporting_period.toppeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=2,t.name=r("On-Peak"),t.value=e.reporting_period.onpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=3,t.name=r("Mid-Peak"),t.value=e.reporting_period.midpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t),t={},t.id=4,t.name=r("Off-Peak"),t.value=e.reporting_period.offpeaks[a],t.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(t)}})),ce(s);let o=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.id=a,s.name=t,s.value=e.reporting_period.subtotals[a],s.color="#"+((1<<24)*Math.random()|0).toString(16),o.push(s)})),me(o);let n=[];e.child_space.energy_category_names.forEach(((t,a)=>{if(e.child_space.child_space_names_array[a].length>0){let t={data:[]};e.child_space.child_space_names_array[a].forEach(((s,r)=>{let o={};o.id=r,o.name=s,o.value=e.child_space.subtotals_array[a][r],o.color="#"+((1<<24)*Math.random()|0).toString(16),t.data.push(o)})),t.name=e.child_space.energy_category_names[a],t.unit=e.child_space.units[a],n.push(t)}})),Ie(n);let i=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s=0;e.child_space.energy_category_names.forEach(((t,r)=>{s+=e.child_space.subtotals_array[r][a]}));let r={};r.id=a,r.name=t,r.value=s,r.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(r)})),Oe(i);let l={};e.base_period.timestamps.forEach(((e,t)=>{l["a"+t]=e})),Ae(l);let d={};e.base_period.values.forEach(((e,t)=>{d["a"+t]=e})),Te(d);let c={};e.reporting_period.names.forEach(((e,t)=>{c["a"+t]=e})),_e(c);let u={};e.reporting_period.units.forEach(((e,t)=>{u["a"+t]="("+e+")"})),ye(u);let m={};e.base_period.subtotals.forEach(((e,t)=>{m["a"+t]=e.toFixed(2)})),Ue(m);let p={};e.reporting_period.timestamps.forEach(((e,t)=>{p["a"+t]=e})),De(p);let h={};e.reporting_period.values.forEach(((e,t)=>{h["a"+t]=e})),ke(h);let g={};e.reporting_period.subtotals.forEach(((e,t)=>{g["a"+t]=e.toFixed(2)})),Ne(g);let x={};e.reporting_period.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),x["a"+t]=a})),Pe(x);let f=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];f.push({value:"a"+a,label:t+" ("+s+")"})})),He(f);let _={};e.parameters.timestamps.forEach(((e,t)=>{_["a"+t]=e})),Ge(_);let b={};e.parameters.values.forEach(((e,t)=>{b["a"+t]=e})),We(b);let y=Array();if(e.parameters.names.forEach(((e,t)=>{y.push({value:"a"+t,label:e})})),Be(y),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"basePeriodTotal",text:r("Base Period")+" - "+r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodTotal",text:r("Reporting Period")+" - "+r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),Ze(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,t.basePeriodTotal=0,null==t.basePeriodDatetime&&(t.basePeriodTotal=null),e.base_period.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values[s].length?e.base_period.values[s][r]:null,null!=t["a"+s]&&(t.basePeriodTotal+=t["a"+s])})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,t.reportingPeriodTotal=0,null==t.reportingPeriodDatetime&&(t.reportingPeriodTotal=null),e.reporting_period.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values[s].length?e.reporting_period.values[s][r]:null,null!=t["b"+s]&&(t.reportingPeriodTotal+=t["b"+s])})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal");let o=0;e.base_period.subtotals.forEach(((e,t)=>{s["a"+t]=e,o+=s["a"+t]})),s.basePeriodTotal=o;let n=0;s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{s["b"+t]=e,n+=s["b"+t]})),s.reportingPeriodTotal=n,a.push(s),setTimeout((()=>{Ke(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a;let o=0;e.reporting_period.values.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values[a][s],o+=e.reporting_period.values[a][s]})),r.total=o,t.push(r)}));let a={};a.id=t.length,a.startdatetime=r("Subtotal");let s=0;e.reporting_period.subtotals.forEach(((e,t)=>{a["a"+t]=e,s+=e})),a.total=s,t.push(a),setTimeout((()=>{Ke(t)}),0);let o=[];o.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];o.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),o.push({dataField:"total",text:r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),Ze(o)}let j=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s={};s.id=a,s.name=t;let r=0;e.child_space.energy_category_names.forEach(((t,o)=>{s["a"+o]=e.child_space.subtotals_array[o][a],r+=e.child_space.subtotals_array[o][a]})),s.total=r,j.push(s)})),Qe(j);let A=[];A.push({dataField:"name",text:r("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach(((t,a)=>{let s=e.child_space.units[a];A.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),A.push({dataField:"total",text:r("Total")+" ("+e.child_space.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),et(A),at(e.excel_bytes_base64),se(!1),ne(!0),le(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:st,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:z,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:st,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),P(t.value),"year-over-year"===t.value?(Z(!0),K([j()(X[0]).subtract(1,"years").toDate(),j()(X[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(Z(!0),K([j()(X[0]).subtract(1,"months").toDate(),j()(X[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(Z(!1),K([j()(X[0]).subtract(1,"days").toDate(),j()(X[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(K([null,null]),Z(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:st,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return W(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:st,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:q,format:"yyyy-MM-dd HH:mm:ss",value:J,onChange:e=>{null==e?K([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),K([e[0],e[1]]))},size:"md",style:ee,onClean:e=>{K([null,null])},locale:$,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:st,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:X,onChange:e=>{null==e?Q([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Q([e[0],e[1]]),"year-over-year"===k?K([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&K([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:ee,onClean:e=>{Q([null,null])},locale:$,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ae,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:oe})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ie,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+tt).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacecost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:ge.map((e=>(0,M.jsx)(T.A,{rate:e.increment_rate,title:r("Reporting Period Costs CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name)))}),(0,M.jsxs)(c.A,{noGutters:!0,children:[(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:de,title:r("Electricity Cost by Time-Of-Use")})}),(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:ue,title:r("Costs by Energy Category")})}),we.map((e=>(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:e.data,title:r("Child Space Proportion CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"})})},(0,I.A)()))),(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:Fe,title:r("Child Space Total Proportion")})})]}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Costs CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:Me,UNIT:be},baseTitle:{name:"Base Period Costs CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:Se,UNIT:be},reportingTooltipTitle:{name:"Reporting Period Costs CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:null,UNIT:be},baseTooltipTitle:{name:"Base Period Costs CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:fe,VALUE:null,UNIT:be},reportingLabels:Ee,reportingData:Ce,baseLabels:je,baseData:ve,rates:Ye,options:Re}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:Le,data:Ve,options:ze}),(0,M.jsx)(he,{data:Je,title:r("Detailed Data"),columns:qe,pagesize:50}),(0,M.jsx)("br",{}),(0,M.jsx)(pe,{data:Xe,title:r("Child Spaces Data"),columns:$e})]})}))),xe=(0,A.Ay)((()=>a.e(930).then(a.bind(a,80930)))),fe=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),_e=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,Y]=(0,s.useState)("month-on-month"),[P,I]=(0,s.useState)("daily"),[L,W]=(0,s.useState)(void 0),[z,B]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[J,K]=(0,s.useState)(!0),[q,Z]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),X={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},Q={display:"block",zIndex:10},{language:$}=(0,s.useContext)(C.Ay),[ee,te]=(0,s.useState)(!0),[ae,se]=(0,s.useState)(!0),[oe,ne]=(0,s.useState)(!0),[ie,le]=(0,s.useState)([]),[de,ce]=(0,s.useState)({a0:""}),[ue,me]=(0,s.useState)({a0:"()"}),[pe,he]=(0,s.useState)({a0:[]}),[ge,_e]=(0,s.useState)({a0:[]}),[be,ye]=(0,s.useState)({a0:(0).toFixed(2)}),[je,Ae]=(0,s.useState)({a0:[]}),[ve,Te]=(0,s.useState)({a0:[]}),[Se,Ue]=(0,s.useState)({a0:(0).toFixed(2)}),[Ee,De]=(0,s.useState)({a0:[]}),[Ce,ke]=(0,s.useState)([]),[Me,Ne]=(0,s.useState)([]),[Ye,Pe]=(0,s.useState)({}),[Re,He]=(0,s.useState)([]),[we,Ie]=(0,s.useState)([]),[Fe,Oe]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[Le,Ge]=(0,s.useState)([]),[Ve,We]=(0,s.useState)([{dataField:"name",text:r("Child Spaces"),sort:!0}]),[ze,Be]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,te(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),W(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const Je="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Output")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(P),console.log(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")),te(!0),se(!1),ne(!0),Ie([]),Ge([]);let t=!1;fetch(w.hR+"/reports/spaceoutput?spaceid="+E+"&periodtype="+P+"&baseperiodstartdatetime="+(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+$,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.subtotal=e.reporting_period.subtotals[s],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[s]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[s],t.push(r)})),le(t);let a={};e.base_period.timestamps.forEach(((e,t)=>{a["a"+t]=e})),he(a);let s={};e.base_period.values.forEach(((e,t)=>{s["a"+t]=e})),_e(s);let o={};e.reporting_period.names.forEach(((e,t)=>{o["a"+t]=e})),ce(o);let n={};e.reporting_period.units.forEach(((e,t)=>{n["a"+t]="("+e+")"})),me(n);let i={};e.base_period.subtotals.forEach(((e,t)=>{i["a"+t]=e.toFixed(2)})),ye(i);let l={};e.reporting_period.timestamps.forEach(((e,t)=>{l["a"+t]=e})),Ae(l);let d={};e.reporting_period.values.forEach(((e,t)=>{d["a"+t]=e})),Te(d);let c={};e.reporting_period.subtotals.forEach(((e,t)=>{c["a"+t]=e.toFixed(2)})),Ue(c);let u={};e.reporting_period.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),u["a"+t]=a})),De(u);let m=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+s+")"})})),ke(m);let p={};e.parameters.timestamps.forEach(((e,t)=>{p["a"+t]=e})),Ne(p);let h={};e.parameters.values.forEach(((e,t)=>{h["a"+t]=e})),Pe(h);let g=Array();if(e.parameters.names.forEach(((e,t)=>{g.push({value:"a"+t,label:e})})),He(g),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Oe(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,e.base_period.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values[s].length?e.base_period.values[s][r]:null})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,e.reporting_period.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values[s].length?e.reporting_period.values[s][r]:null})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal"),e.base_period.subtotals.forEach(((e,t)=>{s["a"+t]=e})),s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{s["b"+t]=e})),a.push(s),setTimeout((()=>{Ie(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a,e.reporting_period.values.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values[a][s]})),t.push(r)}));let a={};a.id=t.length,a.startdatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{a["a"+t]=e})),t.push(a),setTimeout((()=>{Ie(t)}),0);let s=[];s.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let r=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Oe(s)}let x=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s={};s.id=a,s.name=t,e.child_space.energy_category_names.forEach(((t,r)=>{s["a"+r]=e.child_space.subtotals_array[r][a]})),x.push(s)})),Ge(x);let f=[];f.push({dataField:"name",text:r("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach(((t,a)=>{let s=e.child_space.units[a];f.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),We(f),Be(e.excel_bytes_base64),te(!1),se(!0),ne(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Je,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:L,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Je,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),Y(t.value),"year-over-year"===t.value?(K(!0),B([j()(q[0]).subtract(1,"years").toDate(),j()(q[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(K(!0),B([j()(q[0]).subtract(1,"months").toDate(),j()(q[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(K(!1),B([j()(q[0]).subtract(1,"days").toDate(),j()(q[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(B([null,null]),K(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Je,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return I(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:Je,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:J,format:"yyyy-MM-dd HH:mm:ss",value:z,onChange:e=>{null==e?B([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),B([e[0],e[1]]))},size:"md",style:Q,onClean:e=>{B([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Je,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:q,onChange:e=>{null==e?Z([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Z([e[0],e[1]]),"year-over-year"===k?B([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&B([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:Q,onClean:e=>{Z([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ee,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:ae})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:oe,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ze).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceoutput.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:ie.map((e=>(0,M.jsx)(T.A,{rate:e.increment_rate,title:r("Reporting Period Output CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name)))}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Output CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:Se,UNIT:ue},baseTitle:{name:"Base Period Output CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:be,UNIT:ue},reportingTooltipTitle:{name:"Reporting Period Output CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:null,UNIT:ue},baseTooltipTitle:{name:"Base Period Output CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:null,UNIT:ue},reportingLabels:je,reportingData:ve,baseLabels:pe,baseData:ge,rates:Ee,options:Ce}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:Me,data:Ye,options:Re}),(0,M.jsx)(fe,{data:we,title:r("Detailed Data"),columns:Fe,pagesize:50}),(0,M.jsx)("br",{}),(0,M.jsx)(xe,{data:Le,title:r("Child Spaces Data"),columns:Ve})]})}))),be=(0,A.Ay)((()=>a.e(930).then(a.bind(a,80930)))),ye=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),je=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,P]=(0,s.useState)("month-on-month"),[I,L]=(0,s.useState)("daily"),[W,z]=(0,s.useState)(void 0),[B,J]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[K,q]=(0,s.useState)(!0),[Z,X]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),Q={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},$={display:"block",zIndex:10},{language:ee}=(0,s.useContext)(C.Ay),[te,ae]=(0,s.useState)(!0),[se,oe]=(0,s.useState)(!0),[ne,ie]=(0,s.useState)(!0),[le,de]=(0,s.useState)([]),[ce,ue]=(0,s.useState)([]),[me,pe]=(0,s.useState)({a0:""}),[he,ge]=(0,s.useState)({a0:"()"}),[xe,fe]=(0,s.useState)({a0:[]}),[_e,je]=(0,s.useState)({a0:[]}),[Ae,ve]=(0,s.useState)({a0:(0).toFixed(2)}),[Te,Se]=(0,s.useState)({a0:[]}),[Ue,Ee]=(0,s.useState)({a0:[]}),[De,Ce]=(0,s.useState)({a0:(0).toFixed(2)}),[ke,Me]=(0,s.useState)({a0:[]}),[Ne,Ye]=(0,s.useState)([]),[Pe,Re]=(0,s.useState)([]),[He,we]=(0,s.useState)({}),[Ie,Fe]=(0,s.useState)([]),[Oe,Le]=(0,s.useState)([]),[Ge,Ve]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[We,ze]=(0,s.useState)([]),[Be,Je]=(0,s.useState)([{dataField:"name",text:r("Child Spaces"),sort:!0}]),[Ke,qe]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,ae(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),z(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const Ze="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Income")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(I),console.log(null!=B[0]?j()(B[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=B[1]?j()(B[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(Z[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(Z[1]).format("YYYY-MM-DDTHH:mm:ss")),ae(!0),oe(!1),ie(!0),Le([]),ze([]);let t=!1;fetch(w.hR+"/reports/spaceincome?spaceid="+E+"&periodtype="+I+"&baseperiodstartdatetime="+(null!=B[0]?j()(B[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=B[1]?j()(B[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(Z[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(Z[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+ee,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.subtotal=e.reporting_period.subtotals[s],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[s]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[s],t.push(r)}));let a={};a.name=r("Total"),a.unit=e.reporting_period.total_unit,a.subtotal=e.reporting_period.total,a.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",a.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,t.push(a),ue(t);let s=[];e.reporting_period.names.forEach(((t,a)=>{let r={};r.id=a,r.name=t,r.value=e.reporting_period.subtotals[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),s.push(r)})),de(s);let o={};e.base_period.timestamps.forEach(((e,t)=>{o["a"+t]=e})),fe(o);let n={};e.base_period.values.forEach(((e,t)=>{n["a"+t]=e})),je(n);let i={};e.reporting_period.names.forEach(((e,t)=>{i["a"+t]=e})),pe(i);let l={};e.reporting_period.units.forEach(((e,t)=>{l["a"+t]="("+e+")"})),ge(l);let d={};e.base_period.subtotals.forEach(((e,t)=>{d["a"+t]=e.toFixed(2)})),ve(d);let c={};e.reporting_period.timestamps.forEach(((e,t)=>{c["a"+t]=e})),Se(c);let u={};e.reporting_period.values.forEach(((e,t)=>{u["a"+t]=e})),Ee(u);let m={};e.reporting_period.subtotals.forEach(((e,t)=>{m["a"+t]=e.toFixed(2)})),Ce(m);let p={};e.reporting_period.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),p["a"+t]=a})),Me(p);let h=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];h.push({value:"a"+a,label:t+" ("+s+")"})})),Ye(h);let g={};e.parameters.timestamps.forEach(((e,t)=>{g["a"+t]=e})),Re(g);let x={};e.parameters.values.forEach(((e,t)=>{x["a"+t]=e})),we(x);let f=Array();if(e.parameters.names.forEach(((e,t)=>{f.push({value:"a"+t,label:e})})),Fe(f),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"basePeriodTotal",text:r("Base Period")+" - "+r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodTotal",text:r("Reporting Period")+" - "+r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),Ve(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,t.basePeriodTotal=0,null==t.basePeriodDatetime&&(t.basePeriodTotal=null),e.base_period.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values[s].length?e.base_period.values[s][r]:null,null!=t["a"+s]&&(t.basePeriodTotal+=t["a"+s])})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,t.reportingPeriodTotal=0,null==t.reportingPeriodDatetime&&(t.reportingPeriodTotal=null),e.reporting_period.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values[s].length?e.reporting_period.values[s][r]:null,null!=t["b"+s]&&(t.reportingPeriodTotal+=t["b"+s])})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal");let o=0;e.base_period.subtotals.forEach(((e,t)=>{s["a"+t]=e,o+=s["a"+t]})),s.basePeriodTotal=o;let n=0;s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{s["b"+t]=e,n+=s["b"+t]})),s.reportingPeriodTotal=n,a.push(s),setTimeout((()=>{Le(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a;let o=0;e.reporting_period.values.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values[a][s],o+=e.reporting_period.values[a][s]})),r.total=o,t.push(r)}));let a={};a.id=t.length,a.startdatetime=r("Subtotal");let s=0;e.reporting_period.subtotals.forEach(((e,t)=>{a["a"+t]=e,s+=e})),a.total=s,t.push(a),setTimeout((()=>{Le(t)}),0);let o=[];o.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];o.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),o.push({dataField:"total",text:r("Total")+" ("+e.reporting_period.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),Ve(o)}let _=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s={};s.id=a,s.name=t;let r=0;e.child_space.energy_category_names.forEach(((t,o)=>{s["a"+o]=e.child_space.subtotals_array[o][a],r+=e.child_space.subtotals_array[o][a]})),s.total=r,_.push(s)})),ze(_);let b=[];b.push({dataField:"name",text:r("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach(((t,a)=>{let s=e.child_space.units[a];b.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),b.push({dataField:"total",text:r("Total")+" ("+e.child_space.total_unit+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),Je(b),qe(e.excel_bytes_base64),ae(!1),oe(!0),ie(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ze,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:W,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ze,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),P(t.value),"year-over-year"===t.value?(q(!0),J([j()(Z[0]).subtract(1,"years").toDate(),j()(Z[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(q(!0),J([j()(Z[0]).subtract(1,"months").toDate(),j()(Z[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(q(!1),J([j()(Z[0]).subtract(1,"days").toDate(),j()(Z[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(J([null,null]),q(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ze,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return L(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:Ze,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:K,format:"yyyy-MM-dd HH:mm:ss",value:B,onChange:e=>{null==e?J([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),J([e[0],e[1]]))},size:"md",style:$,onClean:e=>{J([null,null])},locale:Q,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ze,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:Z,onChange:e=>{null==e?X([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),X([e[0],e[1]]),"year-over-year"===k?J([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&J([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:$,onClean:e=>{X([null,null])},locale:Q,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:te,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:se})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ne,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ke).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceincome.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:ce.map((e=>(0,M.jsx)(T.A,{rate:e.increment_rate,title:r("Reporting Period Income CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name)))}),(0,M.jsx)(c.A,{noGutters:!0,children:(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:le,title:r("Incomes by Energy Category")})})}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Income CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:De,UNIT:he},baseTitle:{name:"Base Period Income CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:Ae,UNIT:he},reportingTooltipTitle:{name:"Reporting Period Income CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:null,UNIT:he},baseTooltipTitle:{name:"Base Period Income CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:me,VALUE:null,UNIT:he},reportingLabels:Te,reportingData:Ue,baseLabels:xe,baseData:_e,rates:ke,options:Ne}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:Pe,data:He,options:Ie}),(0,M.jsx)(ye,{data:Oe,title:r("Detailed Data"),columns:Ge,pagesize:50}),(0,M.jsx)("br",{}),(0,M.jsx)(be,{data:We,title:r("Child Spaces Data"),columns:Be})]})}))),Ae=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),ve=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,Y]=(0,s.useState)("month-on-month"),[P,I]=(0,s.useState)("daily"),[L,W]=(0,s.useState)(void 0),[z,B]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[J,K]=(0,s.useState)(!0),[q,Z]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),X={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},Q={display:"block",zIndex:10},{language:$}=(0,s.useContext)(C.Ay),[ee,te]=(0,s.useState)(!0),[ae,se]=(0,s.useState)(!0),[oe,ne]=(0,s.useState)(!0),[ie,le]=(0,s.useState)([]),[de,ce]=(0,s.useState)({a0:""}),[ue,me]=(0,s.useState)({a0:"()"}),[pe,he]=(0,s.useState)({a0:[]}),[ge,xe]=(0,s.useState)({a0:[]}),[fe,_e]=(0,s.useState)({a0:(0).toFixed(2)}),[be,ye]=(0,s.useState)({a0:[]}),[je,ve]=(0,s.useState)({a0:[]}),[Te,Se]=(0,s.useState)({a0:(0).toFixed(2)}),[Ue,Ee]=(0,s.useState)({a0:[]}),[De,Ce]=(0,s.useState)([]),[ke,Me]=(0,s.useState)([]),[Ne,Ye]=(0,s.useState)({}),[Pe,Re]=(0,s.useState)([]),[He,we]=(0,s.useState)([]),[Ie,Fe]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[Oe,Le]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,te(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),W(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const Ge="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Efficiency")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(P),console.log(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")),te(!0),se(!1),ne(!0),we([]);let t=!1;fetch(w.hR+"/reports/spaceefficiency?spaceid="+E+"&periodtype="+P+"&baseperiodstartdatetime="+(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+$,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period_efficiency.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period_efficiency.names[s],r.unit=e.reporting_period_efficiency.units[s],r.cumulation=e.reporting_period_efficiency.cumulations[s],r.increment_rate=parseFloat(100*e.reporting_period_efficiency.increment_rates[s]).toFixed(2)+"%",t.push(r)})),le(t);let a={};e.base_period_efficiency.timestamps.forEach(((e,t)=>{a["a"+t]=e})),he(a);let s={};e.base_period_efficiency.values.forEach(((e,t)=>{s["a"+t]=e})),xe(s);let o={};e.reporting_period_efficiency.names.forEach(((e,t)=>{o["a"+t]=e})),ce(o);let n={};e.reporting_period_efficiency.units.forEach(((e,t)=>{n["a"+t]="("+e+")"})),me(n);let i={};e.base_period_efficiency.cumulations.forEach(((e,t)=>{i["a"+t]=null!=e?e.toFixed(2):null})),_e(i);let l={};e.reporting_period_efficiency.timestamps.forEach(((e,t)=>{l["a"+t]=e})),ye(l);let d={};e.reporting_period_efficiency.values.forEach(((e,t)=>{d["a"+t]=e})),ve(d);let c={};e.reporting_period_efficiency.cumulations.forEach(((e,t)=>{c["a"+t]=null!=e?e.toFixed(2):null})),Se(c);let u={};e.reporting_period_efficiency.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),u["a"+t]=a})),Ee(u);let m=Array();e.reporting_period_efficiency.names.forEach(((t,a)=>{let s=e.reporting_period_efficiency.units[a];m.push({value:"a"+a,label:t+" ("+s+")"})})),Ce(m);let p={};e.parameters.timestamps.forEach(((e,t)=>{p["a"+t]=e})),Me(p);let h={};e.parameters.values.forEach(((e,t)=>{h["a"+t]=e})),Ye(h);let g=Array();e.parameters.names.forEach(((e,t)=>{g.push({value:"a"+t,label:e})})),Re(g);let x=[];if(e.reporting_period_efficiency.timestamps.length>0&&e.reporting_period_efficiency.timestamps[0].forEach(((t,a)=>{let s={};s.id=a,s.startdatetime=t,e.reporting_period_efficiency.values.forEach(((t,r)=>{null!=e.reporting_period_efficiency.values[r][a]?s["a"+r]=e.reporting_period_efficiency.values[r][a]:s["a"+r]=null})),x.push(s)})),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period_efficiency)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period_efficiency.names.forEach(((a,s)=>{let o=e.base_period_efficiency.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period_efficiency.names.forEach(((a,s)=>{let o=e.reporting_period_efficiency.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Fe(t);let a=[];if(e.base_period_efficiency.timestamps.length>0||e.reporting_period_efficiency.timestamps.length>0){const t=e.base_period_efficiency.timestamps[0].length>=e.reporting_period_efficiency.timestamps[0].length?e.base_period_efficiency.timestamps[0].length:e.reporting_period_efficiency.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period_efficiency.timestamps[0].length?e.base_period_efficiency.timestamps[0][r]:null,e.base_period_efficiency.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period_efficiency.values[s].length?e.base_period_efficiency.values[s][r]:null})),t.reportingPeriodDatetime=r<e.reporting_period_efficiency.timestamps[0].length?e.reporting_period_efficiency.timestamps[0][r]:null,e.reporting_period_efficiency.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period_efficiency.values[s].length?e.reporting_period_efficiency.values[s][r]:null})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal"),e.base_period_efficiency.cumulations.forEach(((e,t)=>{s["a"+t]=e})),s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period_efficiency.cumulations.forEach(((e,t)=>{s["b"+t]=e})),a.push(s),setTimeout((()=>{we(a)}),0)}}else{let t={};t.id=x.length,t.startdatetime=r("Subtotal"),e.reporting_period_efficiency.cumulations.forEach(((e,a)=>{t["a"+a]=null!=e?e:null})),x.push(t),setTimeout((()=>{we(x)}),0);let a=[];a.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period_efficiency.names.forEach(((t,s)=>{let r=e.reporting_period_efficiency.units[s];a.push({dataField:"a"+s,text:t+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Fe(a)}Le(e.excel_bytes_base64),te(!1),se(!0),ne(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ge,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:L,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ge,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),Y(t.value),"year-over-year"===t.value?(K(!0),B([j()(q[0]).subtract(1,"years").toDate(),j()(q[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(K(!0),B([j()(q[0]).subtract(1,"months").toDate(),j()(q[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(K(!1),B([j()(q[0]).subtract(1,"days").toDate(),j()(q[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(B([null,null]),K(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ge,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return I(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:Ge,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:J,format:"yyyy-MM-dd HH:mm:ss",value:z,onChange:e=>{null==e?B([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),B([e[0],e[1]]))},size:"md",style:Q,onClean:e=>{B([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ge,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:q,onChange:e=>{null==e?Z([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Z([e[0],e[1]]),"year-over-year"===k?B([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&B([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:Q,onClean:e=>{Z([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ee,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:ae})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:oe,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Oe).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceefficiency.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:ie.map((e=>(0,M.jsx)(T.A,{rate:e.increment_rate,title:r("Reporting Period Cumulative Efficiency NAME UNIT",{NAME:e.name,UNIT:"("+e.unit+")"}),color:"success",children:e.cumulation&&(0,M.jsx)(b.Ay,{end:e.cumulation,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name)))}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Cumulative Efficiency NAME VALUE UNIT",substitute:["NAME","VALUE","UNIT"],NAME:de,VALUE:Te,UNIT:ue},baseTitle:{name:"Base Period Cumulative Efficiency NAME VALUE UNIT",substitute:["NAME","VALUE","UNIT"],NAME:de,VALUE:fe,UNIT:ue},reportingTooltipTitle:{name:"Reporting Period Cumulative Efficiency NAME VALUE UNIT",substitute:["NAME","VALUE","UNIT"],NAME:de,VALUE:null,UNIT:ue},baseTooltipTitle:{name:"Base Period Cumulative Efficiency NAME VALUE UNIT",substitute:["NAME","VALUE","UNIT"],NAME:de,VALUE:null,UNIT:ue},reportingLabels:be,reportingData:je,baseLabels:pe,baseData:ge,rates:Ue,options:De}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:ke,data:Ne,options:Pe}),(0,M.jsx)(Ae,{data:He,title:r("Detailed Data"),columns:Ie,pagesize:50}),(0,M.jsx)("br",{})]})}))),Te=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),Se=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,Y]=(0,s.useState)("month-on-month"),[P,I]=(0,s.useState)("daily"),[L,W]=(0,s.useState)(void 0),[z,B]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[J,K]=(0,s.useState)(!0),[q,Z]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),X={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},Q={display:"block",zIndex:10},{language:$}=(0,s.useContext)(C.Ay),[ee,te]=(0,s.useState)(!0),[ae,se]=(0,s.useState)(!0),[oe,ne]=(0,s.useState)(!0),[ie,le]=(0,s.useState)([]),[de,ce]=(0,s.useState)({a0:""}),[ue,me]=(0,s.useState)({a0:"()"}),[pe,he]=(0,s.useState)({a0:[]}),[ge,xe]=(0,s.useState)({a0:[]}),[fe,_e]=(0,s.useState)({a0:[]}),[be,ye]=(0,s.useState)({a0:[]}),[je,Ae]=(0,s.useState)({a0:[]}),[ve,Se]=(0,s.useState)([]),[Ue,Ee]=(0,s.useState)([]),[De,Ce]=(0,s.useState)({}),[ke,Me]=(0,s.useState)([]),[Ne,Ye]=(0,s.useState)([]),[Pe,Re]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[He,we]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,te(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),W(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const Ie="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Load")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(P),console.log(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")),te(!0),se(!1),ne(!0),Ye([]);let t=!1;fetch(w.hR+"/reports/spaceload?spaceid="+E+"&periodtype="+P+"&baseperiodstartdatetime="+(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+$,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.average=e.reporting_period.averages[s],r.average_increment_rate=parseFloat(100*e.reporting_period.averages_increment_rate[s]).toFixed(2)+"%",r.average_per_unit_area=e.reporting_period.averages_per_unit_area[s],r.maximum=e.reporting_period.maximums[s],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[s]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[s],r.factor=e.reporting_period.factors[s],r.factor_increment_rate=parseFloat(100*e.reporting_period.factors_increment_rate[s]).toFixed(2)+"%",t.push(r)})),le(t);let a={};e.base_period.timestamps.forEach(((e,t)=>{a["a"+t]=e})),he(a);let s={};e.base_period.sub_maximums.forEach(((e,t)=>{s["a"+t]=e})),xe(s);let o={};e.reporting_period.names.forEach(((e,t)=>{o["a"+t]=e})),ce(o);let n={};e.reporting_period.units.forEach(((e,t)=>{n["a"+t]="("+e+"/H)"})),me(n);let i={};e.reporting_period.timestamps.forEach(((e,t)=>{i["a"+t]=e})),_e(i);let l={};e.reporting_period.sub_maximums.forEach(((e,t)=>{l["a"+t]=e})),ye(l);let d={};e.reporting_period.rates_of_sub_maximums.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),d["a"+t]=a})),Ae(d);let c=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];c.push({value:"a"+a,label:t+" ("+s+"/H)"})})),Se(c);let u={};e.parameters.timestamps.forEach(((e,t)=>{u["a"+t]=e})),Ee(u);let m={};e.parameters.values.forEach(((e,t)=>{m["a"+t]=e})),Ce(m);let p=Array();if(e.parameters.names.forEach(((e,t)=>{p.push({value:"a"+t,label:e})})),Me(p),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+2*s,text:r("Base Period")+" - "+a+" "+r("Average Load")+" ("+o+"/H)",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),t.push({dataField:"a"+(2*s+1),text:r("Base Period")+" - "+a+" "+r("Maximum Load")+" ("+o+"/H)",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+2*s,text:r("Reporting Period")+" - "+a+" "+r("Average Load")+" ("+o+"/H)",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),t.push({dataField:"b"+(2*s+1),text:r("Reporting Period")+" - "+a+" "+r("Maximum Load")+" ("+o+"/H)",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Re(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let s=0;s<t;s++){let t={};t.id=s,t.basePeriodDatetime=s<e.base_period.timestamps[0].length?e.base_period.timestamps[0][s]:null,e.base_period.sub_averages.forEach(((a,r)=>{t["a"+2*r]=s<e.base_period.sub_averages[r].length?e.base_period.sub_averages[r][s]:null})),e.base_period.sub_maximums.forEach(((a,r)=>{t["a"+(2*r+1)]=s<e.base_period.sub_maximums[r].length?e.base_period.sub_maximums[r][s]:null})),t.reportingPeriodDatetime=s<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][s]:null,e.reporting_period.sub_averages.forEach(((a,r)=>{t["b"+2*r]=s<e.reporting_period.sub_averages[r].length?e.reporting_period.sub_averages[r][s]:null})),e.reporting_period.sub_maximums.forEach(((a,r)=>{t["b"+(2*r+1)]=s<e.reporting_period.sub_maximums[r].length?e.reporting_period.sub_maximums[r][s]:null})),a.push(t)}setTimeout((()=>{Ye(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a,e.reporting_period.sub_averages.forEach(((t,a)=>{null!=e.reporting_period.sub_averages[a][s]?r["a"+2*a]=e.reporting_period.sub_averages[a][s]:r["a"+2*a]=null,null!=e.reporting_period.sub_maximums[a][s]?r["a"+(2*a+1)]=e.reporting_period.sub_maximums[a][s]:r["a"+(2*a+1)]=null})),t.push(r)})),setTimeout((()=>{Ye(t)}),0);let a=[];a.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,s)=>{let o=e.reporting_period.units[s];a.push({dataField:"a"+2*s,text:t+" "+r("Average Load")+" ("+o+"/H)",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}}),a.push({dataField:"a"+(2*s+1),text:t+" "+r("Maximum Load")+" ("+o+"/H)",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Re(a)}we(e.excel_bytes_base64),te(!1),se(!0),ne(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ie,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:L,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ie,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),Y(t.value),"year-over-year"===t.value?(K(!0),B([j()(q[0]).subtract(1,"years").toDate(),j()(q[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(K(!0),B([j()(q[0]).subtract(1,"months").toDate(),j()(q[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(K(!1),B([j()(q[0]).subtract(1,"days").toDate(),j()(q[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(B([null,null]),K(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ie,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return I(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:Ie,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:J,format:"yyyy-MM-dd HH:mm:ss",value:z,onChange:e=>{null==e?B([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),B([e[0],e[1]]))},size:"md",style:Q,onClean:e=>{B([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ie,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:q,onChange:e=>{null==e?Z([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Z([e[0],e[1]]),"year-over-year"===k?B([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&B([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:Q,onClean:e=>{Z([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ee,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:ae})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:oe,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+He).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceload.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),ie.map((e=>(0,M.jsxs)("div",{className:"card-deck",children:[(0,M.jsx)(T.A,{rate:e.average_increment_rate,title:r("Reporting Period CATEGORY Average Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.average_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)",children:e.average&&(0,M.jsx)(b.Ay,{end:e.average,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"average"),(0,M.jsx)(T.A,{rate:e.maximum_increment_rate,title:r("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)",children:e.maximum&&(0,M.jsx)(b.Ay,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"maximum"),(0,M.jsx)(T.A,{rate:e.factor_increment_rate,title:r("Reporting Period CATEGORY Load Factor",{CATEGORY:e.name}),color:"success",footnote:r("Ratio of Average Load to Maximum Load"),children:e.factor&&(0,M.jsx)(b.Ay,{end:e.factor,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"factor")]},e.name))),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period CATEGORY Maximum Load UNIT",substitute:["CATEGORY","UNIT"],CATEGORY:de,UNIT:ue},baseTitle:{name:"Base Period CATEGORY Maximum Load UNIT",substitute:["CATEGORY","UNIT"],CATEGORY:de,UNIT:ue},reportingTooltipTitle:{name:"Reporting Period CATEGORY Maximum Load UNIT",substitute:["CATEGORY","UNIT"],CATEGORY:de,UNIT:ue},baseTooltipTitle:{name:"Base Period CATEGORY Maximum Load UNIT",substitute:["CATEGORY","UNIT"],CATEGORY:de,UNIT:ue},reportingLabels:fe,reportingData:be,baseLabels:pe,baseData:ge,rates:je,options:ve}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:Ue,data:De,options:ke}),(0,M.jsx)(Te,{data:Ne,title:r("Detailed Data"),columns:Pe,pagesize:50}),(0,M.jsx)("br",{})]})}))),Ue=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),Ee=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,Y]=(0,s.useState)("month-on-month"),[P,I]=(0,s.useState)("daily"),[L,W]=(0,s.useState)(void 0),[z,B]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[J,K]=(0,s.useState)(!0),[q,Z]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),X={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},Q={display:"block",zIndex:10},{language:$}=(0,s.useContext)(C.Ay),[ee,te]=(0,s.useState)(!0),[ae,se]=(0,s.useState)(!0),[oe,ne]=(0,s.useState)(!0),[ie,le]=(0,s.useState)([]),[de,ce]=(0,s.useState)({a0:""}),[ue,me]=(0,s.useState)({a0:"()"}),[pe,he]=(0,s.useState)({a0:[]}),[ge,xe]=(0,s.useState)({a0:[]}),[fe,_e]=(0,s.useState)({a0:(0).toFixed(2)}),[be,ye]=(0,s.useState)({a0:[]}),[je,Ae]=(0,s.useState)({a0:[]}),[ve,Te]=(0,s.useState)({a0:(0).toFixed(2)}),[Se,Ee]=(0,s.useState)({a0:[]}),[De,Ce]=(0,s.useState)([]),[ke,Me]=(0,s.useState)([]),[Ne,Ye]=(0,s.useState)({}),[Pe,Re]=(0,s.useState)([]),[He,we]=(0,s.useState)([]),[Ie,Fe]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[Oe,Le]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,te(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),W(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const Ge="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Statistics")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(P),console.log(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")),te(!0),se(!1),ne(!0),we([]);let t=!1;fetch(w.hR+"/reports/spacestatistics?spaceid="+E+"&periodtype="+P+"&baseperiodstartdatetime="+(null!=z[0]?j()(z[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=z[1]?j()(z[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(q[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(q[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+$,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.mean=e.reporting_period.means[s],r.mean_increment_rate=parseFloat(100*e.reporting_period.means_increment_rate[s]).toFixed(2)+"%",r.mean_per_unit_area=e.reporting_period.means_per_unit_area[s],r.median=e.reporting_period.medians[s],r.median_increment_rate=parseFloat(100*e.reporting_period.medians_increment_rate[s]).toFixed(2)+"%",r.median_per_unit_area=e.reporting_period.medians_per_unit_area[s],r.minimum=e.reporting_period.minimums[s],r.minimum_increment_rate=parseFloat(100*e.reporting_period.minimums_increment_rate[s]).toFixed(2)+"%",r.minimum_per_unit_area=e.reporting_period.minimums_per_unit_area[s],r.maximum=e.reporting_period.maximums[s],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[s]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[s],r.stdev=e.reporting_period.stdevs[s],r.stdev_increment_rate=parseFloat(100*e.reporting_period.stdevs_increment_rate[s]).toFixed(2)+"%",r.stdev_per_unit_area=e.reporting_period.stdevs_per_unit_area[s],r.variance=e.reporting_period.variances[s],r.variance_increment_rate=parseFloat(100*e.reporting_period.variances_increment_rate[s]).toFixed(2)+"%",r.variance_per_unit_area=e.reporting_period.variances_per_unit_area[s],t.push(r)})),le(t);let a={};e.base_period.timestamps.forEach(((e,t)=>{a["a"+t]=e})),he(a);let s={};e.base_period.values.forEach(((e,t)=>{s["a"+t]=e})),xe(s);let o={};e.reporting_period.names.forEach(((e,t)=>{o["a"+t]=e})),ce(o);let n={};e.reporting_period.units.forEach(((e,t)=>{n["a"+t]="("+e+")"})),me(n);let i={};e.base_period.subtotals.forEach(((e,t)=>{i["a"+t]=e.toFixed(2)})),_e(i);let l={};e.reporting_period.timestamps.forEach(((e,t)=>{l["a"+t]=e})),ye(l);let d={};e.reporting_period.values.forEach(((e,t)=>{d["a"+t]=e})),Ae(d);let c={};e.reporting_period.subtotals.forEach(((e,t)=>{c["a"+t]=e.toFixed(2)})),Te(c);let u={};e.reporting_period.rates.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),u["a"+t]=a})),Ee(u);let m=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+s+")"})})),Ce(m);let p={};e.parameters.timestamps.forEach(((e,t)=>{p["a"+t]=e})),Me(p);let h={};e.parameters.values.forEach(((e,t)=>{h["a"+t]=e})),Ye(h);let g=Array();if(e.parameters.names.forEach(((e,t)=>{g.push({value:"a"+t,label:e})})),Re(g),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Fe(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,e.base_period.values.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values[s].length?e.base_period.values[s][r]:null})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,e.reporting_period.values.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values[s].length?e.reporting_period.values[s][r]:null})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal"),e.base_period.subtotals.forEach(((e,t)=>{s["a"+t]=e})),s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{s["b"+t]=e})),a.push(s),setTimeout((()=>{we(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a,e.reporting_period.values.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values[a][s]})),t.push(r)}));let a={};a.id=t.length,a.startdatetime=r("Subtotal"),e.reporting_period.subtotals.forEach(((e,t)=>{a["a"+t]=e})),t.push(a),setTimeout((()=>{we(t)}),0);let s=[];s.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let r=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),Fe(s)}Le(e.excel_bytes_base64),te(!1),se(!0),ne(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ge,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:L,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ge,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),Y(t.value),"year-over-year"===t.value?(K(!0),B([j()(q[0]).subtract(1,"years").toDate(),j()(q[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(K(!0),B([j()(q[0]).subtract(1,"months").toDate(),j()(q[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(K(!1),B([j()(q[0]).subtract(1,"days").toDate(),j()(q[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(B([null,null]),K(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:Ge,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return I(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:Ge,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:J,format:"yyyy-MM-dd HH:mm:ss",value:z,onChange:e=>{null==e?B([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),B([e[0],e[1]]))},size:"md",style:Q,onClean:e=>{B([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:Ge,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:q,onChange:e=>{null==e?Z([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Z([e[0],e[1]]),"year-over-year"===k?B([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&B([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:Q,onClean:e=>{Z([null,null])},locale:X,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ee,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:ae})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:oe,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Oe).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacestatistics.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),ie.map((e=>(0,M.jsxs)("div",{className:"card-deck",children:[(0,M.jsx)(T.A,{rate:e.mean_increment_rate,title:r("Reporting Period CATEGORY Mean UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.mean_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.mean&&(0,M.jsx)(b.Ay,{end:e.mean,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"mean"),(0,M.jsx)(T.A,{rate:e.median_increment_rate,title:r("Reporting Period CATEGORY Median UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.median_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.median&&(0,M.jsx)(b.Ay,{end:e.median,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"median"),(0,M.jsx)(T.A,{rate:e.minimum_increment_rate,title:r("Reporting Period CATEGORY Minimum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.minimum_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.minimum&&(0,M.jsx)(b.Ay,{end:e.minimum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"minimum"),(0,M.jsx)(T.A,{rate:e.maximum_increment_rate,title:r("Reporting Period CATEGORY Maximum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.maximum&&(0,M.jsx)(b.Ay,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"maximum"),(0,M.jsx)(T.A,{rate:e.stdev_increment_rate,title:r("Reporting Period CATEGORY Stdev UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.stdev_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.stdev&&(0,M.jsx)(b.Ay,{end:e.stdev,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"stdev"),(0,M.jsx)(T.A,{rate:e.variance_increment_rate,title:r("Reporting Period CATEGORY Variance UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.variance_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.variance&&(0,M.jsx)(b.Ay,{end:e.variance,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name+"variance")]},e.name))),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:ve,UNIT:ue},baseTitle:{name:"Base Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:fe,UNIT:ue},reportingTooltipTitle:{name:"Reporting Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:null,UNIT:ue},baseTooltipTitle:{name:"Base Period Consumption CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:de,VALUE:null,UNIT:ue},reportingLabels:be,reportingData:je,baseLabels:pe,baseData:ge,rates:Se,options:De}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:ke,data:Ne,options:Pe}),(0,M.jsx)(Ue,{data:He,title:r("Detailed Data"),columns:Ie,pagesize:50}),(0,M.jsx)("br",{})]})}))),De=(0,A.Ay)((()=>a.e(930).then(a.bind(a,80930)))),Ce=(0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),ke=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,y=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,P]=(0,s.useState)("month-on-month"),[I,L]=(0,s.useState)("daily"),[W,z]=(0,s.useState)(void 0),[B,J]=(0,s.useState)([y.clone().subtract(1,"months").startOf("month").toDate(),y.clone().subtract(1,"months").toDate()]),[K,q]=(0,s.useState)(!0),[Z,X]=(0,s.useState)([y.clone().startOf("month").toDate(),y.toDate()]),Q={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},$={display:"block",zIndex:10},{language:ee}=(0,s.useContext)(C.Ay),[te,ae]=(0,s.useState)(!0),[se,oe]=(0,s.useState)(!0),[ne,ie]=(0,s.useState)(!0),[le,de]=(0,s.useState)([]),[ce,ue]=(0,s.useState)([]),[me,pe]=(0,s.useState)([]),[he,ge]=(0,s.useState)({}),[xe,fe]=(0,s.useState)({}),[_e,be]=(0,s.useState)({a0:""}),[ye,je]=(0,s.useState)({a0:"()"}),[Ae,ve]=(0,s.useState)({a0:[]}),[Te,Se]=(0,s.useState)({a0:[]}),[Ue,Ee]=(0,s.useState)({a0:(0).toFixed(2)}),[ke,Me]=(0,s.useState)({a0:[]}),[Ne,Ye]=(0,s.useState)({a0:[]}),[Pe,Re]=(0,s.useState)({a0:(0).toFixed(2)}),[He,we]=(0,s.useState)({a0:[]}),[Ie,Fe]=(0,s.useState)([]),[Oe,Le]=(0,s.useState)([]),[Ge,Ve]=(0,s.useState)({}),[We,ze]=(0,s.useState)([]),[Be,Je]=(0,s.useState)([]),[Ke,qe]=(0,s.useState)([{dataField:"startdatetime",text:r("Datetime"),sort:!0}]),[Ze,Xe]=(0,s.useState)([]),[Qe,$e]=(0,s.useState)([{dataField:"name",text:r("Child Spaces"),sort:!0}]),[et,tt]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0,ae(!1)),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),z(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const at="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Saving")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(k),console.log(I),console.log(null!=B[0]?j()(B[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=B[1]?j()(B[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(Z[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(Z[1]).format("YYYY-MM-DDTHH:mm:ss")),ae(!0),oe(!1),ie(!0),Je([]),Xe([]);let t=!1;fetch(w.hR+"/reports/spacesaving?spaceid="+E+"&periodtype="+I+"&baseperiodstartdatetime="+(null!=B[0]?j()(B[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=B[1]?j()(B[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(Z[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(Z[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+ee,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.reporting_period.names.forEach(((a,s)=>{let r={};r.name=e.reporting_period.names[s],r.unit=e.reporting_period.units[s],r.subtotal=e.reporting_period.subtotals_saving[s],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates_saving[s]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area_saving[s],t.push(r)})),pe(t);let a={};a.value=e.reporting_period.total_in_kgce_saving/1e3,a.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce_saving).toFixed(2)+"%",a.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area_saving/1e3,ge(a);let s={};s.value=e.reporting_period.total_in_kgco2e_saving/1e3,s.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e_saving).toFixed(2)+"%",s.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area_saving/1e3,fe(s);let o=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.id=a,s.name=t,s.value=e.reporting_period.subtotals_in_kgce_saving[a]/1e3,s.color="#"+((1<<24)*Math.random()|0).toString(16),o.push(s)})),de(o);let n=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.id=a,s.name=t,s.value=e.reporting_period.subtotals_in_kgco2e_saving[a]/1e3,s.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(s)})),ue(n);let i={};e.base_period.timestamps.forEach(((e,t)=>{i["a"+t]=e})),ve(i);let l={};e.base_period.values_saving.forEach(((e,t)=>{l["a"+t]=e})),Se(l);let d={};e.reporting_period.names.forEach(((e,t)=>{d["a"+t]=e})),be(d);let c={};e.reporting_period.units.forEach(((e,t)=>{c["a"+t]="("+e+")"})),je(c);let u={};e.base_period.subtotals_saving.forEach(((e,t)=>{u["a"+t]=e.toFixed(2)})),Ee(u);let m={};e.reporting_period.timestamps.forEach(((e,t)=>{m["a"+t]=e})),Me(m);let p={};e.reporting_period.values_saving.forEach(((e,t)=>{p["a"+t]=e})),Ye(p);let h={};e.reporting_period.subtotals_saving.forEach(((e,t)=>{h["a"+t]=e.toFixed(2)})),Re(h);let g={};e.reporting_period.rates_saving.forEach(((e,t)=>{let a=Array();e.forEach((e=>{a.push(e?parseFloat(100*e).toFixed(2):"0.00")})),g["a"+t]=a})),we(g);let x=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];x.push({value:"a"+a,label:t+" ("+s+")"})})),Fe(x);let f={};e.parameters.timestamps.forEach(((e,t)=>{f["a"+t]=e})),Le(f);let _={};e.parameters.values.forEach(((e,t)=>{_["a"+t]=e})),Ve(_);let b=Array();if(e.parameters.names.forEach(((e,t)=>{b.push({value:"a"+t,label:e})})),ze(b),(e=>{const t=e.timestamps;if(0===t.length)return!1;for(let a=0;a<t.length;a++)if(t[a].length>0)return!0;return!1})(e.base_period)){let t=[];t.push({dataField:"basePeriodDatetime",text:r("Base Period")+" - "+r("Datetime"),sort:!0}),e.base_period.names.forEach(((a,s)=>{let o=e.base_period.units[s];t.push({dataField:"a"+s,text:r("Base Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),t.push({dataField:"reportingPeriodDatetime",text:r("Reporting Period")+" - "+r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((a,s)=>{let o=e.reporting_period.units[s];t.push({dataField:"b"+s,text:r("Reporting Period")+" - "+a+" ("+o+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),qe(t);let a=[];if(e.base_period.timestamps.length>0||e.reporting_period.timestamps.length>0){const t=e.base_period.timestamps[0].length>=e.reporting_period.timestamps[0].length?e.base_period.timestamps[0].length:e.reporting_period.timestamps[0].length;for(let r=0;r<t;r++){let t={};t.id=r,t.basePeriodDatetime=r<e.base_period.timestamps[0].length?e.base_period.timestamps[0][r]:null,e.base_period.values_saving.forEach(((a,s)=>{t["a"+s]=r<e.base_period.values_saving[s].length?e.base_period.values_saving[s][r]:null})),t.reportingPeriodDatetime=r<e.reporting_period.timestamps[0].length?e.reporting_period.timestamps[0][r]:null,e.reporting_period.values_saving.forEach(((a,s)=>{t["b"+s]=r<e.reporting_period.values_saving[s].length?e.reporting_period.values_saving[s][r]:null})),a.push(t)}let s={};s.id=a.length,s.basePeriodDatetime=r("Subtotal"),e.base_period.subtotals_saving.forEach(((e,t)=>{s["a"+t]=e})),s.reportingPeriodDatetime=r("Subtotal"),e.reporting_period.subtotals_saving.forEach(((e,t)=>{s["b"+t]=e})),a.push(s),setTimeout((()=>{Je(a)}),0)}}else{let t=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach(((a,s)=>{let r={};r.id=s,r.startdatetime=a,e.reporting_period.values_saving.forEach(((t,a)=>{r["a"+a]=e.reporting_period.values_saving[a][s]})),t.push(r)}));let a={};a.id=t.length,a.startdatetime=r("Subtotal"),e.reporting_period.subtotals_saving.forEach(((e,t)=>{a["a"+t]=e})),t.push(a),setTimeout((()=>{Je(t)}),0);let s=[];s.push({dataField:"startdatetime",text:r("Datetime"),sort:!0}),e.reporting_period.names.forEach(((t,a)=>{let r=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+r+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),qe(s)}let y=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach(((t,a)=>{let s={};s.id=a,s.name=t,e.child_space.energy_category_names.forEach(((t,r)=>{s["a"+r]=e.child_space.subtotals_saving_array[r][a]})),y.push(s)})),Xe(y);let j=[];j.push({dataField:"name",text:r("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach(((t,a)=>{let s=e.child_space.units[a];j.push({dataField:"a"+a,text:t+" ("+s+")",sort:!0,formatter:function(e){return"number"===typeof e?e.toFixed(2):null}})})),$e(j),tt(e.excel_bytes_base64),ae(!1),oe(!0),ie(!1)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:at,for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:W,onChange:(e,t)=>{console.log(e,t),U(t.map((e=>e.label)).join("/")),D(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:at,for:"comparisonType",children:r("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),P(t.value),"year-over-year"===t.value?(q(!0),J([j()(Z[0]).subtract(1,"years").toDate(),j()(Z[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(q(!0),J([j()(Z[0]).subtract(1,"months").toDate(),j()(Z[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(q(!1),J([j()(Z[0]).subtract(1,"days").toDate(),j()(Z[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(J([null,null]),q(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:at,for:"periodType",children:r("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return L(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:r(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:at,for:"basePeriodDateRangePicker",children:[r("Base Period"),r("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:K,format:"yyyy-MM-dd HH:mm:ss",value:B,onChange:e=>{null==e?J([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),J([e[0],e[1]]))},size:"md",style:$,onClean:e=>{J([null,null])},locale:Q,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:at,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:Z,onChange:e=>{null==e?X([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),X([e[0],e[1]]),"year-over-year"===k?J([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===k&&J([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:$,onClean:e=>{X([null,null])},locale:Q,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:te,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:se})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ne,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+et).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacesaving.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsxs)("div",{className:"card-deck",children:[me.map((e=>(0,M.jsx)(T.A,{rate:e.increment_rate,title:r("Reporting Period Saving CATEGORY (Baseline - Actual) UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:r("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name))),(0,M.jsx)(T.A,{rate:he.increment_rate||"",title:r("Reporting Period Saving CATEGORY (Baseline - Actual) UNIT",{CATEGORY:r("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:r("Per Unit Area"),footvalue:he.value_per_unit_area,footunit:"(TCE/M\xb2)",children:he.value&&(0,M.jsx)(b.Ay,{end:he.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})}),(0,M.jsx)(T.A,{rate:xe.increment_rate||"",title:r("Reporting Period Decreased CATEGORY (Baseline - Actual) UNIT",{CATEGORY:r("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:r("Per Unit Area"),footvalue:xe.value_per_unit_area,footunit:"(TCO2E/M\xb2)",children:xe.value&&(0,M.jsx)(b.Ay,{end:xe.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})})]}),(0,M.jsxs)(c.A,{noGutters:!0,children:[(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:le,title:r("Ton of Standard Coal by Energy Category")})}),(0,M.jsx)(u.A,{className:"mb-3 pr-lg-2 mb-3",children:(0,M.jsx)(Y.A,{data:ce,title:r("Ton of Carbon Dioxide Emissions by Energy Category")})})]}),(0,M.jsx)(N,{reportingTitle:{name:"Reporting Period Saving CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:_e,VALUE:Pe,UNIT:ye},baseTitle:{name:"Base Period Saving CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:_e,VALUE:Ue,UNIT:ye},reportingTooltipTitle:{name:"Reporting Period Saving CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:_e,VALUE:null,UNIT:ye},baseTooltipTitle:{name:"Base Period Saving CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:_e,VALUE:null,UNIT:ye},reportingLabels:ke,reportingData:Ne,baseLabels:Ae,baseData:Te,rates:He,options:Ie}),(0,M.jsx)(re,{reportingTitle:r("Operating Characteristic Curve"),baseTitle:"",labels:Oe,data:Ge,options:We}),(0,M.jsx)(Ce,{data:Be,title:r("Detailed Data"),columns:Ke,pagesize:50}),(0,M.jsx)("br",{}),(0,M.jsx)(De,{data:Ze,title:r("Child Spaces Data"),columns:Qe})]})})));var Me=a(83214),Ne=a(99377),Ye=a(74026),Pe=a(38477),Re=a(42419),He=a(71920);const we="rgba(255, 255, 255, 0.05)";class Ie extends s.Component{constructor(){super(...arguments),this._isMounted=!1,this.state={trendLog:[],currentEnergyValue:void 0,energyValuePointName:void 0,pointList:[]}}componentWillUnmount(){this._isMounted=!1,clearInterval(this.refreshInterval),clearTimeout(this.refreshTimeout)}componentDidMount(){this._isMounted=!0;const{t:e}=this.props;let t=!1;fetch(w.hR+"/reports/spaceenvironmentmonitor?sensorid="+this.props.sensorId,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((a=>{if(t){let e,t=a.energy_value.values.length,s=t>60?a.energy_value.values.slice(t-60,t):a.energy_value.values,r=a.energy_value.name,o=[];s.length>0&&(e=s[s.length-1]),a.parameters.names.forEach(((e,t)=>{let s={};s.name=e,s.value=void 0;let r=a.parameters.values[t];r.length>0&&(s.value=r[r.length-1]),o.push(s)})),this._isMounted&&this.setState({trendLog:s,currentEnergyValue:e,energyValuePointName:r,pointList:o})}else R.oR.error(e(a.description))})).catch((e=>{console.log(e)})),this.refreshInterval=setInterval((()=>{let t=!1;fetch(w.hR+"/reports/spaceenvironmentmonitor?sensorid="+this.props.sensorId,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((a=>{if(t){let e,t=a.energy_value.values,s=a.energy_value.name,r=[];t.length>0&&(e=t[t.length-1]),a.parameters.names.forEach(((e,t)=>{let s={};s.name=e,s.value=void 0;let o=a.parameters.values[t];o.length>0&&(s.value=o[o.length-1]),r.push(s)})),this._isMounted&&this.setState({trendLog:t,currentEnergyValue:e,energyValuePointName:s,pointList:r})}else R.oR.error(e(a.description))})).catch((e=>{console.log(e)}))}),1e3*(60+Math.floor(Math.random()*Math.floor(10))))}render(){const{t:e}=this.props;return(0,M.jsxs)(i.A,{className:"mb-3 overflow-hidden",style:{minWidth:"12rem",maxWidth:"25%"},children:[(0,M.jsxs)(Pe.A,{className:"bg-transparent position-relative",children:[(0,M.jsx)("h5",{children:this.props.sensorName}),(0,M.jsx)("div",{className:"real-time-user display-4 font-weight-normal",style:{display:this.state.currentEnergyValue?"inline":"none"},children:this.state.currentEnergyValue})]}),(0,M.jsxs)(l.A,{className:"fs--1 position-relative",children:[(0,M.jsxs)("p",{className:"pb-2",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.15)",display:this.state.energyValuePointName?"inline":"none"},children:[e("Trend in the last hour of Energy Value Point")," ",this.state.energyValuePointName]}),(0,M.jsxs)(Re.A,{flush:!0,className:"mt-4",children:[(0,M.jsxs)(He.A,{className:"bg-transparent d-flex justify-content-between px-0 py-1 font-weight-semi-bold border-top-0",style:{borderColor:we},children:[(0,M.jsx)("p",{className:"mb-0",children:e("Operating Characteristic Curve")}),(0,M.jsx)("p",{className:"mb-0",children:e("Realtime Value")})]}),this.state.pointList.map((e=>(0,M.jsxs)(He.A,{className:"bg-transparent d-flex justify-content-between px-0 py-1",style:{borderColor:we},children:[(0,M.jsx)("p",{className:"mb-0",children:e.name}),(0,M.jsx)("p",{className:"mb-0",children:e.value})]},(0,I.A)())))]})]})]})}}const Fe=(0,E.C)()(Ie),Oe=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e;const[g,x]=(0,s.useState)(0),[f,b]=(0,s.useState)(0),[y,j]=(0,s.useState)([]);(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[A,T]=(0,s.useState)(void 0),[U,E]=(0,s.useState)(void 0),[D,C]=(0,s.useState)([]),[k,N]=(0,s.useState)(!1);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),E(t),T([t[0]].map((e=>e.label)));let e=[t[0]].map((e=>e.value)),a=!1;fetch(w.hR+"/spaces/"+e+"/sensors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(a=!0),e.json()))).then((e=>{a?(e=JSON.parse(JSON.stringify([e])),console.log(e),C(e[0]),N(!0)):R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))}else R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);function Y(e){switch(e){case 1:return g>f-3&&f-3>=0?f-3:g;case 2:return g>f-3&&f-3>=0?f-2:g+1;case 3:return g>f-3&&f-3>=0?f-1:g+2;case 4:return g>f-3&&f-3>=0?f:g+3}}return(0,s.useEffect)((()=>{const e=D.length,t=Math.ceil(e/8);x(1),b(t),document.getElementById("cursor_2").hidden=!0,document.getElementById("cursor_3").hidden=!0,document.getElementById("cursor_4").hidden=!0,2==t&&(document.getElementById("cursor_2").hidden=!1),3==t&&(document.getElementById("cursor_2").hidden=!1,document.getElementById("cursor_3").hidden=!1),t>=4&&(document.getElementById("cursor_2").hidden=!1,document.getElementById("cursor_3").hidden=!1,document.getElementById("cursor_4").hidden=!1)}),[]),(0,s.useEffect)((()=>{j(D.slice(8*g-8,8*g))}),[]),(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Space Data")}),(0,M.jsx)(n.A,{active:!0,children:r("Environment Monitor")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:"ls text-uppercase text-600 font-weight-semi-bold mb-0",for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:U,onChange:(e,t)=>{T(t.map((e=>e.label)).join("/"));let a=e[e.length-1];N(!1);let s=!1;fetch(w.hR+"/spaces/"+a+"/sensors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(s=!0),e.json()))).then((e=>{s?(e=JSON.parse(JSON.stringify([e])),console.log(e),C(e[0]),N(!0)):R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:k})]})})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:y.map((e=>(0,M.jsx)(Fe,{sensorId:e.id,sensorName:e.name},(0,I.A)())))}),(0,M.jsxs)(Me.A,{children:[(0,M.jsx)(Ne.A,{children:(0,M.jsx)(Ye.A,{first:!0,href:"#",onClick:()=>x(1)})}),(0,M.jsx)(Ne.A,{children:(0,M.jsx)(Ye.A,{previous:!0,href:"#",onClick:()=>g-1>=1?x(g-1):null})}),(0,M.jsx)(Ne.A,{children:(0,M.jsx)(Ye.A,{href:"#",onClick:()=>x(Y(1)),children:Y(1)})}),(0,M.jsx)(Ne.A,{id:"cursor_2",children:(0,M.jsx)(Ye.A,{href:"#",onClick:()=>x(Y(2)),children:Y(2)})}),(0,M.jsx)(Ne.A,{id:"cursor_3",children:(0,M.jsx)(Ye.A,{href:"#",onClick:()=>x(Y(3)),children:Y(3)})}),(0,M.jsx)(Ne.A,{id:"cursor_4",children:(0,M.jsx)(Ye.A,{href:"#",onClick:()=>x(Y(4)),children:Y(4)})}),(0,M.jsx)(Ne.A,{children:(0,M.jsx)(Ye.A,{next:!0,href:"#",onClick:()=>g+1<=f?x(g+1):null})}),(0,M.jsx)(Ne.A,{children:(0,M.jsx)(Ye.A,{last:!0,href:"#",onClick:()=>x(f)})})]})]})})));var Le=a(64407);X.use([Le.a]);const Ge=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,h=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[a,t]);const[b,y]=(0,s.useState)([]),[A,v]=(0,s.useState)(void 0),[T,U]=(0,s.useState)([h.clone().startOf("month").toDate(),h.toDate()]),E={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},{isDark:D}=(0,s.useContext)(C.Ay),[k,N]=(0,s.useState)(!0),[Y,P]=(0,s.useState)(!0),[H,I]=(0,s.useState)({nodes:[],links:[]});(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/energyflowdiagrams",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify(t).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(t),y(t),v([t[0]].map((e=>e.value))),N(!1)):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const F="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Auxiliary System")}),(0,M.jsx)(n.A,{active:!0,children:r("Energy Flow Diagram")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(A),console.log(j()(T[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(T[1]).format("YYYY-MM-DDTHH:mm:ss")),N(!0),P(!1);let t=!1;fetch(w.hR+"/reports/energyflowdiagram?energyflowdiagramid="+A+"&reportingperiodstartdatetime="+j()(T[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(T[1]).format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{t?(console.log(e),I(e),console.log(H),N(!1),P(!0)):R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:F,for:"energyFlowDiagramSelect",children:r("Energy Flow Diagram")}),(0,M.jsx)(g.A,{type:"select",id:"energyFlowDiagramSelect",name:"energyFlowDiagramSelect",value:A,onChange:e=>{let{target:t}=e;return v(t.value)},children:b.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:e.label},t)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:F,for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:T,onChange:e=>{null==e?(U([null,null]),N(!0)):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),U([e[0],e[1]]),N(!1))},size:"md",style:{display:"block",zIndex:10},onClean:e=>{U([null,null])},locale:E,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:k,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:Y})]})})]})})})}),(0,M.jsx)(i.A,{className:"mb-3 fs--1",children:(0,M.jsx)(l.A,{className:"rounded-soft bg-gradient",children:(0,M.jsx)(Z.A,{echarts:X,option:(()=>{let e=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],t="#FFFFFF",a="rgba(0, 0, 0, 1)",s="rgba(255, 255, 255, 1)";D&&(e=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],t="#100C2A",a="rgba(255, 255, 255, 1)",s="rgba(0, 0, 0, 1)");let r=0;for(let o=0;o<H.nodes.length;o++){H.nodes[o].itemStyle={color:e[r%9]},r++}return H.links.forEach((function(e){null===e.value&&(e.value=0);let t=null,a=null;for(let r=0;r<H.nodes.length&&(e.source===H.nodes[r].name&&(t=H.nodes[r].itemStyle.color),e.target===H.nodes[r].name&&(a=H.nodes[r].itemStyle.color),null==t||null==a);r++);const s={type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:t},{offset:1,color:a}],globalCoord:!1};e.lineStyle={color:s}})),{backgroundColor:t,tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{name:"sankey",type:"sankey",data:H.nodes,links:H.links,focusNodeAdjacency:"allEdges",itemStyle:{borderWidth:1,borderColor:"#aaa"},lineStyle:{color:"gradient",curveness:.5},label:{color:a,fontFamily:"sans-serif",fontSize:13,fontStyle:"normal",fontWeight:"normal",textBorderWidth:1.5,textBorderColor:s}}]}})(),data:H,style:{width:"100%",height:600}})})})]})}))),Ve="rgba(255, 255, 255, 0.05)";class We extends s.Component{constructor(){super(...arguments),this._isMounted=!1,this.state={pointList:[]}}componentWillUnmount(){this._isMounted=!1,clearInterval(this.refreshInterval),clearTimeout(this.refreshTimeout)}componentDidMount(){console.log(this.props);const{t:e}=this.props;this._isMounted=!0;let t=!1;void 0!=this.props.distributionSystemID&&fetch(w.hR+"/reports/distributionsystem?distributionsystemid="+this.props.distributionSystemID,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((a=>{if(t){console.log(a);let e=[];a.forEach(((t,s)=>{a[s].points.forEach(((a,s)=>{let r={};r.circuit=t.name,r.point=a.name,r.value=a.value,r.units=a.units,e.push(r)}))})),this._isMounted&&this.setState({pointList:e})}else R.oR.error(e(a.description))})).catch((e=>{console.log(e)})),this.refreshInterval=setInterval((()=>{let t=!1;"undefined"!==typeof this.props.distributionSystemID&&fetch(w.hR+"/reports/distributionsystem?distributionsystemid="+this.props.distributionSystemID,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((a=>{if(t){console.log(a);let e=[];a.forEach(((t,s)=>{a[s].points.forEach(((a,s)=>{let r={};r.circuit=t.name,r.point=a.name,r.value=a.value,r.units=a.units,e.push(r)}))})),this._isMounted&&this.setState({pointList:e})}else R.oR.error(e(a.description))})).catch((e=>{console.log(e)}))}),1e3*(60+Math.floor(Math.random()*Math.floor(10))))}render(){const{t:e}=this.props;return(0,M.jsx)(i.A,{className:"h-100 bg-gradient",children:(0,M.jsx)(l.A,{className:"text-white fs--1",children:(0,M.jsxs)(Re.A,{flush:!0,className:"mt-4",children:[(0,M.jsxs)(He.A,{className:"bg-transparent d-flex justify-content-between px-0 py-1 font-weight-semi-bold border-top-0",style:{borderColor:Ve},children:[(0,M.jsx)("p",{className:"mb-0",children:e("Circuit")}),(0,M.jsx)("p",{className:"mb-0",children:e("Point")}),(0,M.jsx)("p",{className:"mb-0",children:e("Realtime Value")}),(0,M.jsx)("p",{className:"mb-0",children:e("Unit")})]}),this.state.pointList.map((e=>(0,M.jsxs)(He.A,{className:"bg-transparent d-flex justify-content-between px-0 py-1",style:{borderColor:Ve},children:[(0,M.jsx)("p",{className:"mb-0",children:e.circuit}),(0,M.jsx)("p",{className:"mb-0 ",children:e.point}),(0,M.jsx)("p",{className:"mb-0",children:e.value}),(0,M.jsx)("p",{className:"mb-0",children:e.units})]},(0,I.A)())))]})})})}}const ze=(0,E.C)()(We),Be=(e,t)=>{const a=(0,s.useRef)();(0,s.useEffect)((()=>{a.current=e})),(0,s.useEffect)((()=>{if(null!==t){let e=setInterval((function(){a.current()}),t);return()=>clearInterval(e)}}),[t])};var Je=a(65561),Ke=a.n(Je);a(1127),a(5449),a(88796),a(16553),a(33256),a(72808),a(78655);const qe=e=>{const t=e.pointid,a=e.pointname,r=a+" ( ID: "+t+" )",o=e.data,n="default-id";return(0,s.useEffect)((()=>{void 0==o.timeArr?(o.timeArr=[],o.valueArr=[]):(o.timeArr=o.timeArr.map((e=>e.replace("T"," ").replace("Z",""))),o.valueArr=o.valueArr),console.log("optionData in charts:"+o),console.log("pointname in charts:"+a);const e={textStyle:{color:"rgb(255,255,255,0.9)"},title:{text:r,x:"center",textStyle:{color:"rgb(255,255,255,0.9)"}},tooltip:{trigger:"axis"},legend:{top:20,right:50,data:["value"],textStyle:{color:"rgb(255,255,255,0.9)"}},xAxis:{data:o.timeArr},yAxis:{type:"value"},dataZoom:[{type:"slider",start:90,end:100}],series:[{type:"line",data:o.valueArr}]},t=X.init(document.getElementById(n));t.clear(),t.setOption(e)}),[]),(0,M.jsx)("div",{id:n,style:{height:"500px",marginTop:"30px"}})},Ze=e=>{if("charts"==e.type){const t=e.data;return(0,M.jsx)("div",{style:{display:e.display,width:"100%",height:"100%",position:"fixed",left:"0",right:"0",backgroundColor:"#061423",color:"#fff",position:"fixed !important",top:"0",bottom:"0",right:"0",left:"0",background:"rgb(0,0,0,0.5)"},children:(0,M.jsxs)("div",{style:{position:"fixed",height:"600px",width:"1600px",left:"50%",top:"60%",backgroundColor:"rgb(186, 186, 186)",transform:"translate(-50%,-50%)"},children:[(0,M.jsx)("button",{onClick:e.hide,style:{position:"absolute",right:"0",zIndex:"99999",color:"#000"},children:"\xd7"}),(0,M.jsx)("div",{children:(0,M.jsx)(qe,{data:t,pointid:e.pointid,pointname:e.pointname})})]})})}return(0,M.jsx)("div",{})},Xe=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e;(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[a,t]);const[p,h]=(0,s.useState)("none"),[x,f]=(0,s.useState)({x:0,y:0}),[b,y]=(0,s.useState)(!1),[j,A]=(0,s.useState)(""),[v,T]=(0,s.useState)(""),[U,E]=(0,s.useState)(""),[D,C]=(0,s.useState)({timeArr:[],valueArr:[]}),[k,N]=(0,s.useState)([]),[Y,P]=(0,s.useState)(void 0),[H,F]=(0,s.useState)([]),[O,L]=(0,s.useState)(!1),[G,V]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/distributionsystems",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{if(console.log(t),e){t=JSON.parse(JSON.stringify(t).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(t),N(t),P([t[0]].map((e=>e.value)));let e={};t.forEach(((t,a)=>{e[t.value]={__html:t.svg},V({__html:t.svg})})),F(e),L(!0)}else R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);Be((()=>{(()=>{let e=!1;fetch(w.hR+"/reports/pointrealtime",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{e&&(console.log(t),t.forEach((e=>{let t=document.getElementById("PT"+e.point_id);if(t){let a=t.getElementsByTagName("tspan");a&&a.length>0?a[a.length-1].textContent=parseFloat(e.value).toFixed(2):t.textContent=parseFloat(e.value).toFixed(2)}})))})).catch((e=>{console.log(e)}))})()}),3e3);const W=e=>{e.preventDefault();let t={x:e.pageX,y:e.pageY};var a=document.elementFromPoint(t.x,t.y);let s=a.getAttribute("id");if(!s||"text"!=a.tagName)return f(t),void y(!1);A(s.replace("PT","")),f(t),y(!0)};return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Auxiliary System")}),(0,M.jsx)(n.A,{active:!0,children:r("Distribution System")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{children:(0,M.jsxs)(c.A,{form:!0,style:{height:"38px"},children:[(0,M.jsx)(u.A,{xs:6,sm:3,style:{height:"37px"},children:(0,M.jsx)(m.A,{children:(0,M.jsx)(g.A,{type:"select",id:"distributionSystemSelect",name:"distributionSystemSelect",value:Y,onChange:e=>{P(e.target.value)},children:k.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:e.label},e.value)))})})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:O})]})})]})})})}),(0,M.jsxs)(c.A,{noGutters:!0,children:[(0,M.jsx)(u.A,{lg:"4",className:"pr-lg-2",children:(0,M.jsx)(ze,{distributionSystemID:Y})},(0,I.A)()),(0,M.jsx)(u.A,{lg:"8",className:"pr-lg-2",children:(0,M.jsx)("div",{onContextMenu:W,dangerouslySetInnerHTML:H[Y]})})]}),(0,M.jsxs)(i.A,{className:"bg-light",children:[(0,M.jsx)("div",{onContextMenu:W,className:"demo",children:(0,M.jsx)(Ke(),{data:[{label:"\u8d8b\u52bf\u56fe",value:"charts"}],position:{x:x.x,y:x.y},show:b,onMenuClick:e=>{y(!1),"charts"==e.value&&(h("block"),E("charts"))},onClose:e=>{y(!1)}})}),(0,M.jsx)("div",{children:(0,M.jsx)(Ze,{display:p,hide:()=>{h("none")},type:U,data:D,pointid:j,pointname:v})})]})]})}))),Qe=e=>(0,M.jsx)(c.A,{className:"flex-center py-5",children:(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsx)(_.A,{...e})})});Qe.defaultProps={type:"grow",size:"lg",color:"primary"};const $e=Qe;var et=a(56964),tt=a(98139),at=a.n(tt),st=a(82387),rt=(a(92382),a(86579));const ot=e=>{let{id:t,uuid:a,files:r,name:o,address:n,postal_code:i,serial_number:l,batteryState:d,batterySocPointValue:m,batteryPowerPointValue:p,photovoltaicPowerPointValue:h,loadPowerPointValue:g,gridPowerPointValue:x,alarms:f,isOnline:_,PCSRunState:b,index:y,t:j}=e;const{isDark:A}=(0,s.useContext)(C.Ay),{favouriteItemsDispatch:v}=(0,s.useContext)(C.z_),[T,S]=(0,s.useState)(!1);return(0,M.jsx)(u.A,{xs:12,className:at()("p-3",{"bg-100":A&&y%2!==0}),children:(0,M.jsx)("div",{className:"p-1",children:(0,M.jsxs)(c.A,{children:[(0,M.jsx)(u.A,{sm:5,md:4,children:(0,M.jsxs)("div",{className:"position-relative h-sm-100",children:[(0,M.jsx)(W.N_,{className:"d-block h-100",to:"/microgrid/details?uuid=".concat(a),target:"_blank",children:(0,M.jsx)("img",{className:"img-fluid fit-cover w-sm-100 h-sm-100 rounded absolute-sm-centered",src:r[0].src})}),_&&(0,M.jsx)(st.A,{color:"success",pill:!0,className:"position-absolute t-0 r-0 mr-2 mt-2 fs--2 z-index-2",children:j("Running"===b?"PCS Running":"Initializing"===b?"PCS Initializing":"Standby"===b?"PCS Standby":"Shutdown"===b?"PCS Shutdown":"Fault"===b?"PCS Fault":"PCS Unknown")})]})}),(0,M.jsx)(u.A,{sm:7,md:8,children:(0,M.jsxs)(c.A,{children:[(0,M.jsxs)(u.A,{lg:7,children:[(0,M.jsx)("h5",{className:"mt-3 mt-sm-0",children:(0,M.jsx)(W.N_,{to:"/microgrid/details?uuid=".concat(a),target:"_blank",children:o})}),(0,M.jsx)("p",{className:"fs--1 mb-2 mb-md-3",children:n}),(0,M.jsx)("p",{className:"fs--1 mb-2 mb-md-3",children:i}),(0,M.jsx)("p",{className:"fs--1 mb-2 mb-md-3",children:l}),(0,M.jsxs)("div",{className:"d-none d-lg-block",children:[(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Battery Power"),":",(0,M.jsxs)("strong",{children:[p," kW"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Photovoltaic Power"),":",(0,M.jsxs)("strong",{children:[h," kW"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Load Power"),":",(0,M.jsxs)("strong",{children:[g," kW"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Grid Power"),":",(0,M.jsxs)("strong",{children:[x," kW"]})]})]})]}),(0,M.jsxs)(u.A,{lg:5,tag:et.A,justify:"between",column:!0,children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("h4",{className:"fs-1 fs-md-2 text-warning mb-0",children:["SoC: ",m," %"]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Communication Status"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":_,"text-danger":!_}),children:j(_?"Communication Online":"Communication Offline")})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Battery State"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":"Charging"===d||"Discharging"===d,"text-danger":"Unknown"===d||"Stopped"===d}),children:j("Charging"===d?"Battery Charging":"Discharging"===d?"Battery Discharging":"Stopped"===d?"Battery Stopped":"Battery Unknown")})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("PCS Run State"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":"Running"===b,"text-danger":"Unknown"===b||"Initializing"===b||"Standby"===b||"Shutdown"===b||"Fault"===b}),children:j("Running"===b?"PCS Running":"Initializing"===b?"PCS Initializing":"Standby"===b?"PCS Standby":"Shutdown"===b?"PCS Shutdown":"Fault"===b?"PCS Fault":"PCS Unknown")})]})]}),(0,M.jsxs)("div",{className:"mt-md-2",children:[(0,M.jsx)(H.A,{color:"primary",size:"sm",icon:"tv",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:()=>window.open("microgrid/details?uuid=".concat(a),"_blank"),children:j("Monitoring")}),(0,M.jsx)(H.A,{color:"primary",size:"sm",icon:"chart-pie",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:()=>window.open("microgrid/reporting?uuid=".concat(a),"_blank"),children:j("Reporting")}),(0,M.jsxs)(H.A,{color:_?"outline-danger":"outline-secondary",size:"sm",className:at()("w-lg-100 mt-2 mr-2 mr-lg-0",{"border-300":!_}),icon:[_?"fas":"far","exclamation-triangle"],onClick:()=>window.open("notification","_blank"),children:[j("Fault Alarms"),"(",f.length,")"]}),(0,M.jsx)(H.A,{color:"primary",size:"sm",icon:"tools",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:()=>{S(!0),setTimeout((()=>{S(!1)}),1e3)},children:j("Maintenance")})]})]})]})})]})})})};ot.defaultProps={isOnline:!1,files:[]};const nt=(0,E.C)()(ot);var it=a(83407);const lt=e=>{let{meta:t,handler:a}=e;const{isRTL:r}=(0,s.useContext)(C.Ay),{total:o,pageNo:n,itemsPerPage:i,nextPageNo:l,prevPageNo:d}=t,{nextPage:c,prevPage:u,currentPage:m}=a;return(0,M.jsxs)(it.A,{tag:et.A,justify:"center",align:"center",className:"bg-light border-top",children:[(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:u,disabled:!d,children:(0,M.jsx)(rt.g,{icon:"chevron-".concat(r?"right":"left")})}),(0,S.Qf)(o,i).map((e=>(0,M.jsx)(f.A,{color:n===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:()=>m(e),children:e},e))),(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:c,disabled:!l,children:(0,M.jsx)(rt.g,{icon:"chevron-".concat(r?"left":"right")})})]})};var dt=a(37084),ct=a.n(dt);const ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const[a,r]=(0,s.useState)([]),[o,n]=(0,s.useState)([]),[i,l]=(0,s.useState)(0),[d,c]=(0,s.useState)(0),[u,m]=(0,s.useState)(t),[p,h]=(0,s.useState)(null),[g,x]=(0,s.useState)(1),[f,_]=(0,s.useState)(u),[b,y]=(0,s.useState)(!0),[j,A]=(0,s.useState)(!0);(0,s.useEffect)((()=>{r((0,S.i)(o[p-1])?o[p-1]:[])}),[r,u,o,p]),(0,s.useEffect)((()=>{n(ct()(e,u)),h(1),l(e.length)}),[u,h,e]),(0,s.useEffect)((()=>{x(u*(p-1)+1),_(u*(p-1)+a.length),y(p>1?p-1:null),A(p<d?p+1:null)}),[u,p,a,d]),(0,s.useEffect)((()=>{c(o.length)}),[o]);return{data:a,meta:{total:i,pageNo:p,lastPageNo:d,itemsPerPage:u,from:g,to:f,nextPageNo:j,prevPageNo:b},handler:{nextPage:()=>h(p+1),prevPage:()=>h(p-1),currentPage:h,perPage:m}}};var mt=a(37246);const pt=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:r,t:o}=e;(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),a=(0,S.UM)("user_name"),s=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(r("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",a,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(r("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,r]);const[n,d]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[h,x]=(0,s.useState)(!0),[f,_]=(0,s.useState)([]),[b,y]=(0,s.useState)(""),[j,A]=(0,s.useState)("");(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/reports/microgridlist",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{if(console.log(t),e){console.log(t),d([]),p([]);let e=[],s=[],r=[];t.length>0&&(A(t[0].longitude),y(t[0].latitude),t.forEach(((o,n)=>{let i={};i.id=t[n].id,i.name=t[n].name,i.uuid=t[n].uuid,i.address=t[n].address,i.postal_code=t[n].postal_code,i.latitude=t[n].latitude,i.longitude=t[n].longitude,i.serial_number=t[n].serial_number,i.files=[{id:t[n].uuid,src:a(74739)}],i.batteryState=t[n].battery_state,i.batterySocPointValue=t[n].battery_soc_point_value,i.batteryPowerPointValue=t[n].battery_power_point_value,i.photovoltaicPowerPointValue=t[n].photovoltaic_power_point_value,i.loadPowerPointValue=t[n].load_power_point_value,i.gridPowerPointValue=t[n].grid_power_point_value,i.PCSRunState=t[n].pcs_run_state,i.alarms=["supply temperature is high","return temperature is low"],i.isOnline=t[n].is_online,e.push(i),s.push(i.id),r.push({type:"Feature",geometry:{type:"Point",coordinates:[t[n].longitude,t[n].latitude]},properties:{title:t[n].name,description:t[n].description,uuid:t[n].uuid,url:"/microgrid/details"}})}))),d(e),p(s),console.log("microgridArray:"),console.log(e),console.log("microgridIds:"),console.log(s),x(!1),_(r)}else R.oR.error(o(t.description))})).catch((e=>{console.log(e)}))}),[]);const v={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},{data:T,meta:U,handler:E}=ut(m),{total:D,itemsPerPage:C,from:k,to:N}=U,{perPage:Y}=E;return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsxs)(i.A,{children:[(0,M.jsx)(l.A,{className:at()({"p-0  overflow-hidden":true,"pb-0":!1}),children:(0,M.jsxs)(c.A,{children:[(0,M.jsx)(u.A,{xs:8,children:h?(0,M.jsx)($e,{}):(0,M.jsx)(c.A,{noGutters:true,children:(0,S.i)(n)&&n.filter((e=>T.includes(e.id))).map(((e,t)=>(0,s.createElement)(nt,{...e,sliderSettings:v,key:e.id,index:t})))})}),(0,M.jsx)(u.A,{children:(0,M.jsx)(mt.A,{Latitude:b,Longitude:j,Zoom:10,Geojson:f})})]})}),(0,M.jsx)(lt,{meta:U,handler:E})]}),(0,M.jsx)(i.A,{className:"mb-3",children:(0,M.jsx)(l.A,{children:(0,M.jsx)(c.A,{className:"justify-content-between align-items-center",children:(0,M.jsxs)(u.A,{sm:"auto",className:"mb-2 mb-sm-0",tag:et.A,align:"center",children:[(0,M.jsx)("h6",{className:"mb-0 text-nowrap ml-2",children:o("Show Up to")}),(0,M.jsxs)(g.A,{id:"itemsPerPage",type:"select",bsSize:"sm",value:C,onChange:e=>{let{target:t}=e;return Y(Number(t.value))},children:[(0,M.jsx)("option",{value:5,children:"5"}),(0,M.jsx)("option",{value:10,children:"10"}),(0,M.jsx)("option",{value:20,children:"20"}),(0,M.jsx)("option",{value:D,children:o("All")})]}),(0,M.jsx)("h6",{className:"mb-0 text-nowrap ml-2",children:o("FROM - TO of TOTAL",{FROM:k,TO:N,TOTAL:D})})]})})})})]})})));var ht=a(58472),gt=a(18505),xt=a(97810),ft=a.n(xt);const _t=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:o}=e;const n=(0,r.zy)().search.split("=")[1];(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[d,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),[g,x]=(0,s.useState)(null),[f,_]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,A]=(0,s.useState)(null),[v,T]=(0,s.useState)(null),[U,E]=(0,s.useState)(null),[D,C]=(0,s.useState)(null),[k,N]=(0,s.useState)(null),[Y,P]=(0,s.useState)(null),[R,H]=(0,s.useState)(null),[F,O]=(0,s.useState)(null),[L,G]=(0,s.useState)(null),[V,W]=(0,s.useState)(null),[z,B]=(0,s.useState)(null),[J,K]=(0,s.useState)(null),[q,Z]=(0,s.useState)(null),[X,Q]=(0,s.useState)(null),[$,ee]=(0,s.useState)(null),[te,ae]=(0,s.useState)(null),[se,oe]=(0,s.useState)(null),[ne,ie]=(0,s.useState)(null),[le,de]=(0,s.useState)(null),[ce,ue]=(0,s.useState)(null),[me,pe]=(0,s.useState)(null),[he,ge]=(0,s.useState)(null),[xe,fe]=(0,s.useState)(null),[_e,be]=(0,s.useState)(null),[ye,je]=(0,s.useState)(null),[Ae,ve]=(0,s.useState)(null),[Te,Se]=(0,s.useState)(null),[Ue,Ee]=(0,s.useState)(),[De,Ce]=(0,s.useState)(),[ke,Me]=(0,s.useState)(),[Ne,Ye]=(0,s.useState)(),[Pe,Re]=(0,s.useState)(),[He,we]=(0,s.useState)(),[Ie,Fe]=(0,s.useState)(),[Oe,Le]=(0,s.useState)(),[Ge,Ve]=(0,s.useState)([]),[We,ze]=(0,s.useState)({}),[Je,Ke]=(0,s.useState)([]);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/reports/microgriddetails?uuid="+n,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t),Ee(t.microgrid.name),Ce(t.microgrid.serial_number),Me(t.microgrid.address),Ye(t.microgrid.postal_code),Re(t.microgrid.capacity),we(t.microgrid.latitude),Fe(t.microgrid.longitude),Le({__html:t.microgrid.svg});let e={};t.parameters.timestamps.forEach(((t,a)=>{e["a"+a]=t})),Ve(e);let a={};t.parameters.values.forEach(((e,t)=>{a["a"+t]=e})),ze(a);let s=Array();t.parameters.names.forEach(((e,t)=>{s.push({value:"a"+t,label:e})})),Ke(s),m(t.schedule.charge_start_time1),h(t.schedule.charge_end_time1),x(t.schedule.charge_start_time2),_(t.schedule.charge_end_time2),y(t.schedule.charge_start_time3),A(t.schedule.charge_end_time3),T(t.schedule.charge_start_time4),E(t.schedule.charge_end_time4),C(t.schedule.discharge_start_time1),N(t.schedule.discharge_end_time1),P(t.schedule.discharge_start_time2),H(t.schedule.discharge_end_time2),O(t.schedule.discharge_start_time3),G(t.schedule.discharge_end_time3),W(t.schedule.discharge_start_time4),B(t.schedule.discharge_end_time4),K(t.schedule.charge_start_time1_command_id),Z(t.schedule.charge_end_time1_command_id),Q(t.schedule.charge_start_time2_command_id),ee(t.schedule.charge_end_time2_command_id),ae(t.schedule.charge_start_time3_command_id),oe(t.schedule.charge_end_time3_command_id),ie(t.schedule.charge_start_time4_command_id),de(t.schedule.charge_end_time4_command_id),ue(t.schedule.discharge_start_time1_command_id),pe(t.schedule.discharge_end_time1_command_id),ge(t.schedule.discharge_start_time2_command_id),fe(t.schedule.discharge_end_time2_command_id),be(t.schedule.discharge_start_time3_command_id),je(t.schedule.discharge_end_time3_command_id),ve(t.schedule.discharge_start_time4_command_id),Se(t.schedule.discharge_end_time4_command_id)}})).catch((e=>{console.log(e)}))}),[]);Be((()=>{(()=>{let e=!1;fetch(w.hR+"/reports/pointrealtime",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{e&&(console.log(t),t.forEach((e=>{let t=document.getElementById("PT"+e.point_id);if(t){let a=t.getElementsByTagName("tspan");a&&a.length>0?a[a.length-1].textContent=parseFloat(e.value).toFixed(2):t.textContent=parseFloat(e.value).toFixed(2)}})))})).catch((e=>{console.log(e)}))})()}),1e4);return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsxs)(c.A,{noGutters:!0,children:[(0,M.jsx)(u.A,{lg:"8",className:"pr-lg-2",children:(0,M.jsx)("div",{dangerouslySetInnerHTML:Oe})},(0,I.A)()),(0,M.jsx)(u.A,{lg:"4",className:"pr-lg-2",children:(0,M.jsxs)(i.A,{className:"mb-3 fs--1",children:[(0,M.jsx)(gt.A,{title:o("General Information"),light:!1,titleClass:"text-lightSlateGray mb-0"}),(0,M.jsxs)(l.A,{className:"bg-light",children:[(0,M.jsx)("h6",{className:"mt-4",children:o("Name")}),(0,M.jsx)("div",{className:"mb-1",children:Ue}),(0,M.jsx)("h6",{className:"mt-4",children:o("Serial Number")}),(0,M.jsx)("div",{className:"mb-1",children:De}),(0,M.jsx)("h6",{className:"mt-4",children:o("Address")}),(0,M.jsx)("div",{className:"mb-1",children:ke}),(0,M.jsx)("h6",{className:"mt-4",children:o("Postal Code")}),(0,M.jsx)("div",{className:"mb-1",children:Ne}),(0,M.jsxs)("h6",{className:"mt-4",children:[o("Capacity")," (kW)"]}),(0,M.jsx)("div",{className:"mb-1",children:Pe}),(0,M.jsx)("h6",{className:"mt-4",children:o("Latitude")}),(0,M.jsx)("div",{className:"mb-1",children:He}),(0,M.jsx)("h6",{className:"mt-4",children:o("Longitude")}),(0,M.jsx)("div",{className:"mb-1",children:Ie})]})]})})]}),(0,M.jsx)(re,{reportingTitle:o("Operating Characteristic Curve"),baseTitle:"",labels:Ge,data:We,options:Je}),(0,M.jsxs)(i.A,{className:"mb-3 fs--1",children:[(0,M.jsx)(gt.A,{title:o("Charging Schedule"),light:!1,titleClass:"text-lightSlateGray mb-0"}),(0,M.jsx)(l.A,{className:"bg-light",children:(0,M.jsxs)(ht.A,{striped:!0,className:"border-bottom",children:[(0,M.jsx)("thead",{children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{children:"#"}),(0,M.jsx)("th",{children:o("Charge Start Time")}),(0,M.jsx)("th",{children:o("Charge End Time")}),(0,M.jsx)("th",{children:o("Discharge Start Time")}),(0,M.jsx)("th",{children:o("Discharge End Time")})]})}),(0,M.jsxs)("tbody",{children:[(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"1"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:d,onChange:e=>{m(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+J+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(d.substring(0,2))+parseInt(d.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:p,onChange:e=>{h(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+q+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(p.substring(0,2))+parseInt(p.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:D,onChange:e=>{C(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+ce+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(D.substring(0,2))+parseInt(D.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:k,onChange:e=>{N(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+me+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(k.substring(0,2))+parseInt(k.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]}),(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"2"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:g,onChange:e=>{x(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+X+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(g.substring(0,2))+parseInt(g.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:f,onChange:e=>{_(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+$+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(f.substring(0,2))+parseInt(f.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:Y,onChange:e=>{P(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+he+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(Y.substring(0,2))+parseInt(Y.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:R,onChange:e=>{H(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+xe+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(R.substring(0,2))+parseInt(R.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]}),(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"3"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:b,onChange:e=>{y(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+te+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(b.substring(0,2))+parseInt(b.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:j,onChange:e=>{A(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+se+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(j.substring(0,2))+parseInt(j.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:F,onChange:e=>{O(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+_e+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(F.substring(0,2))+parseInt(F.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:L,onChange:e=>{G(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+ye+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(L.substring(0,2))+parseInt(L.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]}),(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"4"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:v,onChange:e=>{T(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+ne+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(v.substring(0,2))+parseInt(v.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:U,onChange:e=>{E(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+le+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(U.substring(0,2))+parseInt(U.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:V,onChange:e=>{W(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+Ae+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(V.substring(0,2))+parseInt(V.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:z,onChange:e=>{B(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+Te+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(z.substring(0,2))+parseInt(z.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]})]})]})})]})]})}))),bt=((0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:o}=e,n=j()();const y=(0,r.zy)().search.split("=")[1];(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime)),null!==y&&y?(he(!0),xe(!0)):(he(!1),xe(!1))}));const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,Y]=(0,s.useState)([]),[P,I]=(0,s.useState)([]),[L,W]=(0,s.useState)(void 0),[z,B]=(0,s.useState)("month-on-month"),[J,K]=(0,s.useState)("daily"),[q,Z]=(0,s.useState)(void 0),[X,Q]=(0,s.useState)([n.clone().subtract(1,"weeks").subtract(1,"months").toDate(),n.clone().subtract(1,"months").toDate()]),[$,ee]=(0,s.useState)(!0),[te,ae]=(0,s.useState)([n.clone().subtract(1,"weeks").toDate(),n.toDate()]),se={sunday:o("sunday"),monday:o("monday"),tuesday:o("tuesday"),wednesday:o("wednesday"),thursday:o("thursday"),friday:o("friday"),saturday:o("saturday"),ok:o("ok"),today:o("today"),yesterday:o("yesterday"),hours:o("hours"),minutes:o("minutes"),seconds:o("seconds"),last7Days:o("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},oe={display:"block",zIndex:10},{language:ne}=(0,s.useContext)(C.Ay),[ie,le]=(0,s.useState)(!0),[de,ce]=(0,s.useState)(!0),[ue,me]=(0,s.useState)(!0),[pe,he]=(0,s.useState)(!1),[ge,xe]=(0,s.useState)(!1),[fe,_e]=(0,s.useState)(),[be,ye]=(0,s.useState)(),[je,Ae]=(0,s.useState)(),[ve,Te]=(0,s.useState)(),[Se,Ue]=(0,s.useState)(),[Ee,De]=(0,s.useState)(),[Ce,ke]=(0,s.useState)(),[Me,Ne]=(0,s.useState)(),[Ye,Pe]=(0,s.useState)([]),[Re,He]=(0,s.useState)({a0:[]}),[we,Ie]=(0,s.useState)({a0:[]}),[Fe,Oe]=(0,s.useState)({a0:""}),[Le,Ge]=(0,s.useState)({a0:"()"}),[Ve,We]=(0,s.useState)({a0:(0).toFixed(2)}),[ze,Be]=(0,s.useState)({a0:[]}),[Je,Ke]=(0,s.useState)({a0:[]}),[qe,Ze]=(0,s.useState)([]),[Xe,Qe]=(0,s.useState)([]),[$e,et]=(0,s.useState)({}),[tt,at]=(0,s.useState)([]),[st,rt]=(0,s.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),[ot,nt]=(0,s.useState)([]),[it,lt]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;if(null!==y&&y){let e=w.hR+"/reports/microgridreporting?uuid="+y+"&periodtype="+J+"&baseperiodstartdatetime="+(null!=X[0]?j()(X[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=X[1]?j()(X[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(te[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(te[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+ne;dt(e)}else fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Z(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)));let e=!1;fetch(w.hR+"/spaces/"+[t[0]].map((e=>e.value))+"/microgrids",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(t),Y(t[0]),I(t[0]),t[0].length>0?(W(t[0][0].value),le(!1)):(W(void 0),le(!0))):R.oR.error(o(t.description))})).catch((e=>{console.log(e)}))}else R.oR.error(o(t.description))})).catch((e=>{console.log(e)}))}),[]);const dt=e=>{le(!0),ce(!1),me(!0),nt([]);let t=!1;fetch(e,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e),null!==y&&y&&(I([{id:e.microgrid.id,label:e.microgrid.name}]),W(e.microgrid.id)),_e(e.microgrid.name),ye(e.microgrid.serial_number),Ae(e.microgrid.address),Te(e.microgrid.postal_code),Ue(e.microgrid.capacity),De(e.microgrid.latitude),ke(e.microgrid.longitude),Ne({__html:e.microgrid.svg});let t={};e.parameters.timestamps.forEach(((e,a)=>{t["a"+a]=e})),Qe(t);let a={};e.parameters.values.forEach(((e,t)=>{a["a"+t]=e})),et(a);let s=Array();e.parameters.names.forEach(((e,t)=>{s.push({value:"a"+t,label:e})})),at(s);let r=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.name=e.reporting_period.names[a],s.unit=e.reporting_period.units[a],s.subtotal=e.reporting_period.subtotals[a],s.increment_rate=parseFloat(100*e.reporting_period.increment_rates[a]).toFixed(2)+"%",r.push(s)})),Pe(r);let o={};e.reporting_period.names.forEach(((e,t)=>{o["a"+t]=e})),Oe(o);let n={};e.reporting_period.units.forEach(((e,t)=>{n["a"+t]="("+e+")"})),Ge(n);let i={};e.reporting_period.timestamps.forEach(((e,t)=>{i["a"+t]=e})),Be(i);let l={};e.reporting_period.values.forEach(((e,t)=>{l["a"+t]=e})),console.log(l),Ke(l);let d={};e.reporting_period.subtotals.forEach(((e,t)=>{d["a"+t]=e.toFixed(2)})),We(d);let c=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];c.push({value:"a"+a,label:t+" ("+s+")"})})),Ze(c),lt(e.excel_bytes_base64),le(!1),ce(!0),me(!1)}else R.oR.error(o(e.description)),ce(!0),le(!1)})).catch((e=>{console.log(e)}))},ct="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(L),console.log(z),console.log(J),console.log(null!=X[0]?j()(X[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=X[1]?j()(X[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(te[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(te[1]).format("YYYY-MM-DDTHH:mm:ss"));let t=w.hR+"/reports/microgridreporting?id="+L+"&periodtype="+J+"&baseperiodstartdatetime="+(null!=X[0]?j()(X[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=X[1]?j()(X[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(te[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(te[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+ne;dt(t)},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,hidden:pe,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:ct,for:"space",children:o("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:q,onChange:(e,t)=>{U(t.map((e=>e.label)).join("/")),D(e[e.length-1]);let a=!1;fetch(w.hR+"/spaces/"+e[e.length-1]+"/microgrids",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(a=!0),e.json()))).then((e=>{a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),Y(e[0]),I(e[0]),e[0].length>0?(W(e[0][0].value),le(!1)):(W(void 0),le(!0))):R.oR.error(o(e.description))})).catch((e=>{console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:ct,for:"microgridSelect",children:o("Microgrid")}),(0,M.jsxs)(d.A,{inline:!0,children:[(0,M.jsx)(h.A,{placeholder:o("Search"),onChange:e=>{let{target:t}=e;const a=t.value.toLowerCase(),s=k.filter((e=>e.label.toLowerCase().includes(a)));I(a.length?s:k),s.length>0?(W(s[0].value),le(!1)):(W(void 0),le(!0)),document.getElementById("icrogridSelect").value=s[0].value},hidden:ge}),(0,M.jsx)(g.A,{type:"select",id:"microgridSelect",name:"microgridSelect",onChange:e=>{let{target:t}=e;return W(t.value)},children:P.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:ct,for:"comparisonType",children:o("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),B(t.value),"year-over-year"===t.value?(ee(!0),Q([j()(te[0]).subtract(1,"years").toDate(),j()(te[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(ee(!0),Q([j()(te[0]).subtract(1,"months").toDate(),j()(te[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(ee(!1),Q([j()(te[0]).subtract(1,"days").toDate(),j()(te[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(Q([null,null]),ee(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:o(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:ct,for:"periodType",children:o("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return K(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:o(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:ct,for:"basePeriodDateRangePicker",children:[o("Base Period"),o("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:$,format:"yyyy-MM-dd HH:mm:ss",value:X,onChange:e=>{null==e?Q([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Q([e[0],e[1]]))},size:"md",style:oe,onClean:e=>{Q([null,null])},locale:se,placeholder:o("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:ct,for:"reportingPeriodDateRangePicker",children:o("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:te,onChange:e=>{null==e?ae([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),ae([e[0],e[1]]),"year-over-year"===z?Q([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===z&&Q([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:oe,onClean:e=>{ae([null,null])},locale:se,placeholder:o("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ie,children:o("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:de})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ue,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+it).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="microgridreproting.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:o("Export")})]})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:Ye.map((e=>(0,M.jsx)(T.A,{title:e.name+"("+e.unit+")",color:"success",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name)))}),(0,M.jsx)(N,{reportingTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:Fe,VALUE:Ve,UNIT:Le},baseTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:{a0:""},VALUE:{a0:(0).toFixed(2)},UNIT:{a0:"()"}},reportingTooltipTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:{a0:""},VALUE:null,UNIT:{a0:"()"}},baseTooltipTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:{a0:""},VALUE:null,UNIT:{a0:"()"}},reportingLabels:ze,reportingData:Je,baseLabels:ze,baseData:Je,rates:{a0:[]},options:qe}),(0,M.jsx)(re,{reportingTitle:o("Operating Characteristic Curve"),baseTitle:"",labels:Xe,data:$e,options:tt})]})})))),yt=e=>{let{id:t,uuid:a,files:r,name:o,address:n,postal_code:i,serial_number:l,batteryOperatingState:d,batterySocPointValue:m,batteryPowerPointValue:p,photovoltaicPowerPointValue:h,loadPowerPointValue:g,gridPowerPointValue:x,alarms:f,isOnline:_,PCSRunState:b,index:y,t:j}=e;const{isDark:A}=(0,s.useContext)(C.Ay),{favouriteItemsDispatch:v}=(0,s.useContext)(C.z_),[T,S]=(0,s.useState)(!1);return(0,M.jsx)(u.A,{xs:12,className:at()("p-3",{"bg-100":A&&y%2!==0}),children:(0,M.jsx)("div",{className:"p-1",children:(0,M.jsxs)(c.A,{children:[(0,M.jsx)(u.A,{sm:5,md:4,children:(0,M.jsxs)("div",{className:"position-relative h-sm-100",children:[(0,M.jsx)(W.N_,{className:"d-block h-100",to:"/energystoragepowerstation/details?uuid=".concat(a),target:"_blank",children:(0,M.jsx)("img",{className:"img-fluid fit-cover w-sm-100 h-sm-100 rounded absolute-sm-centered",src:r[0].src})}),_&&(0,M.jsx)(st.A,{color:"success",pill:!0,className:"position-absolute t-0 r-0 mr-2 mt-2 fs--2 z-index-2",children:j("Running"===b?"PCS Running":"Initializing"===b?"PCS Initializing":"Standby"===b?"PCS Standby":"Shutdown"===b?"PCS Shutdown":"Fault"===b?"PCS Fault":"PCS Unknown")})]})}),(0,M.jsx)(u.A,{sm:7,md:8,children:(0,M.jsxs)(c.A,{children:[(0,M.jsxs)(u.A,{lg:7,children:[(0,M.jsx)("h5",{className:"mt-3 mt-sm-0",children:(0,M.jsx)(W.N_,{to:"/energystoragepowerstation/details?uuid=".concat(a),target:"_blank",children:o})}),(0,M.jsx)("p",{className:"fs--1 mb-2 mb-md-3",children:n}),(0,M.jsx)("p",{className:"fs--1 mb-2 mb-md-3",children:i}),(0,M.jsx)("p",{className:"fs--1 mb-2 mb-md-3",children:l}),(0,M.jsxs)("div",{className:"d-none d-lg-block",children:[(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Battery Power"),":",(0,M.jsxs)("strong",{children:[p," kW"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Photovoltaic Power"),":",(0,M.jsxs)("strong",{children:[h," kW"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Load Power"),":",(0,M.jsxs)("strong",{children:[g," kW"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Grid Power"),":",(0,M.jsxs)("strong",{children:[x," kW"]})]})]})]}),(0,M.jsxs)(u.A,{lg:5,tag:et.A,justify:"between",column:!0,children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("h4",{className:"fs-1 fs-md-2 text-warning mb-0",children:["SoC: ",m," %"]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Communication Status"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":_,"text-danger":!_}),children:j(_?"Communication Online":"Communication Offline")})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Battery Operating State"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":"Normal"===d||"Standby"===d||"ProhibitDisCharging"===d||"ProhibitCharging"===d,"text-danger":"Unknown"===d||"Fault"===d||"Warning"===d}),children:j("Normal"===d?"Battery Normal":"Standby"===d?"Battery Standby":"ProhibitDisCharging"===d?"Battery Prohibit DisCharging":"ProhibitCharging"===d?"Battery Prohibit Charging":"Fault"===d?"Battery Fault":"Warning"===d?"Battery Warning":"Battery Unknown")})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("PCS Run State"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":"Running"===b,"text-danger":"Unknown"===b||"Initializing"===b||"Standby"===b||"Shutdown"===b||"Fault"===b}),children:j("Running"===b?"PCS Running":"Initializing"===b?"PCS Initializing":"Standby"===b?"PCS Standby":"Shutdown"===b?"PCS Shutdown":"Fault"===b?"PCS Fault":"PCS Unknown")})]})]}),(0,M.jsxs)("div",{className:"mt-md-2",children:[(0,M.jsx)(H.A,{color:"primary",size:"sm",icon:"tv",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:()=>window.open("energystoragepowerstation/details?uuid=".concat(a),"_blank"),children:j("Monitoring")}),(0,M.jsx)(H.A,{color:"primary",size:"sm",icon:"chart-pie",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:()=>window.open("energystoragepowerstation/reporting?uuid=".concat(a),"_blank"),children:j("Reporting")}),(0,M.jsxs)(H.A,{color:_?"outline-danger":"outline-secondary",size:"sm",className:at()("w-lg-100 mt-2 mr-2 mr-lg-0",{"border-300":!_}),icon:[_?"fas":"far","exclamation-triangle"],onClick:()=>window.open("notification","_blank"),children:[j("Fault Alarms"),"(",f.length,")"]}),(0,M.jsx)(H.A,{color:"primary",size:"sm",icon:"tools",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:()=>{S(!0),setTimeout((()=>{S(!1)}),1e3)},children:j("Maintenance")})]})]})]})})]})})})};yt.defaultProps={isOnline:!1,files:[]};const jt=(0,E.C)()(yt),At=e=>{let{meta:t,handler:a}=e;const{isRTL:r}=(0,s.useContext)(C.Ay),{total:o,pageNo:n,itemsPerPage:i,nextPageNo:l,prevPageNo:d}=t,{nextPage:c,prevPage:u,currentPage:m}=a;return(0,M.jsxs)(it.A,{tag:et.A,justify:"center",align:"center",className:"bg-light border-top",children:[(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:u,disabled:!d,children:(0,M.jsx)(rt.g,{icon:"chevron-".concat(r?"right":"left")})}),(0,S.Qf)(o,i).map((e=>(0,M.jsx)(f.A,{color:n===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:()=>m(e),children:e},e))),(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:c,disabled:!l,children:(0,M.jsx)(rt.g,{icon:"chevron-".concat(r?"left":"right")})})]})},vt=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:r,t:o}=e;(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),a=(0,S.UM)("user_name"),s=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(r("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",a,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(r("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,r]);const[n,d]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[h,x]=(0,s.useState)(!0),[f,_]=(0,s.useState)([]),[b,y]=(0,s.useState)(""),[j,A]=(0,s.useState)("");(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/reports/energystoragepowerstationlist",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{if(console.log(t),e){console.log(t),d([]),p([]);let e=[],s=[],r=[];t.length>0&&(A(t[0].longitude),y(t[0].latitude),t.forEach(((o,n)=>{let i={};i.id=t[n].id,i.name=t[n].name,i.uuid=t[n].uuid,i.address=t[n].address,i.postal_code=t[n].postal_code,i.latitude=t[n].latitude,i.longitude=t[n].longitude,i.serial_number=t[n].serial_number,i.files=[{id:t[n].uuid,src:a(47551)}],i.batteryOperatingState=t[n].battery_operating_state,i.batterySocPointValue=t[n].battery_soc_point_value,i.batteryPowerPointValue=t[n].battery_power_point_value,i.photovoltaicPowerPointValue=t[n].photovoltaic_power_point_value,i.loadPowerPointValue=t[n].load_power_point_value,i.gridPowerPointValue=t[n].grid_power_point_value,i.PCSRunState=t[n].pcs_run_state,i.alarms=["supply temperature is high","return temperature is low"],i.isOnline=t[n].is_online,e.push(i),s.push(i.id),r.push({type:"Feature",geometry:{type:"Point",coordinates:[t[n].longitude,t[n].latitude]},properties:{title:t[n].name,description:t[n].description,uuid:t[n].uuid,url:"/energystoragepowerstation/details"}})}))),d(e),p(s),console.log("energyStoragePowerStationArray:"),console.log(e),console.log("energyStoragePowerStationIds:"),console.log(s),x(!1),_(r)}else R.oR.error(o(t.description))})).catch((e=>{console.log(e)}))}),[o]);const v={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},{data:T,meta:U,handler:E}=ut(m),{total:D,itemsPerPage:C,from:k,to:N}=U,{perPage:Y}=E;return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsxs)(i.A,{children:[(0,M.jsx)(l.A,{className:at()({"p-0  overflow-hidden":true,"pb-0":!1}),children:(0,M.jsxs)(c.A,{children:[(0,M.jsx)(u.A,{xs:8,children:h?(0,M.jsx)($e,{}):(0,M.jsx)(c.A,{noGutters:true,children:(0,S.i)(n)&&n.filter((e=>T.includes(e.id))).map(((e,t)=>(0,s.createElement)(jt,{...e,sliderSettings:v,key:e.id,index:t})))})}),(0,M.jsx)(u.A,{children:(0,M.jsx)(mt.A,{Latitude:b,Longitude:j,Zoom:10,Geojson:f})})]})}),(0,M.jsx)(At,{meta:U,handler:E})]}),(0,M.jsx)(i.A,{className:"mb-3",children:(0,M.jsx)(l.A,{children:(0,M.jsx)(c.A,{className:"justify-content-between align-items-center",children:(0,M.jsxs)(u.A,{sm:"auto",className:"mb-2 mb-sm-0",tag:et.A,align:"center",children:[(0,M.jsx)("h6",{className:"mb-0 text-nowrap ml-2",children:o("Show Up to")}),(0,M.jsxs)(g.A,{id:"itemsPerPage",type:"select",bsSize:"sm",value:C,onChange:e=>{let{target:t}=e;return Y(Number(t.value))},children:[(0,M.jsx)("option",{value:5,children:"5"}),(0,M.jsx)("option",{value:10,children:"10"}),(0,M.jsx)("option",{value:20,children:"20"}),(0,M.jsx)("option",{value:D,children:o("All")})]}),(0,M.jsx)("h6",{className:"mb-0 text-nowrap ml-2",children:o("FROM - TO of TOTAL",{FROM:k,TO:N,TOTAL:D})})]})})})})]})}))),Tt=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:o}=e;const n=(0,r.zy)().search.split("=")[1];(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[d,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),[g,x]=(0,s.useState)(null),[f,_]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,A]=(0,s.useState)(null),[v,T]=(0,s.useState)(null),[U,E]=(0,s.useState)(null),[D,C]=(0,s.useState)(null),[k,N]=(0,s.useState)(null),[Y,P]=(0,s.useState)(null),[R,H]=(0,s.useState)(null),[F,O]=(0,s.useState)(null),[L,G]=(0,s.useState)(null),[V,W]=(0,s.useState)(null),[z,B]=(0,s.useState)(null),[J,K]=(0,s.useState)(null),[q,Z]=(0,s.useState)(null),[X,Q]=(0,s.useState)(null),[$,ee]=(0,s.useState)(null),[te,ae]=(0,s.useState)(null),[se,oe]=(0,s.useState)(null),[ne,ie]=(0,s.useState)(null),[le,de]=(0,s.useState)(null),[ce,ue]=(0,s.useState)(null),[me,pe]=(0,s.useState)(null),[he,ge]=(0,s.useState)(null),[xe,fe]=(0,s.useState)(null),[_e,be]=(0,s.useState)(null),[ye,je]=(0,s.useState)(null),[Ae,ve]=(0,s.useState)(null),[Te,Se]=(0,s.useState)(null),[Ue,Ee]=(0,s.useState)(),[De,Ce]=(0,s.useState)(),[ke,Me]=(0,s.useState)(),[Ne,Ye]=(0,s.useState)(),[Pe,Re]=(0,s.useState)(),[He,we]=(0,s.useState)(),[Ie,Fe]=(0,s.useState)(),[Oe,Le]=(0,s.useState)([]),[Ge,Ve]=(0,s.useState)({}),[We,ze]=(0,s.useState)([]);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/reports/energystoragepowerstationdetails?uuid="+n,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t),Ee(t.energy_storage_power_station.name),Ce(t.energy_storage_power_station.address),Me(t.energy_storage_power_station.postal_code),Ye(t.energy_storage_power_station.capacity),Re(t.energy_storage_power_station.latitude),we(t.energy_storage_power_station.longitude),Fe({__html:t.energy_storage_power_station.svg});let e={};t.parameters.timestamps.forEach(((t,a)=>{e["a"+a]=t})),Le(e);let a={};t.parameters.values.forEach(((e,t)=>{a["a"+t]=e})),Ve(a);let s=Array();t.parameters.names.forEach(((e,t)=>{s.push({value:"a"+t,label:e})})),ze(s),m(t.schedule.charge_start_time1),h(t.schedule.charge_end_time1),x(t.schedule.charge_start_time2),_(t.schedule.charge_end_time2),y(t.schedule.charge_start_time3),A(t.schedule.charge_end_time3),T(t.schedule.charge_start_time4),E(t.schedule.charge_end_time4),C(t.schedule.discharge_start_time1),N(t.schedule.discharge_end_time1),P(t.schedule.discharge_start_time2),H(t.schedule.discharge_end_time2),O(t.schedule.discharge_start_time3),G(t.schedule.discharge_end_time3),W(t.schedule.discharge_start_time4),B(t.schedule.discharge_end_time4),K(t.schedule.charge_start_time1_command_id),Z(t.schedule.charge_end_time1_command_id),Q(t.schedule.charge_start_time2_command_id),ee(t.schedule.charge_end_time2_command_id),ae(t.schedule.charge_start_time3_command_id),oe(t.schedule.charge_end_time3_command_id),ie(t.schedule.charge_start_time4_command_id),de(t.schedule.charge_end_time4_command_id),ue(t.schedule.discharge_start_time1_command_id),pe(t.schedule.discharge_end_time1_command_id),ge(t.schedule.discharge_start_time2_command_id),fe(t.schedule.discharge_end_time2_command_id),be(t.schedule.discharge_start_time3_command_id),je(t.schedule.discharge_end_time3_command_id),ve(t.schedule.discharge_start_time4_command_id),Se(t.schedule.discharge_end_time4_command_id)}})).catch((e=>{console.log(e)}))}),[n]);Be((()=>{(()=>{let e=!1;fetch(w.hR+"/reports/pointrealtime",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{e&&(console.log(t),t.forEach((e=>{let t=document.getElementById("PT"+e.point_id);if(t){let a=t.getElementsByTagName("tspan");a&&a.length>0?a[a.length-1].textContent=parseFloat(e.value).toFixed(2):t.textContent=parseFloat(e.value).toFixed(2)}})))})).catch((e=>{console.log(e)}))})()}),1e4);return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsxs)(c.A,{noGutters:!0,children:[(0,M.jsx)(u.A,{lg:"8",className:"pr-lg-2",children:(0,M.jsx)("div",{dangerouslySetInnerHTML:Ie})},(0,I.A)()),(0,M.jsx)(u.A,{lg:"4",className:"pr-lg-2",children:(0,M.jsxs)(i.A,{className:"mb-3 fs--1",children:[(0,M.jsx)(gt.A,{title:o("General Information"),light:!1,titleClass:"text-lightSlateGray mb-0"}),(0,M.jsxs)(l.A,{className:"bg-light",children:[(0,M.jsx)("h6",{className:"mt-4",children:o("Name")}),(0,M.jsx)("div",{className:"mb-1",children:Ue}),(0,M.jsx)("h6",{className:"mt-4",children:o("Address")}),(0,M.jsx)("div",{className:"mb-1",children:De}),(0,M.jsx)("h6",{className:"mt-4",children:o("Postal Code")}),(0,M.jsx)("div",{className:"mb-1",children:ke}),(0,M.jsxs)("h6",{className:"mt-4",children:[o("Capacity")," (kW)"]}),(0,M.jsx)("div",{className:"mb-1",children:Ne}),(0,M.jsx)("h6",{className:"mt-4",children:o("Latitude")}),(0,M.jsx)("div",{className:"mb-1",children:Pe}),(0,M.jsx)("h6",{className:"mt-4",children:o("Longitude")}),(0,M.jsx)("div",{className:"mb-1",children:He})]})]})})]}),(0,M.jsx)(re,{reportingTitle:o("Operating Characteristic Curve"),baseTitle:"",labels:Oe,data:Ge,options:We}),(0,M.jsxs)(i.A,{className:"mb-3 fs--1",children:[(0,M.jsx)(gt.A,{title:o("Charging Schedule"),light:!1,titleClass:"text-lightSlateGray mb-0"}),(0,M.jsx)(l.A,{className:"bg-light",children:(0,M.jsxs)(ht.A,{striped:!0,className:"border-bottom",children:[(0,M.jsx)("thead",{children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{children:"#"}),(0,M.jsx)("th",{children:o("Charge Start Time")}),(0,M.jsx)("th",{children:o("Charge End Time")}),(0,M.jsx)("th",{children:o("Discharge Start Time")}),(0,M.jsx)("th",{children:o("Discharge End Time")})]})}),(0,M.jsxs)("tbody",{children:[(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"1"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:d,onChange:e=>{m(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+J+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(d.substring(0,2))+parseInt(d.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:p,onChange:e=>{h(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+q+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(p.substring(0,2))+parseInt(p.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:D,onChange:e=>{C(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+ce+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(D.substring(0,2))+parseInt(D.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:k,onChange:e=>{N(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+me+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(k.substring(0,2))+parseInt(k.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]}),(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"2"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:g,onChange:e=>{x(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+X+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(g.substring(0,2))+parseInt(g.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:f,onChange:e=>{_(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+$+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(f.substring(0,2))+parseInt(f.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:Y,onChange:e=>{P(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+he+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(Y.substring(0,2))+parseInt(Y.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:R,onChange:e=>{H(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+xe+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(R.substring(0,2))+parseInt(R.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]}),(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"3"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:b,onChange:e=>{y(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+te+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(b.substring(0,2))+parseInt(b.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:j,onChange:e=>{A(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+se+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(j.substring(0,2))+parseInt(j.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:F,onChange:e=>{O(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+_e+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(F.substring(0,2))+parseInt(F.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:L,onChange:e=>{G(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+ye+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(L.substring(0,2))+parseInt(L.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]}),(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{scope:"row",children:"4"}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:v,onChange:e=>{T(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+ne+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(v.substring(0,2))+parseInt(v.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:U,onChange:e=>{E(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+le+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(U.substring(0,2))+parseInt(U.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:V,onChange:e=>{W(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+Ae+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(V.substring(0,2))+parseInt(V.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})}),(0,M.jsx)("td",{children:(0,M.jsx)(ft(),{dateFormat:!1,timeFormat:"HH:mm",value:z,onChange:e=>{B(e.format("HH:mm"))},onClose:()=>{let e=!1;fetch(w.hR+"/commands/"+Te+"/send",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{set_value:256*parseInt(z.substring(0,2))+parseInt(z.substring(3))}})}).then((t=>(t.ok&&(e=!0),t.json()))).catch((e=>{console.log(e)}))}})})]})]})]})})]})]})}))),St=((0,A.Ay)((()=>a.e(377).then(a.bind(a,55377)))),(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:o}=e,n=j()();const y=(0,r.zy)().search.split("=")[1];(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime)),null!==y&&y?(he(!0),xe(!0)):(he(!1),xe(!1))}));const[A,U]=(0,s.useState)(void 0),[E,D]=(0,s.useState)(void 0),[k,Y]=(0,s.useState)([]),[P,I]=(0,s.useState)([]),[L,W]=(0,s.useState)(void 0),[z,B]=(0,s.useState)("month-on-month"),[J,K]=(0,s.useState)("daily"),[q,Z]=(0,s.useState)(void 0),[X,Q]=(0,s.useState)([n.clone().subtract(1,"weeks").subtract(1,"months").toDate(),n.clone().subtract(1,"months").toDate()]),[$,ee]=(0,s.useState)(!0),[te,ae]=(0,s.useState)([n.clone().subtract(1,"weeks").toDate(),n.toDate()]),se={sunday:o("sunday"),monday:o("monday"),tuesday:o("tuesday"),wednesday:o("wednesday"),thursday:o("thursday"),friday:o("friday"),saturday:o("saturday"),ok:o("ok"),today:o("today"),yesterday:o("yesterday"),hours:o("hours"),minutes:o("minutes"),seconds:o("seconds"),last7Days:o("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},oe={display:"block",zIndex:10},{language:ne}=(0,s.useContext)(C.Ay),[ie,le]=(0,s.useState)(!0),[de,ce]=(0,s.useState)(!0),[ue,me]=(0,s.useState)(!0),[pe,he]=(0,s.useState)(!1),[ge,xe]=(0,s.useState)(!1),[fe,_e]=(0,s.useState)(),[be,ye]=(0,s.useState)(),[je,Ae]=(0,s.useState)(),[ve,Te]=(0,s.useState)(),[Se,Ue]=(0,s.useState)(),[Ee,De]=(0,s.useState)(),[Ce,ke]=(0,s.useState)(),[Me,Ne]=(0,s.useState)(),[Ye,Pe]=(0,s.useState)([]),[Re,He]=(0,s.useState)({a0:[]}),[we,Ie]=(0,s.useState)({a0:[]}),[Fe,Oe]=(0,s.useState)({a0:""}),[Le,Ge]=(0,s.useState)({a0:"()"}),[Ve,We]=(0,s.useState)({a0:(0).toFixed(2)}),[ze,Be]=(0,s.useState)({a0:[]}),[Je,Ke]=(0,s.useState)({a0:[]}),[qe,Ze]=(0,s.useState)([]),[Xe,Qe]=(0,s.useState)([]),[$e,et]=(0,s.useState)({}),[tt,at]=(0,s.useState)([]),[st,rt]=(0,s.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),[ot,nt]=(0,s.useState)([]),[it,lt]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{let e=!1;if(null!==y&&y){let e=w.hR+"/reports/energystoragepowerstationreporting?uuid="+y+"&periodtype="+J+"&baseperiodstartdatetime="+(null!=X[0]?j()(X[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=X[1]?j()(X[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(te[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(te[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+ne;dt(e)}else fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Z(t),U([t[0]].map((e=>e.label))),D([t[0]].map((e=>e.value)));let e=!1;fetch(w.hR+"/spaces/"+[t[0]].map((e=>e.value))+"/energystoragepowerstations",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(t),Y(t[0]),I(t[0]),t[0].length>0?(W(t[0][0].value),le(!1)):(W(void 0),le(!0))):R.oR.error(o(t.description))})).catch((e=>{console.log(e)}))}else R.oR.error(o(t.description))})).catch((e=>{console.log(e)}))}),[]);const dt=e=>{le(!0),ce(!1),me(!0),nt([]);let t=!1;fetch(e,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e),null!==y&&y&&(I([{id:e.energy_storage_power_station.id,label:e.energy_storage_power_station.name}]),W(e.energy_storage_power_station.id)),_e(e.energy_storage_power_station.name),ye(e.energy_storage_power_station.serial_number),Ae(e.energy_storage_power_station.address),Te(e.energy_storage_power_station.postal_code),Ue(e.energy_storage_power_station.capacity),De(e.energy_storage_power_station.latitude),ke(e.energy_storage_power_station.longitude),Ne({__html:e.energy_storage_power_station.svg});let t={};e.parameters.timestamps.forEach(((e,a)=>{t["a"+a]=e})),Qe(t);let a={};e.parameters.values.forEach(((e,t)=>{a["a"+t]=e})),et(a);let s=Array();e.parameters.names.forEach(((e,t)=>{s.push({value:"a"+t,label:e})})),at(s);let r=[];e.reporting_period.names.forEach(((t,a)=>{let s={};s.name=e.reporting_period.names[a],s.unit=e.reporting_period.units[a],s.subtotal=e.reporting_period.subtotals[a],s.increment_rate=parseFloat(100*e.reporting_period.increment_rates[a]).toFixed(2)+"%",r.push(s)})),Pe(r);let o={};e.reporting_period.names.forEach(((e,t)=>{o["a"+t]=e})),Oe(o);let n={};e.reporting_period.units.forEach(((e,t)=>{n["a"+t]="("+e+")"})),Ge(n);let i={};e.reporting_period.timestamps.forEach(((e,t)=>{i["a"+t]=e})),Be(i);let l={};e.reporting_period.values.forEach(((e,t)=>{l["a"+t]=e})),console.log(l),Ke(l);let d={};e.reporting_period.subtotals.forEach(((e,t)=>{d["a"+t]=e.toFixed(2)})),We(d);let c=Array();e.reporting_period.names.forEach(((t,a)=>{let s=e.reporting_period.units[a];c.push({value:"a"+a,label:t+" ("+s+")"})})),Ze(c),lt(e.excel_bytes_base64),le(!1),ce(!0),me(!1)}else R.oR.error(o(e.description)),ce(!0),le(!1)})).catch((e=>{console.log(e)}))},ct="ls text-uppercase text-600 font-weight-semi-bold mb-0";return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(E),console.log(L),console.log(z),console.log(J),console.log(null!=X[0]?j()(X[0]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(null!=X[1]?j()(X[1]).format("YYYY-MM-DDTHH:mm:ss"):null),console.log(j()(te[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(te[1]).format("YYYY-MM-DDTHH:mm:ss"));let t=w.hR+"/reports/energystoragepowerstationreporting?id="+L+"&periodtype="+J+"&baseperiodstartdatetime="+(null!=X[0]?j()(X[0]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=X[1]?j()(X[1]).format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+j()(te[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(te[1]).format("YYYY-MM-DDTHH:mm:ss")+"&language="+ne;dt(t)},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,hidden:pe,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:ct,for:"space",children:o("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:q,onChange:(e,t)=>{U(t.map((e=>e.label)).join("/")),D(e[e.length-1]);let a=!1;fetch(w.hR+"/spaces/"+e[e.length-1]+"/energystoragepowerstations",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(a=!0),e.json()))).then((e=>{a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),Y(e[0]),I(e[0]),e[0].length>0?(W(e[0][0].value),le(!1)):(W(void 0),le(!0))):R.oR.error(o(e.description))})).catch((e=>{console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:A||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:ct,for:"energyStoragePowerStationSelect",children:o("Energy Storage Power Station")}),(0,M.jsxs)(d.A,{inline:!0,children:[(0,M.jsx)(h.A,{placeholder:o("Search"),onChange:e=>{let{target:t}=e;const a=t.value.toLowerCase(),s=k.filter((e=>e.label.toLowerCase().includes(a)));I(a.length?s:k),s.length>0?(W(s[0].value),le(!1)):(W(void 0),le(!0)),document.getElementById("icrogridSelect").value=s[0].value},hidden:ge}),(0,M.jsx)(g.A,{type:"select",id:"energyStoragePowerStationSelect",name:"energyStoragePowerStationSelect",onChange:e=>{let{target:t}=e;return W(t.value)},children:P.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:ct,for:"comparisonType",children:o("Comparison Types")}),(0,M.jsx)(g.A,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:e=>{let{target:t}=e;console.log(t.value),B(t.value),"year-over-year"===t.value?(ee(!0),Q([j()(te[0]).subtract(1,"years").toDate(),j()(te[1]).subtract(1,"years").toDate()])):"month-on-month"===t.value?(ee(!0),Q([j()(te[0]).subtract(1,"months").toDate(),j()(te[1]).subtract(1,"months").toDate()])):"free-comparison"===t.value?(ee(!1),Q([j()(te[0]).subtract(1,"days").toDate(),j()(te[1]).subtract(1,"days").toDate()])):"none-comparison"===t.value&&(Q([null,null]),ee(!0))},children:O.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:o(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)(p.A,{className:ct,for:"periodType",children:o("Period Types")}),(0,M.jsx)(g.A,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:e=>{let{target:t}=e;return K(t.value)},children:F.map(((e,t)=>(0,M.jsx)("option",{value:e.value,children:o(e.label)},e.value)))})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsxs)(p.A,{className:ct,for:"basePeriodDateRangePicker",children:[o("Base Period"),o("(Optional)")]}),(0,M.jsx)(G,{id:"basePeriodDateRangePicker",disabled:$,format:"yyyy-MM-dd HH:mm:ss",value:X,onChange:e=>{null==e?Q([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),Q([e[0],e[1]]))},size:"md",style:oe,onClean:e=>{Q([null,null])},locale:se,placeholder:o("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:ct,for:"reportingPeriodDateRangePicker",children:o("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:te,onChange:e=>{null==e?ae([null,null]):("00:00:00"==j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),ae([e[0],e[1]]),"year-over-year"===z?Q([j()(e[0]).clone().subtract(1,"years").toDate(),j()(e[1]).clone().subtract(1,"years").toDate()]):"month-on-month"===z&&Q([j()(e[0]).clone().subtract(1,"months").toDate(),j()(e[1]).clone().subtract(1,"months").toDate()]))},size:"md",style:oe,onClean:e=>{ae([null,null])},locale:se,placeholder:o("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:ie,children:o("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:de})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ue,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+it).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="energyStoragePowerStationreproting.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:o("Export")})]})]})})})}),(0,M.jsx)("div",{className:"card-deck",children:Ye.map((e=>(0,M.jsx)(T.A,{title:e.name+"("+e.unit+")",color:"success",children:e.subtotal&&(0,M.jsx)(b.Ay,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2})},e.name)))}),(0,M.jsx)(N,{reportingTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:Fe,VALUE:Ve,UNIT:Le},baseTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:{a0:""},VALUE:{a0:(0).toFixed(2)},UNIT:{a0:"()"}},reportingTooltipTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:{a0:""},VALUE:null,UNIT:{a0:"()"}},baseTooltipTitle:{name:"CATEGORY VALUE UNIT",substitute:["CATEGORY","VALUE","UNIT"],CATEGORY:{a0:""},VALUE:null,UNIT:{a0:"()"}},reportingLabels:ze,reportingData:Je,baseLabels:ze,baseData:Je,rates:{a0:[]},options:qe}),(0,M.jsx)(re,{reportingTitle:o("Operating Characteristic Curve"),baseTitle:"",labels:Xe,data:$e,options:tt})]})}))));var Ut=a(25663),Et=a(96209),Dt=a(41482),Ct=a(19940),kt=a(7323),Mt=a(80688),Nt=a(77154),Yt=a(71094);const Pt=JSON.parse('[{"ac1_warn_sum":"\u9396\u76f8\u544a\u8b66","ac1_warn_environ":"\u6b63\u6bcd\u7dda\u4e8c\u7d1a\u904e\u58d3\u544a\u8b66","ac1_warn_hardware":"\u96fb\u7db2\u96fb\u58d3\u9ad8\u544a\u8b66","ac1_warn_temp":"\u9032\u98a8\u53e3\u74b0\u5883\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"\u76f4\u6d41\u5074\u786c\u4ef6\u8d77\u6545\u969c","ac1_warn_environ":"\u8ca0\u6bcd\u7dda\u4e8c\u7d1a\u904e\u58d3\u544a\u8b66","ac1_warn_hardware":"\u96fb\u7db2\u96fb\u58d3\u4f4e\u544a\u8b66","ac1_warn_temp":"\u51fa\u98a8\u53e3\u74b0\u5883\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"\u4ea4\u6d41\u5074\u786c\u4ef6\u8d77\u6545\u969c","ac1_warn_environ":"\u6a21\u7d44A1\u76f8\u904e\u6d41\u544a\u8b66","ac1_warn_hardware":"\u96fb\u7db2\u96fb\u983b\u7387\u9ad8\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44A2\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"\u76f4\u6d41\u8edf\u4ef6\u8d77\u6545\u969c","ac1_warn_environ":"\u6a21\u7d44B1\u76f8\u904e\u6d41\u544a\u8b66","ac1_warn_hardware":"\u96fb\u7db2\u96fb\u983b\u7387\u4f4e\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44B2\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"\u96fb\u7db2\u8ae7\u632f\u6545\u969c","ac1_warn_environ":"\u6a21\u7d44C1\u76f8\u904e\u6d41\u544a\u8b66","ac1_warn_hardware":"\u6bcd\u7dda\u7e3d\u58d3\u904e\u9ad8\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44C2\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"\u8f38\u5165\u963b\u6297\u6545\u969c","ac1_warn_environ":"\u6a21\u7d44A2\u76f8\u904e\u6d41\u544a\u8b66","ac1_warn_hardware":"\u6bcd\u7dda\u7e3d\u58d3\u904e\u4f4e\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44A1\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"\u8f38\u5165\u963b\u6297\u544a\u8b66","ac1_warn_environ":"\u6a21\u7d44B2\u76f8\u904e\u6d41\u544a\u8b66","ac1_warn_hardware":"\u6b63\u6bcd\u7dda\u4e00\u7d1a\u904e\u58d3\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44B1\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"CANB\u901a\u4fe1\u7570\u5e38\u544a\u8b66","ac1_warn_environ":"\u6a21\u7d44C2\u76f8\u904e\u6d41\u544a\u8b66","ac1_warn_hardware":"\u8ca0\u6bcd\u7dda\u4e00\u7d1a\u904e\u58d3\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44C1\u6eab\u5ea6\u904e\u9ad8\u544a\u8b66"},{"ac1_warn_sum":"\u7cfb\u7d71\u5b58\u5728\u5730\u5740\u885d\u7a81\u6545\u969c","ac1_warn_environ":"\u8f14\u52a9\u96fb\u6e90\u6545\u969c","ac1_warn_hardware":"\u76f4\u6d41\u7aef\u53e3\u904e\u58d3\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44A2\u6eab\u5ea6\u50b3\u611f\u5668\u6545\u969c"},{"ac1_warn_sum":"\u7cfb\u7d71\u4e3b\u6a5f\u5b58\u5728\u5730\u5740\u885d\u7a81\u6545\u969c","ac1_warn_environ":"\u958b\u6a5fCANA\u901a\u4fe1\u6545\u969c","ac1_warn_hardware":"\u76f4\u6d41\u7aef\u53e3\u6b20\u58d3\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44B2\u6eab\u5ea6\u50b3\u611f\u5668\u6545\u969c"},{"ac1_warn_sum":"\u6a21\u584a\u5730\u5740\u7570\u5e38\u6545\u969c","ac1_warn_environ":"\u98a8\u6a5f1\u6545\u969c","ac1_warn_hardware":"\u96fb\u7db2\u76f8\u5e8f\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44C2\u6eab\u5ea6\u50b3\u611f\u5668\u6545\u969c"},{"ac1_warn_sum":"DC\u96fb\u58d3\u63a1\u96c6\u6545\u969c\u544a\u8b66","ac1_warn_environ":"\u98a8\u6a5f2\u6545\u969c","ac1_warn_hardware":"\u9006\u8b8a\u76f8\u5e8f\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44A1\u6eab\u5ea6\u50b3\u611f\u5668\u6545\u969c"},{"ac1_warn_sum":"AC\u96fb\u58d3\u63a1\u96c6\u7570\u5e38\u544a\u8b66","ac1_warn_environ":"\u98a8\u6a5f3\u6545\u969c","ac1_warn_hardware":"\u9006\u8b8a\u5e45\u503c\u9396\u5b9a\u544a\u8b66","ac1_warn_temp":"\u6a21\u7d44B1\u6eab\u5ea6\u50b3\u611f\u5668\u6545\u969c"},{"ac1_warn_sum":"DC\u5074\u4e3b\u8a08\u96fb\u5668\u544a\u8b66","ac1_warn_environ":"\u9006\u8b8a\u904e\u58d3\u544a\u8b66","ac1_warn_hardware":"\u4ea4\u6d41\u8f38\u51fa\u77ed\u8def\u6545\u969c","ac1_warn_temp":"\u6a21\u7d44C1\u6eab\u5ea6\u50b3\u611f\u5668\u6545\u969c"},{"ac1_warn_sum":"\u6bcd\u7dda\u4e2d\u9ede\u4e0d\u5747\u544a\u8b66","ac1_warn_environ":"\u9006\u8b8a\u6b20\u58d3\u544a\u8b66","ac1_warn_hardware":"\u4ea4\u6d41\u96fb\u6d41\u63a1\u6a23\u6545\u969c","ac1_warn_temp":"AC\u6046\u58d3\u6a21\u5f0f\u4e0b\u96fb\u7db2\u63a5\u5165\u6545\u969c"},{"ac1_warn_sum":"\u904e\u8f09\u544a\u8b66","ac1_warn_environ":"\u6025\u505c\u6545\u969c","ac1_warn_hardware":"\u5167\u90e8rs485\u901a\u4fe1\u6545\u969c","ac1_warn_temp":"DSP\u8edf\u4ef6\u7248\u672c\u4e0d\u5339\u914d\u6545\u969c"}]'),Rt=[{Header:"ac1\u7cfb\u7d71\u7d9c\u5408",accessor:"ac1_warn_sum"},{Header:"ac1\u7cfb\u7d71\u74b0\u5883",accessor:"ac1_warn_environ"},{Header:"ac1\u7cfb\u7d71\u786c\u4ef6",accessor:"ac1_warn_hardware"},{Header:"ac1\u7cfb\u7d71\u6eab\u5ea6",accessor:"ac1_warn_temp"}];const Ht=function(){const e=(0,s.useState)([635,736,243,1032]),t=(0,s.useMemo)((()=>Rt),[Rt]),a=(0,s.useMemo)((()=>Pt),[Pt]),r=(0,Yt.useTable)({columns:t,data:a}),{getTableProps:o,getTableBodyProps:n,headerGroups:i,rows:l,prepareRow:d}=r;return(0,M.jsxs)("table",{...o(),className:"table-with-spacing",children:[(0,M.jsx)("thead",{children:i.map(((e,t)=>(0,s.createElement)("tr",{...e.getHeaderGroupProps(),key:t},e.headers.map(((e,t)=>(0,M.jsx)("th",{...e.getHeaderProps(),children:e.render("Header")},t))))))}),(0,M.jsx)("tbody",{...n(),children:l.map(((t,a)=>(d(t),(0,s.createElement)("tr",{...t.getRowProps(),key:a},t.cells.map(((t,s)=>{const r=e[0][s]>>a&1?"red":"green";return(0,M.jsx)("td",{style:{color:r},...t.getCellProps(),children:t.render("Cell")},s)}))))))})]})},wt=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,o=j()();const[n,h]=(0,s.useState)(o.clone().startOf("month")),[b,y]=(0,s.useState)(o),[A,v]=(0,s.useState)("all"),[T,U]=(0,s.useState)("all"),[E,D]=(0,s.useState)([]),[C,k]=(0,s.useState)(void 0),[N,Y]=(0,s.useState)(!0),[P,I]=(0,s.useState)(!0),[F,O]=(0,s.useState)(!1);let L=(0,s.createRef)();const[G,V]=(0,s.useState)(!1),W=e=>{let{page:t,onPageChange:a}=e;return()=>{a(t+1)}},z=e=>{let{page:t,onPageChange:a}=e;return()=>{a(t-1)}},B=()=>{setImmediate((()=>{V(!!L.current.selectionContext.selected.length)}))};const J=[{dataField:"AC1_warning",text:r("Notification AC1_warning"),classes:"py-2 align-middle",formatter:(e,t)=>{let{url:a}=t;return(0,M.jsx)(s.Fragment,{children:(0,M.jsx)("span",{children:e})})},sort:!0},{dataField:"created_datetime",text:r("Notification Created Datetime"),classes:"py-2 align-middle",sort:!0},{dataField:"message",text:r("Notification Message"),classes:"py-2 align-middle",formatter:e=>(0,M.jsx)(s.Fragment,{children:e}),sort:!0},{dataField:"status",text:r("Notification Status"),classes:"py-2 align-middle",formatter:e=>{let t="",a="",s="";switch(e){case"acknowledged":t="success",a="envelope-open",s=r("Notification Acknowledged");break;case"read":t="success",a="envelope-open",s=r("Notification Read");break;default:t="primary",a="envelope",s=r("Notification Unread")}return(0,M.jsxs)(st.A,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block",children:[s,(0,M.jsx)(rt.g,{icon:a,transform:"shrink-2",className:"ml-1"})]})},sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:(e,t)=>{let{id:a}=t;return(0,M.jsxs)(Dt.A,{children:[(0,M.jsx)(Ct.A,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3",children:(0,M.jsx)(rt.g,{icon:"ellipsis-h",className:"fs--1"})}),(0,M.jsxs)(kt.A,{right:!0,className:"border py-2",children:[(0,M.jsx)(Mt.A,{onClick:()=>$(a),children:r("Notification Mark As Read")}),(0,M.jsx)(Mt.A,{onClick:()=>ee(a),children:r("Notification Mark As Acknowledged")}),(0,M.jsx)(Mt.A,{divider:!0}),(0,M.jsx)(Mt.A,{onClick:()=>te(a),className:"text-danger",children:r("Notification Delete")})]})]})},align:"right"}],K={custom:!0,sizePerPage:10,totalSize:E.length},q=e=>{let{indeterminate:t,rowIndex:a,...s}=e;return(0,M.jsxs)("div",{className:"custom-control custom-checkbox",children:[(0,M.jsx)("input",{className:"custom-control-input",...s,onChange:()=>{},ref:e=>{e&&(e.indeterminate=t)}}),(0,M.jsx)("label",{className:"custom-control-label"})]})},Z=e=>({mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:e=>{let{mode:t,...a}=e;return(0,M.jsx)(q,{type:"checkbox",...a})},selectionRenderer:e=>{let{mode:t,...a}=e;return(0,M.jsx)(q,{type:t,...a})},onSelect:e,onSelectAll:e}),X="ls text-uppercase text-600 font-weight-semi-bold mb-0",Q=e=>{e.preventDefault(),console.log("handleSubmit"),console.log(n.format("YYYY-MM-DDTHH:mm:ss")),console.log(b.format("YYYY-MM-DDTHH:mm:ss")),console.log(A),console.log(T),O(!0),Y(!1),I(!0),D([]);let t=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss")+"&priority="+A+"&status="+T,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),O(!1),Y(!0),I(!1),e.json()))).then((e=>{if(t){let t=[];e.length>0&&e.forEach(((e,a)=>{let s={};s.id=e.id,s.subject=e.subject,s.created_datetime=j()(parseInt(e.created_datetime)).format("YYYY-MM-DD HH:mm:ss"),s.message=e.message,s.status=e.status,s.url=e.url,s.id="1",s.subject="\u9019\u662f\u4e3b\u984c",s.created_datetime="20240226",s.message="\u9019\u662f\u5167\u5bb9",s.status="\u9019\u662f\u72c0\u614b",s.url="\u9019\u662furl",t.push(s)})),D(t),k(e.excel_bytes_base64),Y(!0)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},$=e=>{console.log("Mark As Read: ",e);let t=!1;fetch(w.hR+"/webmessages/"+e,{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{status:"read"}})}).then((e=>e.ok?(t=!0,null):e.json())).then((e=>{if(console.log(t),t){let e=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss")+"&priority="+A+"&status="+T,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),D(e),Y(!0)}}))}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},ee=e=>{console.log("Mark As Acknowledged: ",e);let t=!1;fetch(w.hR+"/webmessages/"+e,{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{status:"acknowledged",reply:"OK"}})}).then((e=>e.ok?(t=!0,null):e.json())).then((e=>{if(console.log(t),t){let e=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss")+"&priority="+A+"&status="+T,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),D(e),Y(!0)}}))}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},te=e=>{console.log("Delete: ",e);let t=!1;fetch(w.hR+"/webmessages/"+e,{method:"DELETE",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>e.ok?(t=!0,null):e.json())).then((e=>{if(console.log(t),t){let e=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss")+"&priority="+A+"&status="+T,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),D(e),Y(!0)}}))}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},[ae,se]=(0,s.useState)([3]),[re,oe]=(0,s.useState)([]),ne=()=>{Nt.A.get("http://localhost:3088/getWarninig").then((e=>{se(e.data),D(e.data)}))};(0,s.useEffect)((()=>{ne();oe(["\u9396\u76f8\u544a\u8b66","\u76f4\u6d41\u5074\u786c\u4ef6\u8d77\u6545\u969c","\u4ea4\u6d41\u5074\u786c\u4ef6\u8d77\u6545\u969c","\u76f4\u6d41\u8edf\u4ef6\u8d77\u6545\u969c","\u96fb\u7db2\u8ae7\u632f\u6545\u969c","\u8f38\u5165\u963b\u6297\u6545\u969c","\u8f38\u5165\u963b\u6297\u544a\u8b66","CANB\u901a\u4fe1\u7570\u5e38\u544a\u8b66","\u7cfb\u7d71\u5b58\u5728\u5730\u5740\u885d\u7a81\u6545\u969c","\u7cfb\u7d71\u4e3b\u6a5f\u5b58\u5728\u5730\u5740\u885d\u7a81\u6545\u969c","\u6a21\u584a\u5730\u5740\u7570\u5e38\u6545\u969c","DC\u96fb\u58d3\u63a1\u96c6\u6545\u969c\u544a\u8b66","AC\u96fb\u58d3\u63a1\u96c6\u7570\u5e38\u544a\u8b66","DC\u5074\u4e3b\u8a08\u96fb\u5668\u544a\u8b66","\u904e\u8f09\u544a\u8b66"])}),[]);return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:Q,children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{sm:1,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:X,for:"priority",children:r("Notification Priority")}),(0,M.jsxs)(g.A,{type:"select",id:"bulk-select",value:A,onChange:e=>{let{target:t}=e;v(t.value)},children:[(0,M.jsx)("option",{value:"all",children:r("View all")},"all"),(0,M.jsx)("option",{value:"LOW",children:r("Notification Low")},"low"),(0,M.jsx)("option",{value:"MEDIUM",children:r("Notification Medium")},"medium"),(0,M.jsx)("option",{value:"HIGH",children:r("Notification High")},"high"),(0,M.jsx)("option",{value:"CRITICAL",children:r("Notification Critical")},"critical")]})]})}),(0,M.jsx)(u.A,{sm:1,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:X,for:"status",children:r("Notification Status")}),(0,M.jsxs)(g.A,{type:"select",id:"bulk-select",value:T,onChange:e=>{let{target:t}=e;U(t.value)},children:[(0,M.jsx)("option",{value:"all",children:r("View all")},"all"),(0,M.jsx)("option",{value:"read",children:r("Notification Read")},"read"),(0,M.jsx)("option",{value:"new",children:r("notification_NEW")},"unread"),(0,M.jsx)("option",{value:"acknowledged",children:r("Notification Acknowledged")},"acknowledged")]})]})}),(0,M.jsx)(u.A,{sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:X,for:"startDatetime",children:r("Reporting Period Begins")}),(0,M.jsx)(ft(),{id:"startDatetime",value:n,onChange:e=>{h(e)},isValidDate:function(e){return e.isBefore(j()(b,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0})]})}),(0,M.jsx)(u.A,{sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:X,for:"endDatetime",children:r("Reporting Period Ends")}),(0,M.jsx)(ft(),{id:"endDatetime",value:b,onChange:e=>{y(e)},isValidDate:function(e){return e.isAfter(j()(n,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:N})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",onClick:Q,children:r("Submit")})}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"info",onClick:()=>{Nt.A.get("http://localhost:3089/get_myems_warn").then((e=>{D(e.data)}))},children:r("test")})}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"warning",onClick:()=>{window.confirm("\u8acb\u554f\uff0c\u78ba\u5b9a\u8981\u57f7\u884c\u6b64\u52d5\u4f5c?")&&ne()},children:"\u8b80\u53d6"})})]})}),(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)("br",{}),(0,M.jsx)(H.A,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:P,onClick:e=>{e.preventDefault();const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+C).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="fddfault.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))},children:r("Export")})]})]})})})}),(0,M.jsxs)(i.A,{className:"mb-3",children:[(0,M.jsx)(_.A,{color:"primary",hidden:N}),(0,M.jsx)(l.A,{className:"p-0",children:(0,M.jsx)(Ut.gx,{pagination:(0,Ut.Ay)(K),children:e=>{let{paginationProps:t,paginationTableProps:a}=e;const r=t.page*t.sizePerPage;return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsxs)("div",{className:"table-responsive",children:[(0,M.jsx)(Et.A,{ref:L,bootstrap4:!0,keyField:"id",data:E,columns:J,selectRow:Z(B),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900",...a}),(0,M.jsx)(Ht,{})]}),(0,M.jsx)(c.A,{noGutters:!0,className:"px-1 py-3 flex-center",children:(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",onClick:z(t),disabled:1===t.page,children:(0,M.jsx)(rt.g,{icon:"chevron-left"})}),(0,S.Qf)(t.totalSize,t.sizePerPage).map((e=>(0,M.jsx)(f.A,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:()=>t.onPageChange(e),children:e},e))),(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-2",onClick:W(t),disabled:r>=t.totalSize,children:(0,M.jsx)(rt.g,{icon:"chevron-right"})})]})})]})}})})]})]})}))),It=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[a,r]=(0,s.useState)(!0),[o,n]=(0,s.useState)([]);return(0,s.useEffect)((()=>{let a=!0;return setTimeout((()=>{a&&(n(e),r(!1))}),t),()=>a=!1}),[e,t]),{loading:a,setLoading:r,data:o,setData:n}},Ft=e=>{let{id:t,files:a,title:r,category:o,features:n,parameter1:i,parameter2:l,parameter3:d,parameter4:m,parameter5:p,parameter6:h,parameter7:g,alarms:x,isOnline:f,isRunning:_,sliderSettings:b,index:y,t:j}=e;const{isDark:A}=(0,s.useContext)(C.Ay),{favouriteItemsDispatch:v}=(0,s.useContext)(C.z_),[T,U]=(0,s.useState)(!1);return(0,M.jsx)(u.A,{xs:12,className:at()("p-3",{"bg-100":A&&y%2!==0}),children:(0,M.jsx)("div",{className:"p-1",children:(0,M.jsxs)(c.A,{children:[(0,M.jsx)(u.A,{sm:5,md:4,children:(0,M.jsxs)("div",{className:"position-relative h-sm-100",children:[(0,M.jsx)("iframe",{className:"img-fluid fit-cover w-sm-100 h-sm-100 rounded absolute-sm-centered",src:"http://192.168.2.53:18080/#/play/wasm/ws%3A%2F%2F192.168.2.53%3A6080%2Fapp1%2F34020000001320000011.live.flv?autoplay=1"}),_&&(0,M.jsx)(st.A,{color:"success",pill:!0,className:"position-absolute t-0 r-0 mr-2 mt-2 fs--2 z-index-2",children:"\u8fd0\u884c"})]})}),(0,M.jsx)(u.A,{sm:7,md:8,children:(0,M.jsxs)(c.A,{children:[(0,M.jsxs)(u.A,{lg:8,children:[(0,M.jsx)("h5",{className:"mt-3 mt-sm-0",children:r}),(0,M.jsx)("p",{className:"fs--1 mb-2 mb-md-3",children:(0,M.jsx)("a",{className:"text-500",href:"#!",children:o})}),(0,S.i)(n)&&(0,M.jsx)("ul",{className:"list-unstyled d-none d-lg-block",children:n.map(((e,t)=>(0,M.jsxs)("li",{children:[(0,M.jsx)(rt.g,{icon:"circle",transform:"shrink-12"}),(0,M.jsx)("span",{children:e})]},t)))})]}),(0,M.jsxs)(u.A,{lg:4,tag:et.A,justify:"between",column:!0,children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"fs-1 fs-md-2 text-warning mb-0",children:j("Instantaneous Efficiency VALUE UNIT",{VALUE:i,UNIT:"(kWh/kWh)"})}),(0,M.jsxs)("div",{className:"d-none d-lg-block",children:[(0,M.jsxs)("p",{className:"fs--1 mb-1",children:["\u5de5\u4f5c\u9805\u76ee:",(0,M.jsxs)("strong",{children:[l," \u52d5\u4f5c"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:["\u8d77\u59cb\u6642\u9593(\u6642):",(0,M.jsxs)("strong",{children:[d," hour"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:["\u8d77\u59cb\u6642\u9593(\u5206):",(0,M.jsxs)("strong",{children:[m," minute"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:["\u7d50\u675f\u6642\u9593(\u6642):",(0,M.jsxs)("strong",{children:[p," hour"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:["\u7d50\u675f\u6642\u9593(\u5206):",(0,M.jsxs)("strong",{children:[h," minute"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:["\u529f\u7387:",(0,M.jsxs)("strong",{children:[g," kW"]})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Communication Status"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":f,"text-danger":!f}),children:j(f?"Communication Online":"Communication Offline")})]}),(0,M.jsxs)("p",{className:"fs--1 mb-1",children:[j("Equipment Status"),":"," ",(0,M.jsx)("strong",{className:at()({"text-success":_,"text-danger":!_}),children:j(_?"Equipment Running":"Equipment Stopped")})]})]})]}),(0,M.jsxs)("div",{className:"mt-md-2",children:[(0,M.jsxs)(H.A,{color:_?"outline-info":"outline-secondary",size:"sm",className:at()("w-lg-100 mt-2 mr-2 mr-lg-0",{"border-300":!_}),icon:[_?"fas":"far","exclamation-triangle"],onClick:()=>v(_?{type:"REMOVE",id:t}:{type:"ADD",payload:{id:t}}),children:[j("Fault Alarms"),"(",x.length,")"]}),T?(0,M.jsx)(H.A,{color:"primary",size:"sm",icon:"circle-notch",iconClassName:"fa-spin ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",style:{cursor:"progress"},disabled:!0,children:"Processing"}):(0,M.jsx)(H.A,{color:"warning",size:"sm",icon:"users",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:()=>{U(!0),setTimeout((()=>{U(!1)}),1e3)},children:j("Run Commands")})]})]})]})})]})})})};Ft.defaultProps={isRunning:!1,isOnline:!1,files:[]};const Ot=(0,E.C)()(Ft),Lt=e=>{let{meta:t,handler:a}=e;const{isRTL:r}=(0,s.useContext)(C.Ay),{total:o,pageNo:n,itemsPerPage:i,nextPageNo:l,prevPageNo:d}=t,{nextPage:c,prevPage:u,currentPage:m}=a;return(0,M.jsxs)(it.A,{tag:et.A,justify:"center",align:"center",className:"bg-light border-top",children:[(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:u,disabled:!d,children:(0,M.jsx)(rt.g,{icon:"chevron-".concat(r?"right":"left")})}),(0,S.Qf)(o,i).map((e=>(0,M.jsx)(f.A,{color:n===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:()=>m(e),children:e},e))),(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:c,disabled:!l,children:(0,M.jsx)(rt.g,{icon:"chevron-".concat(r?"left":"right")})})]})},Gt=a.p+"static/media/1.b0c42650137cf5a6c092.png",Vt=a.p+"static/media/2.55c2e218c6a3727e64e3.png",Wt=a.p+"static/media/4.132a48a3595aaea49aed.png",zt=a.p+"static/media/3.e84962174026029a841b.png",Bt=a.p+"static/media/8.467a8d36094afa3fe8d3.png",Jt=a.p+"static/media/6.6c563ed8b7e402d75f5c.png",Kt=a.p+"static/media/7.5629cc52e84585aa5cf4.png",qt=a.p+"static/media/5.e9fd977153a6e884052f.png",Zt=a.p+"static/media/9.85fa2a54805d807b016f.png",Xt=[{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product2",src:Vt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-01",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product1",src:Gt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-02",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product4",src:Wt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-03",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product3",src:zt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-04",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product8",src:Bt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-05",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product6",src:Jt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-06",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product7",src:Kt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-07",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product5",src:qt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-08",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:(0,I.A)(),files:[{id:(0,I.A)(),path:" product9",src:Zt}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-09",category:"\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0}],Qt=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e;(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[b,y]=(0,s.useState)(void 0),[j,A]=(0,s.useState)(void 0),[T,U]=(0,s.useState)([]),[E,D]=(0,s.useState)(void 0),[C,k]=(0,s.useState)(!0),[N,Y]=(0,s.useState)(!0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),D(t),y([t[0]].map((e=>e.label))),A([t[0]].map((e=>e.value)))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const P={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1};const{loading:H}=It(Xt),{data:I,meta:F,handler:O}=ut(T,4),{total:L,itemsPerPage:G,from:V,to:W}=F,{perPage:z}=O;(0,s.useEffect)((()=>{U(Xt.map((e=>e.id)))}),[]);return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:r("Monitoring")}),(0,M.jsx)(n.A,{active:!0,children:r("Space Equipments")})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(j)},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:6,sm:3,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:"ls text-uppercase text-600 font-weight-semi-bold mb-0",for:"space",children:r("Space")}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:E,onChange:(e,t)=>{console.log(e,t),y(t.map((e=>e.label)).join("/")),A(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:b||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:C,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:N})]})})]})})})}),(0,M.jsxs)(i.A,{children:[(0,M.jsx)(l.A,{className:at()({"p-0  overflow-hidden":true,"pb-0":!1}),children:H?(0,M.jsx)($e,{}):(0,M.jsx)(c.A,{noGutters:true,children:(0,S.i)(Xt)&&Xt.filter((e=>I.includes(e.id))).map(((e,t)=>(0,s.createElement)(Ot,{...e,sliderSettings:P,key:e.id,index:t})))})}),(0,M.jsx)(Lt,{meta:F,handler:O})]}),(0,M.jsx)(i.A,{className:"mb-3",children:(0,M.jsx)(l.A,{children:(0,M.jsx)(c.A,{className:"justify-content-between align-items-center",children:(0,M.jsxs)(u.A,{sm:"auto",className:"mb-2 mb-sm-0",tag:et.A,align:"center",children:[(0,M.jsx)("h6",{className:"mb-0 text-nowrap ml-2",children:r("Show Up to")}),(0,M.jsxs)(g.A,{id:"itemsPerPage",type:"select",bsSize:"sm",value:G,onChange:e=>{let{target:t}=e;return z(Number(t.value))},children:[(0,M.jsx)("option",{value:2,children:"2"}),(0,M.jsx)("option",{value:4,children:"4"}),(0,M.jsx)("option",{value:6,children:"6"}),(0,M.jsx)("option",{value:L,children:r("All")})]}),(0,M.jsx)("h6",{className:"mb-0 text-nowrap ml-2",children:r("FROM - TO of TOTAL Equipments",{FROM:V,TO:W,TOTAL:L})})]})})})})]})}))),$t=[];for(let Fa=0;Fa<60;Fa++){const e=Fa+"\u5206",t={value:e,label:e};$t.push(t)}const ea=[];for(let Fa=0;Fa<24;Fa++){const e=Fa+"\u6642",t={value:e,label:e,children:$t};ea.push(t)}const ta=ea;a(2459);var aa=a(30064),sa=a.n(aa),ra=(a(83893),a(91527));const oa=[],na=[{value:"\u5145\u96fb",label:"\u5145\u96fb"},{value:"\u653e\u96fb",label:"\u653e\u96fb"},{value:"\u5f85\u6a5f",label:"\u5f85\u6a5f"}],ia=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"}],la=[];for(let Fa=0;Fa<60;Fa++){const e=Fa+"\u5206",t={value:e,label:e};la.push(t)}const da=[];for(let Fa=0;Fa<24;Fa++){const e=Fa+"\u6642",t={value:e,label:e};da.push(t)}new ra.E;var ca=a(63140),ua=a(96446),ma=a(77739),pa=a(17392),ha=a(11906),ga=a(63248),xa=a(47097),fa=a(93747),_a=a(95540),ba=a(63471);const ya=()=>{const[e,t]=(0,s.useState)({}),a=(0,s.useMemo)((()=>[{accessorKey:"strategy",header:"strategy",editSelectOptions:na,muiEditTextFieldProps:{select:!0,error:!(null===e||void 0===e||!e.strategy),helperText:null===e||void 0===e?void 0:e.strategy}},{accessorKey:"month",header:"month",editSelectOptions:ia,muiEditTextFieldProps:{select:!0,error:!(null===e||void 0===e||!e.month),helperText:null===e||void 0===e?void 0:e.month}},{accessorKey:"starttime",header:"starttime",editVariant:"select",editSelectOptions:da,muiEditTextFieldProps:{select:!0,error:!(null===e||void 0===e||!e.starttime),helperText:null===e||void 0===e?void 0:e.starttime}},{accessorKey:"startminute",header:"startminute",editVariant:"select",editSelectOptions:la,muiEditTextFieldProps:{select:!0,error:!(null===e||void 0===e||!e.startminute),helperText:null===e||void 0===e?void 0:e.startminute}},{accessorKey:"endtime",header:"endtime",editVariant:"select",editSelectOptions:da,muiEditTextFieldProps:{select:!0,error:!(null===e||void 0===e||!e.endtime),helperText:null===e||void 0===e?void 0:e.endtime}},{accessorKey:"endminute",header:"endminute",editVariant:"select",editSelectOptions:la,muiEditTextFieldProps:{select:!0,error:!(null===e||void 0===e||!e.endminute),helperText:null===e||void 0===e?void 0:e.endminute}},{accessorKey:"power",header:"power",muiEditTextFieldProps:{type:"email",required:!0,error:!(null===e||void 0===e||!e.power),helperText:null===e||void 0===e?void 0:e.power,onFocus:()=>t({...e,power:void 0})}}]),[e]),{mutateAsync:r,isPending:o}=function(){const e=(0,ga.jE)();return(0,xa.n)({mutationFn:async e=>(await new Promise((e=>setTimeout(e,1e3))),Promise.resolve()),onMutate:t=>{e.setQueryData(["users"],(e=>[...e,{...t,id:(Math.random()+1).toString(36).substring(7)}]))}})}(),{data:n=[],isError:i,isFetching:l,isLoading:d}=(0,fa.I)({queryKey:["users"],queryFn:async()=>(await new Promise((e=>setTimeout(e,1e3))),Promise.resolve(oa)),refetchOnWindowFocus:!1}),{mutateAsync:u,isPending:m}=function(){const e=(0,ga.jE)();return(0,xa.n)({mutationFn:async e=>(await new Promise((e=>setTimeout(e,1e3))),Promise.resolve()),onMutate:t=>{e.setQueryData(["users"],(e=>null===e||void 0===e?void 0:e.map((e=>e.id===t.id?t:e))))}})}(),{mutateAsync:p,isPending:h}=function(){const e=(0,ga.jE)();return(0,xa.n)({mutationFn:async e=>(await new Promise((e=>setTimeout(e,1e3))),Promise.resolve()),onMutate:t=>{e.setQueryData(["users"],(e=>null===e||void 0===e?void 0:e.filter((e=>e.id!==t))))}})}(),g=()=>{window.confirm("\u8acb\u554f\uff0c\u78ba\u5b9a\u8981\u57f7\u884c\u9001\u51fa?")&&f()},x=(0,ga.jE)(),f=async()=>{Nt.A.delete("http://localhost:3088/del_getData");const e=x.getQueryData(["users"]);if(console.log("this is confirm data"),console.log(e),e)try{e.map(((e,t)=>{const a=e.starttime.split("\u6642");console.log("this is hourstr"),console.log(a);const s=parseInt(a,10),r=e.startminute.split("\u5206"),o=parseInt(r,10),n=e.endtime.split("\u6642"),i=parseInt(n,10),l=e.endminute.split("\u5206"),d=parseInt(l,10);Nt.A.post("http://localhost:3088/write_addData",{startTimeHour:s,startTimeMinute:o,endTimeHour:i,endTimeMinute:d}).then((()=>{})).catch((e=>{console.error("Error:",e)}))}))}catch(t){console.error("error:",t)}},_=(0,ca.Up)({columns:a,data:n,createDisplayMode:"row",editDisplayMode:"row",enableEditing:!0,getRowId:e=>e.id,positionActionsColumn:"last",muiTableHeadCellProps:{sx:e=>({color:"snow",backgroundColor:"darkslategray"})},muiTableBodyCellProps:e=>{let{column:t}=e;return{sx:{color:"darkblue",backgroundColor:"honeydew"}}},muiToolbarAlertBannerProps:i?{color:"error",children:"Error loading data"}:void 0,muiTableContainerProps:{sx:{minHeight:"500px"}},onCreatingRowCancel:()=>t({}),onCreatingRowSave:async e=>{let{values:a,table:s}=e;const o={};Object.values(o).some((e=>e))?t(o):(t({}),await r(a),s.setCreatingRow(null))},onEditingRowCancel:()=>t({}),onEditingRowSave:async e=>{let{values:a,table:s}=e;const r={};Object.values(r).some((e=>e))?t(r):(t({}),await u(a),s.setEditingRow(null))},renderRowActions:e=>{let{row:t,table:a}=e;return(0,M.jsxs)(ua.A,{sx:{display:"flex",gap:"1rem"},children:[(0,M.jsx)(ma.A,{title:"Edit",children:(0,M.jsx)(pa.A,{onClick:()=>a.setEditingRow(t),children:(0,M.jsx)(_a.A,{})})}),(0,M.jsx)(ma.A,{title:"Delete",children:(0,M.jsx)(pa.A,{color:"error",onClick:()=>(e=>{window.confirm("Are you sure you want to delete this user?")&&p(e.original.id)})(t),children:(0,M.jsx)(ba.A,{})})})]})},renderTopToolbarCustomActions:e=>{let{table:t}=e;return(0,M.jsx)("div",{children:(0,M.jsxs)(c.A,{children:[(0,M.jsx)(ha.A,{variant:"contained",onClick:()=>{t.setCreatingRow(!0)},children:"\u65b0\u589e\u6392\u7a0b"}),(0,M.jsx)(ha.A,{color:"success",variant:"contained",onClick:g,children:"\u9001\u51fa"})]})})},state:{isLoading:d,isSaving:o||m||h,showAlertBanner:i,showProgressBars:l}});return(0,M.jsx)(ca.zp,{table:_})};const ja=new ra.E,Aa=()=>(0,M.jsx)(ga.Ht,{client:ja,children:(0,M.jsx)(ya,{})});const va=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e;const[b,y]=(0,s.useState)(void 0),[j,A]=(0,s.useState)(void 0),[T,U]=(0,s.useState)([]),[E,D]=(0,s.useState)(void 0),[C,k]=(0,s.useState)([]),[N,Y]=(0,s.useState)(void 0),[P,H]=(0,s.useState)(!0),[I,F]=(0,s.useState)(!0);(0,s.useEffect)((()=>{let e=!1;fetch(w.hR+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(console.log(t),t.ok&&(e=!0),t.json()))).then((t=>{if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Y(t),y([t[0]].map((e=>e.label))),A([t[0]].map((e=>e.value)));let e=!1;fetch(w.hR+"/spaces/"+[t[0]].map((e=>e.value))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(t),U(t[0]),t[0].length>0?(D(t[0][0].value),H(!1)):(D(void 0),H(!0))):R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}else R.oR.error(r(t.description))})).catch((e=>{console.log(e)}))}),[]);const O="ls text-uppercase text-600 font-weight-semi-bold mb-0",[L,G]=(0,s.useState)(""),[V,W]=(0,s.useState)("");const[z,B]=(0,s.useState)(""),[J,K]=(0,s.useState)("");const[q,Z]=(0,s.useState)(""),[X,Q]=(0,s.useState)("");const[$,ee]=(0,s.useState)(""),[te,ae]=(0,s.useState)("");const[se,re]=(0,s.useState)(""),[oe,ne]=(0,s.useState)("");let ie=(e,t)=>{let a=!1;fetch(w.hR+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(a=!0),e.json()))).then((e=>{a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),U(e[0]),e[0].length>0?(D(e[0][0].value),H(!1)):(D(void 0),H(!0))):R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))};const{loading:le}=It(Xt),[de,ce]=(0,s.useState)([]),[ue,me]=(0,s.useState)(0),{data:pe,meta:he,handler:ge}=ut(de,4),{onChangePage:xe}=ge,{page:fe,total:_e,itemsPerPage:be,from:ye,to:je}=he,{perPage:Ae}=ge,ve=(e,t,a,s,r)=>{const o=(e-1)*t,n=o+t,i=a.slice(o,n);r.onChangePage(e,i,s)},[Te,Se]=(0,s.useState)(!1);const Ue=[{dataField:"selectedStrategName",text:"\u7b56\u7565",classes:"py-2 align-middle"},{dataField:"selectedMonthName",text:"\u6708",classes:"py-2 align-middle"},{dataField:"selectedStartTimeName",text:"\u958b\u59cb",classes:"py-2 align-middle"},{dataField:"selectedEndTimeName",text:"\u7d50\u675f",classes:"py-2 align-middle"},{dataField:"selectedPowerName",text:"\u529f\u7387",classes:"py-2 align-middle"},{dataField:"",text:"",classes:"py-2 align-middle",formatter:(e,t)=>{let{id:a}=t;return(0,M.jsxs)(Dt.A,{children:[(0,M.jsx)(Ct.A,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3",children:(0,M.jsx)(rt.g,{icon:"ellipsis-h",className:"fs--1"})}),(0,M.jsxs)(kt.A,{right:!0,className:"border py-2",children:[(0,M.jsx)(Mt.A,{onClick:()=>(e=>{const t=de.find((t=>t.id===e));me(e),G(t.selectedStrategName),B(t.selectedMonthName),Z(t.selectedStartTimeName),ee(t.selectedEndTimeName),re(t.selectedPowerName)})(a),className:"text-info",children:"\u66f4\u65b0"}),(0,M.jsx)(Mt.A,{onClick:()=>(e=>{const t=de.filter((t=>t.id!==e));ce([...t])})(a),className:"text-danger",children:"\u522a\u9664"}),(0,M.jsx)(Mt.A,{divider:!0})]})]})}}];return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{children:(0,M.jsxs)(o.A,{children:[(0,M.jsx)(n.A,{children:"PCS"}),(0,M.jsx)(n.A,{active:!0,children:"\u6392\u7a0b"})]})}),(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:3,sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:O,for:"space",children:"\u7b56\u7565"}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:[{value:"\u5145\u96fb",label:"\u5145\u96fb"},{value:"\u653e\u96fb",label:"\u653e\u96fb"},{value:"\u5f85\u6a5f",label:"\u5f85\u6a5f"}],onChange:(e,t)=>{G(t.map((e=>e.label)).join("/")),W(e[e.length-1]),ie(e,t)},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:L||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:3,sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:O,for:"space",children:"\u6708"}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"}],onChange:(e,t)=>{B(t.map((e=>e.label)).join("/")),K(e[e.length-1]),ie(e,t)},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:z||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:3,sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:O,for:"space",children:"\u958b\u59cb"}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:ta,onChange:(e,t)=>{Z(t.map((e=>e.label)).join("/")),Q(e[e.length-1]),ie(e,t)},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:q||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:3,sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:O,for:"space",children:"\u7d50\u675f"}),(0,M.jsx)("br",{}),(0,M.jsx)(v.A,{options:ta,onChange:(e,t)=>{ee(t.map((e=>e.label)).join("/")),ae(e[e.length-1]),ie(e,t)},changeOnSelect:!0,expandTrigger:"hover",children:(0,M.jsx)(h.A,{value:$||"",readOnly:!0})})]})}),(0,M.jsx)(u.A,{xs:3,sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:O,for:"space",children:"\u529f\u7387"}),(0,M.jsx)("br",{}),(0,M.jsx)(h.A,{className:"",type:"text",value:se,onChange:e=>re(e.target.value)})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"info",onClick:e=>{if(sa().fire({title:"\u6ce8\u610f!!",text:"\u60a8\u5df2\u78ba\u5b9a\u65b0\u589e!",icon:"success"}),e.preventDefault(),ue){const e=de.find((e=>e.id===ue)),t=de.map((t=>t.id===e.id?{id:t.id,selectedStrategName:L,selectedMonthName:z,selectedStartTimeName:q,selectedEndTimeName:$,selectedPowerName:se}:t));return ce(t),me(0),G(L),B(z),Z(q),ee($),void re("")}" "!==q&&(ce([...de,{id:de.length+1,selectedStrategName:L,selectedMonthName:z,selectedStartTimeName:q,selectedEndTimeName:$,selectedPowerName:se}]),G(""),B(""),Z(""),ee(""),re(""),ve(fe,Ae,de,_e,ge))},children:"\u65b0\u589e"})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"secondary",onClick:()=>{ce([...de.reverse()])},children:"\u53cd\u7f6e"})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"secondary",onClick:()=>{window.confirm("\u8acb\u554f\uff0c\u78ba\u5b9a\u8981\u57f7\u884c\u9001\u51fa?")&&de.forEach((e=>{if(e.selectedStartTimeName&&e.selectedEndTimeName){const[t,a]=e.selectedStartTimeName.split("\u6642"),s=parseInt(t,10),r=parseInt(e.selectedStartTimeName.split("/")[1].split("\u5206")[0],10),[o,n]=e.selectedEndTimeName.split("\u6642"),i=parseInt(o,10),l=parseInt(e.selectedEndTimeName.split("/")[1].split("\u5206")[0],10);Nt.A.post("http://localhost:3088/write_addData",{startTimeHour:s,startTimeMinute:r,endTimeHour:i,endTimeMinute:l}).then((()=>{})).catch((e=>{console.error("Error:",e)}))}}))},children:"\u9001\u51fa"})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:I})]})})]})})})}),(0,M.jsx)(Et.A,{keyField:"id",data:pe,columns:Ue,classes:"mb-2 table-striped",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"}),(0,M.jsx)(i.A,{className:"mb-5",children:(0,M.jsx)(Lt,{meta:he,handler:ge})}),(0,M.jsx)(i.A,{className:"mb-2",children:(0,M.jsx)(l.A,{children:(0,M.jsx)(c.A,{className:"justify-content-between align-items-center",children:(0,M.jsxs)(u.A,{sm:"auto",className:"mb-2 mb-sm-0",tag:et.A,align:"center",children:[(0,M.jsx)("h6",{className:"mb-0 text-nowrap ml-2",children:"\u986f\u793a\u6578\u91cf"}),(0,M.jsxs)(g.A,{id:"itemsPerPage",type:"select",bsSize:"sm",value:be,onChange:e=>{let{target:t}=e;return Ae(Number(t.value))},children:[(0,M.jsx)("option",{value:2,children:"2"}),(0,M.jsx)("option",{value:4,children:"4"}),(0,M.jsx)("option",{value:6,children:"6"}),(0,M.jsx)("option",{value:_e,children:r("All")})]})]})})})}),(0,M.jsx)(Aa,{})]})})));var Ta=a(72926),Sa=a(77028);const Ua=e=>{let{month:t,day:a}=e;return(0,M.jsxs)("div",{className:"calendar",children:[(0,M.jsx)("span",{className:"calendar-month",children:t}),(0,M.jsx)("span",{className:"calendar-day",children:a})]})},Ea=e=>{let{text:t,...a}=e;return(0,M.jsx)(st.A,{...a,children:t})},Da=e=>{let{calendar:t,title:a,badge:s,divider:r,to:o,children:n,file_bytes_base64:i}=e;return(0,M.jsxs)(Sa.A,{children:[(0,M.jsx)(Ua,{...t}),(0,M.jsxs)(Sa.A,{body:!0,className:"position-relative pl-3",children:[(0,M.jsxs)("h6",{className:"fs-0 mb-0",children:[(0,M.jsx)(W.N_,{to:o,onClick:(l=a,d=i,e=>{e.preventDefault();const t="application/*";fetch("data:"+t+";base64,"+d).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download=l,document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}),children:a}),s&&(0,M.jsx)(Ea,{...s,className:"ml-1"})]}),n,r&&(0,M.jsx)("hr",{className:"border-dashed border-bottom-0"})]})]});var l,d};Da.defaultProps={divider:!0};const Ca=Da;var ka=a(59176);const Ma=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,o=j()();(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),n=(0,S.UM)("token");(0,S.Yx)(e)||(0,S.Yx)(n)||(0,S.Yx)(o)||!e?(a("/authentication/basic/login"),t(!0)):((0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",n,w.W0.cookieExpireTime))})),(0,s.useEffect)((()=>{let e=setInterval((()=>{let e=(0,S.UM)("is_logged_in");null!==e&&e||(a("/authentication/basic/login"),t(!0))}),1e3);return()=>clearInterval(e)}),[t,a]);const[n,h]=(0,s.useState)([o.clone().startOf("month").toDate(),o.toDate()]),g={sunday:r("sunday"),monday:r("monday"),tuesday:r("tuesday"),wednesday:r("wednesday"),thursday:r("thursday"),friday:r("friday"),saturday:r("saturday"),ok:r("ok"),today:r("today"),yesterday:r("yesterday"),hours:r("hours"),minutes:r("minutes"),seconds:r("seconds"),last7Days:r("last7Days"),formattedMonthPattern:"yyyy-MM-dd"},[b,y]=(0,s.useState)(!1),[A,v]=(0,s.useState)(!0),[T,U]=(0,s.useState)([]);return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(j()(n[0]).format("YYYY-MM-DDTHH:mm:ss")),console.log(j()(n[1]).format("YYYY-MM-DDTHH:mm:ss")),y(!0),v(!1);let t=!1;fetch(w.hR+"/reports/advancedreports?reportingperiodstartdatetime="+j()(n[0]).format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+j()(n[1]).format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),e.json()))).then((e=>{if(t){console.log(e);let t=[];e.length>0&&e.forEach(((a,s)=>{let o={};o.id=e[s].id,o.calendar={month:e[s].create_datetime_local.substring(5,7),day:e[s].create_datetime_local.substring(8,10)},o.title=e[s].file_name+"."+e[s].file_type,o.additional=r("Created Datetime")+": "+e[s].create_datetime_local+"<br/>"+r("File Size")+": "+(e[s].file_size_bytes/1048576).toFixed(2)+" MB",o.to="#",o.file_bytes_base64=e[s].file_bytes_base64,t.push(o)})),U(t),y(!1),v(!0)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:"ls text-uppercase text-600 font-weight-semi-bold mb-0",for:"reportingPeriodDateRangePicker",children:r("Reporting Period")}),(0,M.jsx)("br",{}),(0,M.jsx)(G,{id:"reportingPeriodDateRangePicker",format:"yyyy-MM-dd HH:mm:ss",value:n,onChange:e=>{null==e?(h([null,null]),y(!0)):("00:00:00"===j()(e[1]).format("HH:mm:ss")&&(e[1]=(0,V.A)(e[1])),h([e[0],e[1]]),y(!1))},size:"md",style:{display:"block",zIndex:10},onClean:e=>{h([null,null])},locale:g,placeholder:r("Select Date Range")})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:b,children:r("Submit")})})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:A})]})})]})})})}),(0,M.jsxs)(i.A,{children:[(0,M.jsx)(gt.A,{title:r("Advanced Reporting"),titleClass:"text-lightSlateGray mb-0"}),(0,M.jsx)(l.A,{className:"fs--1",children:(0,S.i)(T)?(0,M.jsx)(c.A,{children:T.map(((e,t)=>{let{additional:a,...s}=e;return(0,M.jsx)(u.A,{md:6,className:"h-100",children:(0,M.jsx)(Ca,{divider:T.length!==t+1,...s,children:(0,M.jsx)("p",{className:"text-1000 mb-0",dangerouslySetInnerHTML:(0,ka.A)(a)})})},t)}))}):(0,M.jsx)(Ta.A,{color:"info",className:"mb-0",children:r("No data found")})})]})]})}))),Na=e=>{let{text:t,...a}=e;return(0,M.jsx)(st.A,{...a,children:t})},Ya=e=>{let{calendar:t,title:a,badge:s,divider:r,to:o,children:n,file_bytes_base64:i}=e;return(0,M.jsxs)(Sa.A,{children:[(0,M.jsx)(Ua,{...t}),(0,M.jsxs)(Sa.A,{body:!0,className:"position-relative pl-3",children:[(0,M.jsxs)("h6",{className:"fs-0 mb-0",children:[(0,M.jsx)(W.N_,{to:o,onClick:(l=a,d=i,e=>{e.preventDefault();const t="application/*";fetch("data:"+t+";base64,"+d).then((e=>e.blob())).then((e=>{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download=l,document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}),children:a}),s&&(0,M.jsx)(Na,{...s,className:"ml-1"})]}),n,r&&(0,M.jsx)("hr",{className:"border-dashed border-bottom-0"})]})]});var l,d};Ya.defaultProps={divider:!0};const Pa=Ya,Ra=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e;const[o,n]=(0,s.useState)(!1),[d,m]=(0,s.useState)([]),[p,h]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),i=(0,S.UM)("user_display_name"),l=(0,S.UM)("user_uuid"),d=(0,S.UM)("token");if(null!==e&&e){(0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",i,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",l,w.W0.cookieExpireTime),(0,S.n0)("token",d,w.W0.cookieExpireTime);let e=!1;o||fetch(w.hR+"/knowledgefiles",{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t),n(!0);let e=[];t.length>0&&t.forEach(((a,s)=>{let o={};o.id=t[s].id,o.calendar={month:t[s].upload_datetime.substring(5,7),day:t[s].upload_datetime.substring(8,10)},o.title=t[s].file_name,o.additional=r("Created Datetime")+": "+t[s].upload_datetime+"<br/>"+r("File Size")+": "+(t[s].file_size_bytes/1048576).toFixed(2)+" MB",o.to="#",o.file_bytes_base64=t[s].file_bytes_base64,e.push(o)})),m(e),h(!0)}}))}else a("/authentication/basic/login"),t(!0)})),(0,M.jsxs)(i.A,{children:[(0,M.jsx)(gt.A,{title:r("Knowledge Base"),titleClass:"text-lightSlateGray mb-0"}),(0,M.jsxs)(l.A,{className:"fs--1",children:[(0,M.jsx)(_.A,{color:"primary",hidden:p}),(0,S.i)(d)?(0,M.jsx)(c.A,{children:d.map(((e,t)=>{let{additional:a,...s}=e;return(0,M.jsx)(u.A,{md:6,className:"h-100",children:(0,M.jsx)(Pa,{divider:d.length!==t+1,...s,children:(0,M.jsx)("p",{className:"text-1000 mb-0",dangerouslySetInnerHTML:(0,ka.A)(a)})})},t)}))}):(0,M.jsx)(Ta.A,{color:"info",className:"mb-0",children:r("No data found")})]})]})})));var Ha=a(88225);const wa=(0,E.C)()((0,P.A)((e=>{let{setRedirect:t,setRedirectUrl:a,t:r}=e,o=j()();const[n,h]=(0,s.useState)(o.clone().subtract(6,"months")),[b,y]=(0,s.useState)(o),[A,v]=(0,s.useState)("all"),[T,U]=(0,s.useState)("all"),[E,D]=(0,s.useState)(!1),[C,k]=(0,s.useState)([]),[N,Y]=(0,s.useState)(!1),[P,H]=(0,s.useState)(!0),[I,F]=(0,s.useState)(!1);(0,s.useEffect)((()=>{let e=(0,S.UM)("is_logged_in"),s=(0,S.UM)("user_name"),r=(0,S.UM)("user_display_name"),o=(0,S.UM)("user_uuid"),i=(0,S.UM)("token");if((0,S.Yx)(e)||(0,S.Yx)(i)||(0,S.Yx)(o)||!e)a("/authentication/basic/login"),t(!0);else{(0,S.n0)("is_logged_in",!0,w.W0.cookieExpireTime),(0,S.n0)("user_name",s,w.W0.cookieExpireTime),(0,S.n0)("user_display_name",r,w.W0.cookieExpireTime),(0,S.n0)("user_uuid",o,w.W0.cookieExpireTime),(0,S.n0)("token",i,w.W0.cookieExpireTime);let e=!1;E||fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss")+"&priority="+T+"&status="+A,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){D(!0);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),k(e),Y(!0)}}))}}));let O=(0,s.createRef)();const[L,G]=(0,s.useState)(!1),V=e=>{let{page:t,onPageChange:a}=e;return()=>{a(t+1)}},W=e=>{let{page:t,onPageChange:a}=e;return()=>{a(t-1)}},z=()=>{setImmediate((()=>{G(!!O.current.selectionContext.selected.length)}))};const B="ls text-uppercase text-600 font-weight-semi-bold mb-0",J=[{dataField:"subject",text:r("Notification Subject"),classes:"py-2 align-middle",formatter:(e,t)=>{let{url:a}=t;return(0,M.jsx)(s.Fragment,{children:(0,M.jsx)("span",{children:e})})},sort:!0},{dataField:"created_datetime",text:r("Notification Created Datetime"),classes:"py-2 align-middle",sort:!0},{dataField:"message",text:r("Notification Message"),classes:"py-2 align-middle",formatter:e=>(0,M.jsx)(s.Fragment,{children:e}),sort:!0},{dataField:"status",text:r("Notification Status"),classes:"py-2 align-middle",formatter:e=>{let t="",a="",s="";switch(e){case"acknowledged":t="success",a="envelope-open",s=r("Notification Acknowledged");break;case"read":t="success",a="envelope-open",s=r("Notification Read");break;default:t="primary",a="envelope",s=r("Notification Unread")}return(0,M.jsxs)(st.A,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block",children:[s,(0,M.jsx)(rt.g,{icon:a,transform:"shrink-2",className:"ml-1"})]})},sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:(e,t)=>{let{id:a}=t;return(0,M.jsxs)(Dt.A,{children:[(0,M.jsx)(Ct.A,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3",children:(0,M.jsx)(rt.g,{icon:"ellipsis-h",className:"fs--1"})}),(0,M.jsxs)(kt.A,{right:!0,className:"border py-2",children:[(0,M.jsx)(Mt.A,{onClick:()=>X(a),children:r("Notification Mark As Read")}),(0,M.jsx)(Mt.A,{onClick:()=>Q(a),children:r("Notification Mark As Acknowledged")}),(0,M.jsx)(Mt.A,{divider:!0}),(0,M.jsx)(Mt.A,{onClick:()=>$(a),className:"text-danger",children:r("Notification Delete")})]})]})},align:"right"}],K={custom:!0,sizePerPage:10,totalSize:C.length},q=e=>{let{indeterminate:t,rowIndex:a,...s}=e;return(0,M.jsxs)("div",{className:"custom-control custom-checkbox",children:[(0,M.jsx)("input",{className:"custom-control-input",...s,onChange:()=>{},ref:e=>{e&&(e.indeterminate=t)}}),(0,M.jsx)("label",{className:"custom-control-label"})]})},Z=e=>({mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:e=>{let{mode:t,...a}=e;return(0,M.jsx)(q,{type:"checkbox",...a})},selectionRenderer:e=>{let{mode:t,...a}=e;const{rowKey:s,...r}=a;return(0,M.jsx)(q,{type:t,...r})},onSelect:e,onSelectAll:e}),X=e=>{console.log("Mark As Read: ",e);let t=!1;fetch(w.hR+"/webmessages/"+e,{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{status:"read"}})}).then((e=>e.ok?(t=!0,null):e.json())).then((e=>{if(console.log(t),t){let e=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t),D(!0);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),k(e),Y(!0)}}))}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},Q=e=>{console.log("Mark As Acknowledged: ",e);let t=!1;fetch(w.hR+"/webmessages/"+e,{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({data:{status:"acknowledged",reply:"OK"}})}).then((e=>e.ok?(t=!0,null):e.json())).then((e=>{if(console.log(t),t){let e=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t),D(!0);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),k(e),Y(!0)}}))}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},$=e=>{console.log("Delete: ",e);let t=!1;fetch(w.hR+"/webmessages/"+e,{method:"DELETE",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>e.ok?(t=!0,null):e.json())).then((e=>{if(console.log(t),t){let e=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){console.log(t),D(!0);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),k(e),Y(!0)}}))}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},ee=()=>{O.current.selectionContext.selected=[],z();let e=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss")+"&priority="+T+"&status="+A,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((t=>(t.ok&&(e=!0),t.json()))).then((t=>{if(e){D(!0);let e=[];t.length>0&&t.forEach(((a,s)=>{let r={};r.id=t[s].id,r.subject=t[s].subject,r.created_datetime=j()(parseInt(t[s].created_datetime)).format("YYYY-MM-DD HH:mm:ss"),r.message=t[s].message,r.status=t[s].status,r.url=t[s].url,e.push(r)})),k(e),Y(!0)}else R.oR.error(r(t.description))}))};return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)(i.A,{className:"bg-light mb-3",children:(0,M.jsx)(l.A,{className:"p-3",children:(0,M.jsx)(d.A,{onSubmit:e=>{e.preventDefault(),console.log("handleSubmit"),console.log(n.format("YYYY-MM-DDTHH:mm:ss")),console.log(b.format("YYYY-MM-DDTHH:mm:ss")),console.log(T),console.log(A),F(!0),Y(!1),H(!0),k([]);let t=!1;fetch(w.hR+"/webmessages?startdatetime="+n.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+b.format("YYYY-MM-DDTHH:mm:ss")+"&priority="+T+"&status="+A,{method:"GET",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:null}).then((e=>(e.ok&&(t=!0),F(!1),Y(!0),H(!1),e.json()))).then((e=>{if(t){D(!0),console.log(e);let t=[];e.length>0&&e.forEach(((e,a)=>{let s={};s.id=e.id,s.subject=e.subject,s.created_datetime=j()(parseInt(e.created_datetime)).format("YYYY-MM-DD HH:mm:ss"),s.message=e.message,s.status=e.status,s.url=e.url,t.push(s)})),k(t),Y(!0)}else R.oR.error(r(e.description))})).catch((e=>{console.log(e)}))},children:(0,M.jsxs)(c.A,{form:!0,children:[(0,M.jsx)(u.A,{sm:1,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:B,for:"priority",children:r("Notification Priority")}),(0,M.jsxs)(g.A,{type:"select",id:"bulk-select",value:T,onChange:e=>{let{target:t}=e;U(t.value)},children:[(0,M.jsx)("option",{value:"all",children:r("View all")},"all"),(0,M.jsx)("option",{value:"LOW",children:r("Notification Low")},"low"),(0,M.jsx)("option",{value:"MEDIUM",children:r("Notification Medium")},"medium"),(0,M.jsx)("option",{value:"HIGH",children:r("Notification High")},"high"),(0,M.jsx)("option",{value:"CRITICAL",children:r("Notification Critical")},"critical")]})]})}),(0,M.jsx)(u.A,{sm:1,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:B,for:"status",children:r("Notification Status")}),(0,M.jsxs)(g.A,{type:"select",id:"bulk-select",value:A,onChange:e=>{let{target:t}=e;v(t.value)},children:[(0,M.jsx)("option",{value:"all",children:r("View all")},"all"),(0,M.jsx)("option",{value:"read",children:r("Notification Read")},"read"),(0,M.jsx)("option",{value:"new",children:r("notification_NEW")},"unread"),(0,M.jsx)("option",{value:"acknowledged",children:r("Notification Acknowledged")},"acknowledged")]})]})}),(0,M.jsx)(u.A,{sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:B,for:"startDatetime",children:r("Reporting Period Begins")}),(0,M.jsx)(ft(),{id:"startDatetime",value:n,onChange:e=>{h(e)},isValidDate:function(e){return e.isBefore(j()(b,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0})]})}),(0,M.jsx)(u.A,{sm:2,children:(0,M.jsxs)(m.A,{className:"form-group",children:[(0,M.jsx)(p.A,{className:B,for:"endDatetime",children:r("Reporting Period Ends")}),(0,M.jsx)(ft(),{id:"endDatetime",value:b,onChange:e=>{y(e)},isValidDate:function(e){return e.isAfter(j()(n,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(_.A,{color:"primary",hidden:N})]})}),(0,M.jsx)(u.A,{xs:"auto",children:(0,M.jsxs)(m.A,{children:[(0,M.jsx)("br",{}),(0,M.jsx)(x.A,{id:"submit",children:(0,M.jsx)(f.A,{color:"success",disabled:I,children:r("Submit")})})]})})]})})})}),(0,M.jsxs)(i.A,{className:"mb-3",children:[(0,M.jsx)(_.A,{color:"primary",hidden:N}),(0,M.jsx)(gt.A,{title:r("Notification List"),light:!1,titleClass:"text-lightSlateGray mb-0",children:L?(0,M.jsxs)(Ha.A,{size:"sm",className:"input-group input-group-sm",children:[(0,M.jsx)(f.A,{color:"falcon-default",onClick:()=>(()=>{let e=O.current.selectionContext.selected;e.length<=0?R.oR.error(r("Select Row")):fetch(w.hR+"/webmessagesbatch",{method:"PUT",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({ids:e.join(",")})}).then((e=>{if(e.ok)return ee(O),null;{let t=e.json();R.oR.error(r(t.description))}})).catch((e=>{console.log(e)}))})(),size:"sm",className:"ml-2",children:r("Notification Mark As Read")}),(0,M.jsx)(f.A,{color:"falcon-default",onClick:()=>(()=>{let e=O.current.selectionContext.selected;e.length<=0?R.oR.error(r("Select Row")):fetch(w.hR+"/webmessagesbatch",{method:"DELETE",headers:{"Content-type":"application/json","User-UUID":(0,S.UM)("user_uuid"),Token:(0,S.UM)("token")},body:JSON.stringify({ids:e.join(",")})}).then((e=>{if(e.ok)return ee(O),null;{let t=e.json();R.oR.error(r(t.description))}})).catch((e=>{console.log(e)}))})(),size:"sm",className:"ml-2",children:r("Notification Delete")})]}):(0,M.jsx)(s.Fragment,{})}),(0,M.jsx)(l.A,{className:"p-0",children:(0,M.jsx)(Ut.gx,{pagination:(0,Ut.Ay)(K),children:e=>{let{paginationProps:t,paginationTableProps:a}=e;const r=t.page*t.sizePerPage;return(0,M.jsxs)(s.Fragment,{children:[(0,M.jsx)("div",{className:"table-responsive",children:(0,M.jsx)(Et.A,{ref:O,bootstrap4:!0,keyField:"id",data:C,columns:J,selectRow:Z(z),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900",...a})}),(0,M.jsx)(c.A,{noGutters:!0,className:"px-1 py-3 flex-center",children:(0,M.jsxs)(u.A,{xs:"auto",children:[(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",onClick:W(t),disabled:1===t.page,children:(0,M.jsx)(rt.g,{icon:"chevron-left"})}),(0,S.Qf)(t.totalSize,t.sizePerPage).map((e=>(0,M.jsx)(f.A,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:()=>t.onPageChange(e),children:e},e))),(0,M.jsx)(f.A,{color:"falcon-default",size:"sm",className:"ml-2",onClick:V(t),disabled:r>=t.totalSize,children:(0,M.jsx)(rt.g,{icon:"chevron-right"})})]})})]})}})})]})]})}))),Ia=()=>(0,M.jsxs)(r.dO,{children:[(0,M.jsx)(r.qh,{path:"/space/energycategory",exact:!0,component:K}),(0,M.jsx)(r.qh,{path:"/space/energyitem",exact:!0,component:de}),(0,M.jsx)(r.qh,{path:"/space/carbon",exact:!0,component:me}),(0,M.jsx)(r.qh,{path:"/space/cost",exact:!0,component:ge}),(0,M.jsx)(r.qh,{path:"/space/output",exact:!0,component:_e}),(0,M.jsx)(r.qh,{path:"/space/income",exact:!0,component:je}),(0,M.jsx)(r.qh,{path:"/space/efficiency",exact:!0,component:ve}),(0,M.jsx)(r.qh,{path:"/space/load",exact:!0,component:Se}),(0,M.jsx)(r.qh,{path:"/space/statistics",exact:!0,component:Ee}),(0,M.jsx)(r.qh,{path:"/space/saving",exact:!0,component:ke}),(0,M.jsx)(r.qh,{path:"/space/environmentmonitor",exact:!0,component:Oe}),(0,M.jsx)(r.qh,{path:"/auxiliarysystem/energyflowdiagram",exact:!0,component:Ge}),(0,M.jsx)(r.qh,{path:"/auxiliarysystem/distributionsystem",exact:!0,component:Xe}),(0,M.jsx)(r.qh,{path:"/microgrid",exact:!0,component:pt}),(0,M.jsx)(r.qh,{path:"/microgrid/details",exact:!0,component:_t}),(0,M.jsx)(r.qh,{path:"/microgrid/reporting",exact:!0,component:bt}),(0,M.jsx)(r.qh,{path:"/energystoragepowerstation",exact:!0,component:vt}),(0,M.jsx)(r.qh,{path:"/energystoragepowerstation/details",exact:!0,component:Tt}),(0,M.jsx)(r.qh,{path:"/energystoragepowerstation/reporting",exact:!0,component:St}),(0,M.jsx)(r.qh,{path:"/fdd",exact:!0,component:wt}),(0,M.jsx)(r.qh,{path:"/monitoring/spaceequipments",exact:!0,component:Qt}),(0,M.jsx)(r.qh,{path:"/monitoring/combinedequipments",exact:!0,component:va}),(0,M.jsx)(r.qh,{path:"/advancedreporting",exact:!0,component:Ma}),(0,M.jsx)(r.qh,{path:"/knowledgebase",exact:!0,component:Ra}),(0,M.jsx)(r.qh,{path:"/notification",exact:!0,component:wa}),(0,M.jsx)(r.rd,{to:"/errors/404"})]})},47551:(e,t,a)=>{e.exports=a.p+"static/media/EnergyStoragePowerStation.cdcb350bad900caad01f.jpeg"},74739:(e,t,a)=>{e.exports=a.p+"static/media/Microgrid.27115a1d27c862011d4d.jpeg"}}]);
//# sourceMappingURL=77.d519627e.chunk.js.map